2024-07-03 00:02:39.954 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-07-03 00:02:40.465 +07:00 [DBG] Hosting starting
2024-07-03 00:02:40.515 +07:00 [INF] User profile is available. Using 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-07-03 00:02:40.832 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-86acdddc-5ebb-46d0-8da9-a5d2c38b8b42.xml'.
2024-07-03 00:02:40.840 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-97575500-6a39-4aec-a5f7-bc1ac2a50231.xml'.
2024-07-03 00:02:40.841 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-c1d10d47-675a-4953-a6d0-6a670993d84e.xml'.
2024-07-03 00:02:40.841 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-cd53a739-4711-4aeb-9f47-0d2c26453423.xml'.
2024-07-03 00:02:40.846 +07:00 [DBG] Found key {86acdddc-5ebb-46d0-8da9-a5d2c38b8b42}.
2024-07-03 00:02:40.851 +07:00 [DBG] Found key {97575500-6a39-4aec-a5f7-bc1ac2a50231}.
2024-07-03 00:02:40.851 +07:00 [DBG] Found key {c1d10d47-675a-4953-a6d0-6a670993d84e}.
2024-07-03 00:02:40.852 +07:00 [DBG] Found key {cd53a739-4711-4aeb-9f47-0d2c26453423}.
2024-07-03 00:02:40.859 +07:00 [DBG] Considering key {97575500-6a39-4aec-a5f7-bc1ac2a50231} with expiration date 2024-09-23 17:58:26Z as default key.
2024-07-03 00:02:40.865 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-07-03 00:02:40.868 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-07-03 00:02:40.871 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-07-03 00:02:40.875 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-07-03 00:02:40.876 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-07-03 00:02:40.878 +07:00 [DBG] Using key {97575500-6a39-4aec-a5f7-bc1ac2a50231} as the default key.
2024-07-03 00:02:40.879 +07:00 [DBG] Key ring with default key {97575500-6a39-4aec-a5f7-bc1ac2a50231} was loaded during application startup.
2024-07-03 00:02:40.880 +07:00 [DBG] Starting bus instances: IBus
2024-07-03 00:02:40.884 +07:00 [DBG] Starting bus: "rabbitmq://localhost/capygram"
2024-07-03 00:02:40.952 +07:00 [DBG] Connect: guest@localhost:5672/capygram
2024-07-03 00:02:41.141 +07:00 [INF] Now listening on: https://localhost:7284
2024-07-03 00:02:41.144 +07:00 [INF] Now listening on: http://localhost:5090
2024-07-03 00:02:41.146 +07:00 [DBG] Loaded hosting startup assembly capygram.Auth
2024-07-03 00:02:41.148 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-07-03 00:02:41.154 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-07-03 00:02:41.155 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-07-03 00:02:41.157 +07:00 [INF] Hosting environment: Development
2024-07-03 00:02:41.157 +07:00 [INF] Content root path: C:\coode\Hit_Product\capygram-be\src\Services\capygram.Auth
2024-07-03 00:02:41.158 +07:00 [DBG] Hosting started
2024-07-03 00:02:41.487 +07:00 [DBG] Connection id "0HN4QN34E9JE5" received FIN.
2024-07-03 00:02:41.489 +07:00 [DBG] Connection id "0HN4QN34E9JE5" accepted.
2024-07-03 00:02:41.489 +07:00 [DBG] Connection id "0HN4QN34E9JE6" accepted.
2024-07-03 00:02:41.492 +07:00 [DBG] Connection id "0HN4QN34E9JE6" received FIN.
2024-07-03 00:02:41.492 +07:00 [DBG] Connection id "0HN4QN34E9JE5" started.
2024-07-03 00:02:41.495 +07:00 [DBG] Connection id "0HN4QN34E9JE6" started.
2024-07-03 00:02:41.517 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-07-03 00:02:41.517 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-07-03 00:02:41.542 +07:00 [DBG] Connection id "0HN4QN34E9JE6" stopped.
2024-07-03 00:02:41.542 +07:00 [DBG] Connection id "0HN4QN34E9JE5" stopped.
2024-07-03 00:02:41.545 +07:00 [DBG] Connection id "0HN4QN34E9JE5" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-07-03 00:02:41.545 +07:00 [DBG] Connection id "0HN4QN34E9JE6" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-07-03 00:02:41.756 +07:00 [DBG] Connection id "0HN4QN34E9JE7" accepted.
2024-07-03 00:02:41.757 +07:00 [DBG] Connection id "0HN4QN34E9JE7" started.
2024-07-03 00:02:41.811 +07:00 [DBG] Connection 0HN4QN34E9JE7 established using the following protocol: "Tls13"
2024-07-03 00:02:41.883 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7284/swagger/index.html - null null
2024-07-03 00:02:42.010 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-07-03 00:02:42.041 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-07-03 00:02:42.042 +07:00 [DBG] Request did not match any endpoints
2024-07-03 00:02:42.138 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-07-03 00:02:42.140 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-07-03 00:02:42.161 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-07-03 00:02:42.162 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-07-03 00:02:42.166 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7284/swagger/index.html - 200 null text/html;charset=utf-8 289.6298ms
2024-07-03 00:02:42.200 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7284/_framework/aspnetcore-browser-refresh.js - null null
2024-07-03 00:02:42.212 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7284/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 11.7139ms
2024-07-03 00:02:42.244 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7284/_vs/browserLink - null null
2024-07-03 00:02:42.314 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7284/_vs/browserLink - 200 null text/javascript; charset=UTF-8 70.8348ms
2024-07-03 00:03:18.736 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7284/swagger/v1/swagger.json - null null
2024-07-03 00:03:18.740 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-07-03 00:03:18.741 +07:00 [DBG] Request did not match any endpoints
2024-07-03 00:03:18.850 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7284/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 113.676ms
2024-07-03 00:05:46.650 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-07-03 00:05:47.188 +07:00 [DBG] Hosting starting
2024-07-03 00:05:47.224 +07:00 [INF] User profile is available. Using 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-07-03 00:05:47.487 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-86acdddc-5ebb-46d0-8da9-a5d2c38b8b42.xml'.
2024-07-03 00:05:47.493 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-97575500-6a39-4aec-a5f7-bc1ac2a50231.xml'.
2024-07-03 00:05:47.493 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-c1d10d47-675a-4953-a6d0-6a670993d84e.xml'.
2024-07-03 00:05:47.494 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-cd53a739-4711-4aeb-9f47-0d2c26453423.xml'.
2024-07-03 00:05:47.498 +07:00 [DBG] Found key {86acdddc-5ebb-46d0-8da9-a5d2c38b8b42}.
2024-07-03 00:05:47.502 +07:00 [DBG] Found key {97575500-6a39-4aec-a5f7-bc1ac2a50231}.
2024-07-03 00:05:47.503 +07:00 [DBG] Found key {c1d10d47-675a-4953-a6d0-6a670993d84e}.
2024-07-03 00:05:47.503 +07:00 [DBG] Found key {cd53a739-4711-4aeb-9f47-0d2c26453423}.
2024-07-03 00:05:47.510 +07:00 [DBG] Considering key {97575500-6a39-4aec-a5f7-bc1ac2a50231} with expiration date 2024-09-23 17:58:26Z as default key.
2024-07-03 00:05:47.513 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-07-03 00:05:47.514 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-07-03 00:05:47.516 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-07-03 00:05:47.518 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-07-03 00:05:47.519 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-07-03 00:05:47.521 +07:00 [DBG] Using key {97575500-6a39-4aec-a5f7-bc1ac2a50231} as the default key.
2024-07-03 00:05:47.522 +07:00 [DBG] Key ring with default key {97575500-6a39-4aec-a5f7-bc1ac2a50231} was loaded during application startup.
2024-07-03 00:05:47.523 +07:00 [DBG] Starting bus instances: IBus
2024-07-03 00:05:47.527 +07:00 [DBG] Starting bus: "rabbitmq://localhost/capygram"
2024-07-03 00:05:47.569 +07:00 [DBG] Connect: guest@localhost:5672/capygram
2024-07-03 00:05:47.786 +07:00 [INF] Now listening on: https://localhost:7284
2024-07-03 00:05:47.786 +07:00 [INF] Now listening on: http://localhost:5090
2024-07-03 00:05:47.786 +07:00 [DBG] Loaded hosting startup assembly capygram.Auth
2024-07-03 00:05:47.786 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-07-03 00:05:47.787 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-07-03 00:05:47.787 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-07-03 00:05:47.787 +07:00 [INF] Hosting environment: Development
2024-07-03 00:05:47.787 +07:00 [INF] Content root path: C:\coode\Hit_Product\capygram-be\src\Services\capygram.Auth
2024-07-03 00:05:47.788 +07:00 [DBG] Hosting started
2024-07-03 00:08:04.804 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-07-03 00:08:05.403 +07:00 [DBG] Hosting starting
2024-07-03 00:08:05.452 +07:00 [INF] User profile is available. Using 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-07-03 00:08:05.726 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-86acdddc-5ebb-46d0-8da9-a5d2c38b8b42.xml'.
2024-07-03 00:08:05.732 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-97575500-6a39-4aec-a5f7-bc1ac2a50231.xml'.
2024-07-03 00:08:05.732 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-c1d10d47-675a-4953-a6d0-6a670993d84e.xml'.
2024-07-03 00:08:05.733 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-cd53a739-4711-4aeb-9f47-0d2c26453423.xml'.
2024-07-03 00:08:05.736 +07:00 [DBG] Found key {86acdddc-5ebb-46d0-8da9-a5d2c38b8b42}.
2024-07-03 00:08:05.740 +07:00 [DBG] Found key {97575500-6a39-4aec-a5f7-bc1ac2a50231}.
2024-07-03 00:08:05.740 +07:00 [DBG] Found key {c1d10d47-675a-4953-a6d0-6a670993d84e}.
2024-07-03 00:08:05.740 +07:00 [DBG] Found key {cd53a739-4711-4aeb-9f47-0d2c26453423}.
2024-07-03 00:08:05.747 +07:00 [DBG] Considering key {97575500-6a39-4aec-a5f7-bc1ac2a50231} with expiration date 2024-09-23 17:58:26Z as default key.
2024-07-03 00:08:05.750 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-07-03 00:08:05.752 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-07-03 00:08:05.754 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-07-03 00:08:05.757 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-07-03 00:08:05.759 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-07-03 00:08:05.760 +07:00 [DBG] Using key {97575500-6a39-4aec-a5f7-bc1ac2a50231} as the default key.
2024-07-03 00:08:05.761 +07:00 [DBG] Key ring with default key {97575500-6a39-4aec-a5f7-bc1ac2a50231} was loaded during application startup.
2024-07-03 00:08:05.762 +07:00 [DBG] Starting bus instances: IBus
2024-07-03 00:08:05.766 +07:00 [DBG] Starting bus: "rabbitmq://localhost/capygram"
2024-07-03 00:08:05.807 +07:00 [DBG] Connect: guest@localhost:5672/capygram
2024-07-03 00:08:15.189 +07:00 [INF] Now listening on: https://localhost:7284
2024-07-03 00:08:15.190 +07:00 [INF] Now listening on: http://localhost:5090
2024-07-03 00:08:15.190 +07:00 [DBG] Loaded hosting startup assembly capygram.Auth
2024-07-03 00:08:15.190 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-07-03 00:08:15.190 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-07-03 00:08:15.191 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-07-03 00:08:15.191 +07:00 [INF] Hosting environment: Development
2024-07-03 00:08:15.191 +07:00 [INF] Content root path: C:\coode\Hit_Product\capygram-be\src\Services\capygram.Auth
2024-07-03 00:08:15.191 +07:00 [DBG] Hosting started
2024-07-03 00:09:09.991 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-07-03 00:09:10.548 +07:00 [DBG] Hosting starting
2024-07-03 00:09:10.584 +07:00 [INF] User profile is available. Using 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-07-03 00:09:10.845 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-86acdddc-5ebb-46d0-8da9-a5d2c38b8b42.xml'.
2024-07-03 00:09:10.854 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-97575500-6a39-4aec-a5f7-bc1ac2a50231.xml'.
2024-07-03 00:09:10.854 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-c1d10d47-675a-4953-a6d0-6a670993d84e.xml'.
2024-07-03 00:09:10.855 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-cd53a739-4711-4aeb-9f47-0d2c26453423.xml'.
2024-07-03 00:09:10.859 +07:00 [DBG] Found key {86acdddc-5ebb-46d0-8da9-a5d2c38b8b42}.
2024-07-03 00:09:10.864 +07:00 [DBG] Found key {97575500-6a39-4aec-a5f7-bc1ac2a50231}.
2024-07-03 00:09:10.864 +07:00 [DBG] Found key {c1d10d47-675a-4953-a6d0-6a670993d84e}.
2024-07-03 00:09:10.864 +07:00 [DBG] Found key {cd53a739-4711-4aeb-9f47-0d2c26453423}.
2024-07-03 00:09:10.869 +07:00 [DBG] Considering key {97575500-6a39-4aec-a5f7-bc1ac2a50231} with expiration date 2024-09-23 17:58:26Z as default key.
2024-07-03 00:09:10.872 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-07-03 00:09:10.875 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-07-03 00:09:10.877 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-07-03 00:09:10.882 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-07-03 00:09:10.884 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-07-03 00:09:10.887 +07:00 [DBG] Using key {97575500-6a39-4aec-a5f7-bc1ac2a50231} as the default key.
2024-07-03 00:09:10.890 +07:00 [DBG] Key ring with default key {97575500-6a39-4aec-a5f7-bc1ac2a50231} was loaded during application startup.
2024-07-03 00:09:10.893 +07:00 [DBG] Starting bus instances: IBus
2024-07-03 00:09:10.902 +07:00 [DBG] Starting bus: "rabbitmq://localhost/capygram"
2024-07-03 00:09:11.057 +07:00 [DBG] Connect: guest@localhost:5672/capygram
2024-07-03 00:14:37.736 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-07-03 00:14:38.253 +07:00 [DBG] Hosting starting
2024-07-03 00:14:38.292 +07:00 [INF] User profile is available. Using 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-07-03 00:14:38.583 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-86acdddc-5ebb-46d0-8da9-a5d2c38b8b42.xml'.
2024-07-03 00:14:38.589 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-97575500-6a39-4aec-a5f7-bc1ac2a50231.xml'.
2024-07-03 00:14:38.590 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-c1d10d47-675a-4953-a6d0-6a670993d84e.xml'.
2024-07-03 00:14:38.590 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-cd53a739-4711-4aeb-9f47-0d2c26453423.xml'.
2024-07-03 00:14:38.594 +07:00 [DBG] Found key {86acdddc-5ebb-46d0-8da9-a5d2c38b8b42}.
2024-07-03 00:14:38.598 +07:00 [DBG] Found key {97575500-6a39-4aec-a5f7-bc1ac2a50231}.
2024-07-03 00:14:38.599 +07:00 [DBG] Found key {c1d10d47-675a-4953-a6d0-6a670993d84e}.
2024-07-03 00:14:38.599 +07:00 [DBG] Found key {cd53a739-4711-4aeb-9f47-0d2c26453423}.
2024-07-03 00:14:38.605 +07:00 [DBG] Considering key {97575500-6a39-4aec-a5f7-bc1ac2a50231} with expiration date 2024-09-23 17:58:26Z as default key.
2024-07-03 00:14:38.609 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-07-03 00:14:38.612 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-07-03 00:14:38.614 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-07-03 00:14:38.618 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-07-03 00:14:38.620 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-07-03 00:14:38.623 +07:00 [DBG] Using key {97575500-6a39-4aec-a5f7-bc1ac2a50231} as the default key.
2024-07-03 00:14:38.624 +07:00 [DBG] Key ring with default key {97575500-6a39-4aec-a5f7-bc1ac2a50231} was loaded during application startup.
2024-07-03 00:14:38.625 +07:00 [DBG] Starting bus instances: IBus
2024-07-03 00:14:38.630 +07:00 [DBG] Starting bus: "rabbitmq://localhost/capygram"
2024-07-03 00:16:10.655 +07:00 [DBG] Connect: guest@localhost:5672/capygram
2024-07-03 00:20:41.714 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-07-03 00:20:42.303 +07:00 [DBG] Hosting starting
2024-07-03 00:20:42.477 +07:00 [INF] User profile is available. Using 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-07-03 00:20:42.844 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-86acdddc-5ebb-46d0-8da9-a5d2c38b8b42.xml'.
2024-07-03 00:20:42.854 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-97575500-6a39-4aec-a5f7-bc1ac2a50231.xml'.
2024-07-03 00:20:42.855 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-c1d10d47-675a-4953-a6d0-6a670993d84e.xml'.
2024-07-03 00:20:42.855 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-cd53a739-4711-4aeb-9f47-0d2c26453423.xml'.
2024-07-03 00:20:42.861 +07:00 [DBG] Found key {86acdddc-5ebb-46d0-8da9-a5d2c38b8b42}.
2024-07-03 00:20:42.865 +07:00 [DBG] Found key {97575500-6a39-4aec-a5f7-bc1ac2a50231}.
2024-07-03 00:20:42.866 +07:00 [DBG] Found key {c1d10d47-675a-4953-a6d0-6a670993d84e}.
2024-07-03 00:20:42.866 +07:00 [DBG] Found key {cd53a739-4711-4aeb-9f47-0d2c26453423}.
2024-07-03 00:20:42.871 +07:00 [DBG] Considering key {97575500-6a39-4aec-a5f7-bc1ac2a50231} with expiration date 2024-09-23 17:58:26Z as default key.
2024-07-03 00:20:42.874 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-07-03 00:20:42.876 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-07-03 00:20:42.879 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-07-03 00:20:42.882 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-07-03 00:20:42.883 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-07-03 00:20:42.884 +07:00 [DBG] Using key {97575500-6a39-4aec-a5f7-bc1ac2a50231} as the default key.
2024-07-03 00:20:42.885 +07:00 [DBG] Key ring with default key {97575500-6a39-4aec-a5f7-bc1ac2a50231} was loaded during application startup.
2024-07-03 00:20:42.887 +07:00 [DBG] Starting bus instances: IBus
2024-07-03 00:20:42.891 +07:00 [DBG] Starting bus: "rabbitmq://localhost/capygram"
2024-07-03 00:20:43.067 +07:00 [DBG] Connect: guest@localhost:5672/capygram
2024-07-03 00:20:43.251 +07:00 [DBG] Connected: guest@localhost:5672/capygram (address: amqp://localhost:5672, local: 53469)
2024-07-03 00:20:43.272 +07:00 [INF] Now listening on: https://localhost:7284
2024-07-03 00:20:43.272 +07:00 [INF] Now listening on: http://localhost:5090
2024-07-03 00:20:43.272 +07:00 [DBG] Loaded hosting startup assembly capygram.Auth
2024-07-03 00:20:43.272 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-07-03 00:20:43.273 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-07-03 00:20:43.273 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-07-03 00:20:43.273 +07:00 [INF] Hosting environment: Development
2024-07-03 00:20:43.273 +07:00 [INF] Content root path: C:\coode\Hit_Product\capygram-be\src\Services\capygram.Auth
2024-07-03 00:20:43.273 +07:00 [DBG] Hosting started
2024-07-03 00:20:43.283 +07:00 [DBG] Endpoint Ready: "rabbitmq://localhost/capygram/DESKTOPO1721LD_capygramAuth_bus_3t3yyyysrsen7kombdqjiq4pn7?temporary=true"
2024-07-03 00:20:43.286 +07:00 [INF] Bus started: "rabbitmq://localhost/capygram"
2024-07-03 00:25:20.094 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-07-03 00:25:20.730 +07:00 [DBG] Hosting starting
2024-07-03 00:25:20.793 +07:00 [INF] User profile is available. Using 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-07-03 00:25:21.259 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-86acdddc-5ebb-46d0-8da9-a5d2c38b8b42.xml'.
2024-07-03 00:25:21.269 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-97575500-6a39-4aec-a5f7-bc1ac2a50231.xml'.
2024-07-03 00:25:21.270 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-c1d10d47-675a-4953-a6d0-6a670993d84e.xml'.
2024-07-03 00:25:21.271 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-cd53a739-4711-4aeb-9f47-0d2c26453423.xml'.
2024-07-03 00:25:21.277 +07:00 [DBG] Found key {86acdddc-5ebb-46d0-8da9-a5d2c38b8b42}.
2024-07-03 00:25:21.283 +07:00 [DBG] Found key {97575500-6a39-4aec-a5f7-bc1ac2a50231}.
2024-07-03 00:25:21.284 +07:00 [DBG] Found key {c1d10d47-675a-4953-a6d0-6a670993d84e}.
2024-07-03 00:25:21.284 +07:00 [DBG] Found key {cd53a739-4711-4aeb-9f47-0d2c26453423}.
2024-07-03 00:25:21.291 +07:00 [DBG] Considering key {97575500-6a39-4aec-a5f7-bc1ac2a50231} with expiration date 2024-09-23 17:58:26Z as default key.
2024-07-03 00:25:21.295 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-07-03 00:25:21.298 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-07-03 00:25:21.301 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-07-03 00:25:21.305 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-07-03 00:25:21.307 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-07-03 00:25:21.310 +07:00 [DBG] Using key {97575500-6a39-4aec-a5f7-bc1ac2a50231} as the default key.
2024-07-03 00:25:21.311 +07:00 [DBG] Key ring with default key {97575500-6a39-4aec-a5f7-bc1ac2a50231} was loaded during application startup.
2024-07-03 00:25:21.312 +07:00 [DBG] Starting bus instances: IBus
2024-07-03 00:25:21.317 +07:00 [DBG] Starting bus: "rabbitmq://localhost/capygram"
2024-07-03 00:25:21.385 +07:00 [DBG] Connect: guest@localhost:5672/capygram
2024-07-03 00:25:21.612 +07:00 [DBG] Connected: guest@localhost:5672/capygram (address: amqp://localhost:5672, local: 53650)
2024-07-03 00:25:21.667 +07:00 [INF] Now listening on: https://localhost:7284
2024-07-03 00:25:21.682 +07:00 [DBG] Endpoint Ready: "rabbitmq://localhost/capygram/DESKTOPO1721LD_capygramAuth_bus_xt7yyyysrsenh9pqbdqjiq9unx?temporary=true"
2024-07-03 00:25:21.684 +07:00 [INF] Now listening on: http://localhost:5090
2024-07-03 00:25:21.715 +07:00 [DBG] Loaded hosting startup assembly capygram.Auth
2024-07-03 00:25:21.717 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-07-03 00:25:21.719 +07:00 [INF] Bus started: "rabbitmq://localhost/capygram"
2024-07-03 00:25:21.720 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-07-03 00:25:21.722 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-07-03 00:25:21.724 +07:00 [INF] Hosting environment: Development
2024-07-03 00:25:21.726 +07:00 [INF] Content root path: C:\coode\Hit_Product\capygram-be\src\Services\capygram.Auth
2024-07-03 00:25:21.727 +07:00 [DBG] Hosting started
2024-07-03 00:25:21.781 +07:00 [DBG] Connection id "0HN4QNFPR2DNO" accepted.
2024-07-03 00:25:21.781 +07:00 [DBG] Connection id "0HN4QNFPR2DNN" accepted.
2024-07-03 00:25:21.783 +07:00 [DBG] Connection id "0HN4QNFPR2DNO" started.
2024-07-03 00:25:21.783 +07:00 [DBG] Connection id "0HN4QNFPR2DNN" started.
2024-07-03 00:25:21.791 +07:00 [DBG] Connection id "0HN4QNFPR2DNN" received FIN.
2024-07-03 00:25:21.791 +07:00 [DBG] Connection id "0HN4QNFPR2DNO" received FIN.
2024-07-03 00:25:21.800 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-07-03 00:25:21.800 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-07-03 00:25:21.827 +07:00 [DBG] Connection id "0HN4QNFPR2DNO" stopped.
2024-07-03 00:25:21.827 +07:00 [DBG] Connection id "0HN4QNFPR2DNN" stopped.
2024-07-03 00:25:21.829 +07:00 [DBG] Connection id "0HN4QNFPR2DNO" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-07-03 00:25:21.829 +07:00 [DBG] Connection id "0HN4QNFPR2DNN" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-07-03 00:25:22.162 +07:00 [DBG] Connection id "0HN4QNFPR2DNP" accepted.
2024-07-03 00:25:22.163 +07:00 [DBG] Connection id "0HN4QNFPR2DNP" started.
2024-07-03 00:25:22.222 +07:00 [DBG] Connection 0HN4QNFPR2DNP established using the following protocol: "Tls13"
2024-07-03 00:25:22.304 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7284/swagger/index.html - null null
2024-07-03 00:25:22.420 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-07-03 00:25:22.457 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-07-03 00:25:22.460 +07:00 [DBG] Request did not match any endpoints
2024-07-03 00:25:22.566 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-07-03 00:25:22.568 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-07-03 00:25:22.589 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-07-03 00:25:22.590 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-07-03 00:25:22.594 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7284/swagger/index.html - 200 null text/html;charset=utf-8 298.1442ms
2024-07-03 00:25:22.669 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7284/_framework/aspnetcore-browser-refresh.js - null null
2024-07-03 00:25:22.669 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7284/_vs/browserLink - null null
2024-07-03 00:25:22.704 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7284/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 35.4358ms
2024-07-03 00:25:22.904 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7284/_vs/browserLink - 200 null text/javascript; charset=UTF-8 235.3951ms
2024-07-03 00:25:23.403 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7284/swagger/v1/swagger.json - null null
2024-07-03 00:25:23.405 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-07-03 00:25:23.405 +07:00 [DBG] Request did not match any endpoints
2024-07-03 00:25:23.576 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7284/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 173.1992ms
2024-07-03 00:25:23.759 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7284/swagger/favicon-32x32.png - null null
2024-07-03 00:25:23.760 +07:00 [DBG] No candidates found for the request path '/swagger/favicon-32x32.png'
2024-07-03 00:25:23.761 +07:00 [DBG] Request did not match any endpoints
2024-07-03 00:25:23.775 +07:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2024-07-03 00:25:23.777 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7284/swagger/favicon-32x32.png - 200 628 image/png 18.316ms
2024-07-03 00:25:26.094 +07:00 [DBG] Connection id "0HN4QNFPR2DNP" received FIN.
2024-07-03 00:25:26.099 +07:00 [DBG] The connection queue processing loop for 0HN4QNFPR2DNP completed.
2024-07-03 00:25:26.101 +07:00 [DBG] Connection id "0HN4QNFPR2DNP" is closed. The last processed stream ID was 9.
2024-07-03 00:25:26.102 +07:00 [DBG] Connection id "0HN4QNFPR2DNP" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-07-03 00:25:26.117 +07:00 [DBG] Connection id "0HN4QNFPR2DNP" stopped.
2024-07-03 00:27:01.403 +07:00 [DBG] Connection id "0HN4QNFPR2DNQ" accepted.
2024-07-03 00:27:01.403 +07:00 [DBG] Connection id "0HN4QNFPR2DNQ" started.
2024-07-03 00:27:01.408 +07:00 [DBG] Connection 0HN4QNFPR2DNQ established using the following protocol: "Tls13"
2024-07-03 00:27:01.410 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7284/api/Users/login - application/json 48
2024-07-03 00:27:01.414 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Users/login'
2024-07-03 00:27:01.416 +07:00 [DBG] Endpoint 'capygram.Auth.Controllers.UsersController.Login (capygram.Auth)' with route pattern 'api/Users/login' is valid for the request path '/api/Users/login'
2024-07-03 00:27:01.417 +07:00 [DBG] Request matched endpoint 'capygram.Auth.Controllers.UsersController.Login (capygram.Auth)'
2024-07-03 00:27:01.418 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-03 00:27:01.420 +07:00 [INF] Start request......!
2024-07-03 00:27:01.565 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-07-03 00:27:01.569 +07:00 [INF] Executing endpoint 'capygram.Auth.Controllers.UsersController.Login (capygram.Auth)'
2024-07-03 00:27:01.603 +07:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(capygram.Common.DTOs.User.UserAuthenticationDto) on controller capygram.Auth.Controllers.UsersController (capygram.Auth).
2024-07-03 00:27:01.606 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-03 00:27:01.606 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-03 00:27:01.607 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-03 00:27:01.607 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-03 00:27:01.607 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-03 00:27:01.610 +07:00 [DBG] Executing controller factory for controller capygram.Auth.Controllers.UsersController (capygram.Auth)
2024-07-03 00:27:01.619 +07:00 [DBG] Executed controller factory for controller capygram.Auth.Controllers.UsersController (capygram.Auth)
2024-07-03 00:27:01.624 +07:00 [DBG] Attempting to bind parameter 'request' of type 'capygram.Common.DTOs.User.UserAuthenticationDto' ...
2024-07-03 00:27:01.627 +07:00 [DBG] Attempting to bind parameter 'request' of type 'capygram.Common.DTOs.User.UserAuthenticationDto' using the name '' in request data ...
2024-07-03 00:27:01.628 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-07-03 00:27:01.634 +07:00 [DBG] Connection id "0HN4QNFPR2DNQ", Request id "0HN4QNFPR2DNQ:00000001": started reading request body.
2024-07-03 00:27:01.634 +07:00 [DBG] Connection id "0HN4QNFPR2DNQ", Request id "0HN4QNFPR2DNQ:00000001": done reading request body.
2024-07-03 00:27:01.638 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'capygram.Common.DTOs.User.UserAuthenticationDto'
2024-07-03 00:27:01.639 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'capygram.Common.DTOs.User.UserAuthenticationDto'.
2024-07-03 00:27:01.639 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'capygram.Common.DTOs.User.UserAuthenticationDto'.
2024-07-03 00:27:01.640 +07:00 [DBG] Attempting to validate the bound parameter 'request' of type 'capygram.Common.DTOs.User.UserAuthenticationDto' ...
2024-07-03 00:27:01.650 +07:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'capygram.Common.DTOs.User.UserAuthenticationDto'.
2024-07-03 00:27:01.885 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-07-03 00:27:01.888 +07:00 [DBG] No information found on request to perform content negotiation.
2024-07-03 00:27:01.888 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-07-03 00:27:01.888 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-07-03 00:27:01.889 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-07-03 00:27:01.889 +07:00 [INF] Executing OkObjectResult, writing value of type 'capygram.Common.Shared.Result`1[[capygram.Common.DTOs.User.UserAuthenticationResponse, capygram.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-07-03 00:27:01.904 +07:00 [INF] Executed action capygram.Auth.Controllers.UsersController.Login (capygram.Auth) in 293.1281ms
2024-07-03 00:27:01.905 +07:00 [INF] Executed endpoint 'capygram.Auth.Controllers.UsersController.Login (capygram.Auth)'
2024-07-03 00:27:01.906 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7284/api/Users/login - 200 null application/json; charset=utf-8 496.446ms
2024-07-03 00:27:38.546 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7284/api/Users/upload-avatar - multipart/form-data; boundary=----WebKitFormBoundaryJj79M4zRPipOWZl3 522816
2024-07-03 00:27:38.551 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Users/upload-avatar'
2024-07-03 00:27:38.552 +07:00 [DBG] Endpoint 'capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth)' with route pattern 'api/Users/upload-avatar' is valid for the request path '/api/Users/upload-avatar'
2024-07-03 00:27:38.552 +07:00 [DBG] Request matched endpoint 'capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth)'
2024-07-03 00:27:38.553 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-03 00:27:38.553 +07:00 [INF] Start request......!
2024-07-03 00:27:38.557 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-07-03 00:27:38.558 +07:00 [INF] Executing endpoint 'capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth)'
2024-07-03 00:27:38.564 +07:00 [INF] Route matched with {action = "UpdateAvatar", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateAvatar(System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile], System.Guid) on controller capygram.Auth.Controllers.UsersController (capygram.Auth).
2024-07-03 00:27:38.564 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-03 00:27:38.564 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-03 00:27:38.564 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-03 00:27:38.565 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-03 00:27:38.565 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-03 00:27:38.565 +07:00 [DBG] Executing controller factory for controller capygram.Auth.Controllers.UsersController (capygram.Auth)
2024-07-03 00:27:38.567 +07:00 [DBG] Executed controller factory for controller capygram.Auth.Controllers.UsersController (capygram.Auth)
2024-07-03 00:27:38.572 +07:00 [DBG] Connection id "0HN4QNFPR2DNQ", Request id "0HN4QNFPR2DNQ:00000003": started reading request body.
2024-07-03 00:27:38.572 +07:00 [DBG] Connection id "0HN4QNFPR2DNQ", Request id "0HN4QNFPR2DNQ:00000003": done reading request body.
2024-07-03 00:27:38.604 +07:00 [DBG] Attempting to bind parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]' ...
2024-07-03 00:27:38.607 +07:00 [DBG] Attempting to bind parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]' using the name '' in request data ...
2024-07-03 00:27:38.608 +07:00 [DBG] Done attempting to bind parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]'.
2024-07-03 00:27:38.608 +07:00 [DBG] Done attempting to bind parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]'.
2024-07-03 00:27:38.609 +07:00 [DBG] Attempting to validate the bound parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]' ...
2024-07-03 00:27:38.615 +07:00 [DBG] Done attempting to validate the bound parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]'.
2024-07-03 00:27:38.615 +07:00 [DBG] Attempting to bind parameter 'userId' of type 'System.Guid' ...
2024-07-03 00:27:38.616 +07:00 [DBG] Attempting to bind parameter 'userId' of type 'System.Guid' using the name 'userId' in request data ...
2024-07-03 00:27:38.617 +07:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.Guid'.
2024-07-03 00:27:38.617 +07:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.Guid'.
2024-07-03 00:27:38.617 +07:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.Guid' ...
2024-07-03 00:27:38.617 +07:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.Guid'.
2024-07-03 00:28:28.979 +07:00 [DBG] Declare exchange: name: image-upload-notification, type: fanout, durable
2024-07-03 00:28:29.075 +07:00 [ERR] S-FAULT "rabbitmq://localhost/capygram/image-upload-notification" "7c7a0000-1625-902e-10b6-08dc9abc6340" capygram.Common.MessageBus.Events.ImageUploadNotification
System.Runtime.Serialization.SerializationException: Failed to serialize message
 ---> System.InvalidOperationException: Exception creating proxy (MassTransit.DynamicInternal.Microsoft.AspNetCore.Http.IFormFile) for Microsoft.AspNetCore.Http.IFormFile
 ---> System.TypeLoadException: Method 'OpenReadStream' in type 'MassTransit.DynamicInternal.Microsoft.AspNetCore.Http.IFormFile' from assembly 'Microsoft.AspNetCore.HttpMassTransit.DynamicInternald10e4530ea784b018651a3141fc4843d, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null' does not have an implementation.
   at System.Reflection.Emit.RuntimeTypeBuilder.CreateTypeNoLock()
   at System.Reflection.Emit.RuntimeTypeBuilder.CreateTypeInfoImpl()
   at System.Reflection.Emit.TypeBuilder.CreateTypeInfo()
   at MassTransit.Internals.DynamicImplementationBuilder.CreateTypeFromInterface(ModuleBuilder builder, Type interfaceType) in /_/src/MassTransit/Internals/Reflection/DynamicImplementationBuilder.cs:line 82
   --- End of inner exception stack trace ---
   at MassTransit.Internals.DynamicImplementationBuilder.CreateTypeFromInterface(ModuleBuilder builder, Type interfaceType) in /_/src/MassTransit/Internals/Reflection/DynamicImplementationBuilder.cs:line 88
   at MassTransit.Internals.DynamicImplementationBuilder.<>c__DisplayClass6_0.<CreateImplementation>b__0(ModuleBuilder moduleBuilder) in /_/src/MassTransit/Internals/Reflection/DynamicImplementationBuilder.cs:line 43
   at MassTransit.Internals.DynamicImplementationBuilder.GetModuleBuilderForType[TResult](Type interfaceType, Func`2 callback) in /_/src/MassTransit/Internals/Reflection/DynamicImplementationBuilder.cs:line 179
   at MassTransit.Internals.DynamicImplementationBuilder.CreateImplementation(Type interfaceType) in /_/src/MassTransit/Internals/Reflection/DynamicImplementationBuilder.cs:line 43
   at MassTransit.Internals.DynamicImplementationBuilder.<>c__DisplayClass5_0.<GetImplementationType>b__1() in /_/src/MassTransit/Internals/Reflection/DynamicImplementationBuilder.cs:line 35
   at System.Lazy`1.ViaFactory(LazyThreadSafetyMode mode)
   at System.Lazy`1.ExecutionAndPublication(LazyHelper executionAndPublication, Boolean useDefaultConstructor)
   at System.Lazy`1.CreateValue()
   at MassTransit.Internals.DynamicImplementationBuilder.GetImplementationType(Type interfaceType) in /_/src/MassTransit/Internals/Reflection/DynamicImplementationBuilder.cs:line 35
   at MassTransit.Metadata.TypeMetadataCache.GetImplementationType(Type type) in /_/src/MassTransit/Metadata/TypeMetadataCache.cs:line 17
   at MassTransit.Serialization.JsonConverters.SystemTextJsonConverterFactory.CreateConverter(Type typeToConvert, JsonSerializerOptions options) in /_/src/MassTransit/Serialization/JsonConverters/SystemTextJsonConverterFactory.cs:line 158
   at System.Text.Json.Serialization.JsonConverterFactory.GetConverterInternal(Type typeToConvert, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.GetConverterForType(Type typeToConvert, JsonSerializerOptions options, Boolean resolveJsonConverterAttribute)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.GetTypeInfo(Type type, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfoResolverChain.GetTypeInfo(Type type, JsonSerializerOptions options)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoNoCaching(Type type)
   at System.Text.Json.JsonSerializerOptions.CachingContext.CreateCacheEntry(Type type, CachingContext context)
--- End of stack trace from previous location ---
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|172_0()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.ConfigureProperties()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|172_0()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.WriteStackFrame.InitializePolymorphicReEntry(Type runtimeType, JsonSerializerOptions options)
   at System.Text.Json.Serialization.JsonConverter.ResolvePolymorphicConverter(Object value, JsonTypeInfo jsonTypeInfo, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.Serialize(Utf8JsonWriter writer, T& rootValue, Object rootValueBoxed)
   at System.Text.Json.JsonSerializer.Serialize[TValue](Utf8JsonWriter writer, TValue value, JsonSerializerOptions options)
   at MassTransit.Serialization.JsonConverters.TypeMappingJsonConverter`2.Write(Utf8JsonWriter writer, TType value, JsonSerializerOptions options) in /_/src/MassTransit/Serialization/JsonConverters/TypeMappingJsonConverter.cs:line 20
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.Serialize(Utf8JsonWriter writer, T& rootValue, Object rootValueBoxed)
   at System.Text.Json.JsonSerializer.WriteBytes[TValue](TValue& value, JsonTypeInfo`1 jsonTypeInfo)
   at System.Text.Json.JsonSerializer.SerializeToUtf8Bytes[TValue](TValue value, JsonSerializerOptions options)
   at MassTransit.Serialization.SystemTextJsonMessageBody`1.GetBytes() in /_/src/MassTransit/Serialization/SystemTextJsonMessageBody.cs:line 50
   --- End of inner exception stack trace ---
   at MassTransit.Serialization.SystemTextJsonMessageBody`1.GetBytes() in /_/src/MassTransit/Serialization/SystemTextJsonMessageBody.cs:line 56
   at MassTransit.RabbitMqTransport.RabbitMqSendTransportContext.Send[T](ModelContext transportContext, SendContext`1 sendContext) in /_/src/Transports/MassTransit.RabbitMqTransport/RabbitMqTransport/RabbitMqSendTransportContext.cs:line 116
   at MassTransit.Transports.SendTransport`1.SendPipe`1.Send(TContext context) in /_/src/MassTransit/Transports/SendTransport.cs:line 93
2024-07-03 00:28:40.265 +07:00 [INF] Executed action capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth) in 61700.3601ms
2024-07-03 00:28:40.267 +07:00 [INF] Executed endpoint 'capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth)'
2024-07-03 00:29:31.437 +07:00 [ERR] Failed to serialize message
System.Runtime.Serialization.SerializationException: Failed to serialize message
 ---> System.InvalidOperationException: Exception creating proxy (MassTransit.DynamicInternal.Microsoft.AspNetCore.Http.IFormFile) for Microsoft.AspNetCore.Http.IFormFile
 ---> System.TypeLoadException: Method 'OpenReadStream' in type 'MassTransit.DynamicInternal.Microsoft.AspNetCore.Http.IFormFile' from assembly 'Microsoft.AspNetCore.HttpMassTransit.DynamicInternald10e4530ea784b018651a3141fc4843d, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null' does not have an implementation.
   at System.Reflection.Emit.RuntimeTypeBuilder.CreateTypeNoLock()
   at System.Reflection.Emit.RuntimeTypeBuilder.CreateTypeInfoImpl()
   at System.Reflection.Emit.TypeBuilder.CreateTypeInfo()
   at MassTransit.Internals.DynamicImplementationBuilder.CreateTypeFromInterface(ModuleBuilder builder, Type interfaceType) in /_/src/MassTransit/Internals/Reflection/DynamicImplementationBuilder.cs:line 82
   --- End of inner exception stack trace ---
   at MassTransit.Internals.DynamicImplementationBuilder.CreateTypeFromInterface(ModuleBuilder builder, Type interfaceType) in /_/src/MassTransit/Internals/Reflection/DynamicImplementationBuilder.cs:line 88
   at MassTransit.Internals.DynamicImplementationBuilder.<>c__DisplayClass6_0.<CreateImplementation>b__0(ModuleBuilder moduleBuilder) in /_/src/MassTransit/Internals/Reflection/DynamicImplementationBuilder.cs:line 43
   at MassTransit.Internals.DynamicImplementationBuilder.GetModuleBuilderForType[TResult](Type interfaceType, Func`2 callback) in /_/src/MassTransit/Internals/Reflection/DynamicImplementationBuilder.cs:line 179
   at MassTransit.Internals.DynamicImplementationBuilder.CreateImplementation(Type interfaceType) in /_/src/MassTransit/Internals/Reflection/DynamicImplementationBuilder.cs:line 43
   at MassTransit.Internals.DynamicImplementationBuilder.<>c__DisplayClass5_0.<GetImplementationType>b__1() in /_/src/MassTransit/Internals/Reflection/DynamicImplementationBuilder.cs:line 35
   at System.Lazy`1.ViaFactory(LazyThreadSafetyMode mode)
   at System.Lazy`1.ExecutionAndPublication(LazyHelper executionAndPublication, Boolean useDefaultConstructor)
   at System.Lazy`1.CreateValue()
   at MassTransit.Internals.DynamicImplementationBuilder.GetImplementationType(Type interfaceType) in /_/src/MassTransit/Internals/Reflection/DynamicImplementationBuilder.cs:line 35
   at MassTransit.Metadata.TypeMetadataCache.GetImplementationType(Type type) in /_/src/MassTransit/Metadata/TypeMetadataCache.cs:line 17
   at MassTransit.Serialization.JsonConverters.SystemTextJsonConverterFactory.CreateConverter(Type typeToConvert, JsonSerializerOptions options) in /_/src/MassTransit/Serialization/JsonConverters/SystemTextJsonConverterFactory.cs:line 158
   at System.Text.Json.Serialization.JsonConverterFactory.GetConverterInternal(Type typeToConvert, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.GetConverterForType(Type typeToConvert, JsonSerializerOptions options, Boolean resolveJsonConverterAttribute)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.GetTypeInfo(Type type, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfoResolverChain.GetTypeInfo(Type type, JsonSerializerOptions options)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoNoCaching(Type type)
   at System.Text.Json.JsonSerializerOptions.CachingContext.CreateCacheEntry(Type type, CachingContext context)
--- End of stack trace from previous location ---
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|172_0()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.ConfigureProperties()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|172_0()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.WriteStackFrame.InitializePolymorphicReEntry(Type runtimeType, JsonSerializerOptions options)
   at System.Text.Json.Serialization.JsonConverter.ResolvePolymorphicConverter(Object value, JsonTypeInfo jsonTypeInfo, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.Serialize(Utf8JsonWriter writer, T& rootValue, Object rootValueBoxed)
   at System.Text.Json.JsonSerializer.Serialize[TValue](Utf8JsonWriter writer, TValue value, JsonSerializerOptions options)
   at MassTransit.Serialization.JsonConverters.TypeMappingJsonConverter`2.Write(Utf8JsonWriter writer, TType value, JsonSerializerOptions options) in /_/src/MassTransit/Serialization/JsonConverters/TypeMappingJsonConverter.cs:line 20
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.Serialize(Utf8JsonWriter writer, T& rootValue, Object rootValueBoxed)
   at System.Text.Json.JsonSerializer.WriteBytes[TValue](TValue& value, JsonTypeInfo`1 jsonTypeInfo)
   at System.Text.Json.JsonSerializer.SerializeToUtf8Bytes[TValue](TValue value, JsonSerializerOptions options)
   at MassTransit.Serialization.SystemTextJsonMessageBody`1.GetBytes() in /_/src/MassTransit/Serialization/SystemTextJsonMessageBody.cs:line 50
   --- End of inner exception stack trace ---
   at MassTransit.Serialization.SystemTextJsonMessageBody`1.GetBytes() in /_/src/MassTransit/Serialization/SystemTextJsonMessageBody.cs:line 56
   at MassTransit.RabbitMqTransport.RabbitMqSendTransportContext.Send[T](ModelContext transportContext, SendContext`1 sendContext) in /_/src/Transports/MassTransit.RabbitMqTransport/RabbitMqTransport/RabbitMqSendTransportContext.cs:line 116
   at MassTransit.Transports.SendTransport`1.SendPipe`1.Send(TContext context) in /_/src/MassTransit/Transports/SendTransport.cs:line 93
   at MassTransit.Transports.SendTransport`1.SendPipe`1.Send(TContext context) in /_/src/MassTransit/Transports/SendTransport.cs:line 111
   at MassTransit.Agents.PipeContextSupervisor`1.Send(IPipe`1 pipe, CancellationToken cancellationToken) in /_/src/MassTransit/Agents/PipeContextSupervisor.cs:line 55
   at MassTransit.Agents.PipeContextSupervisor`1.Send(IPipe`1 pipe, CancellationToken cancellationToken) in /_/src/MassTransit/Agents/PipeContextSupervisor.cs:line 61
   at MassTransit.Agents.PipeContextSupervisor`1.Send(IPipe`1 pipe, CancellationToken cancellationToken) in /_/src/MassTransit/Agents/PipeContextSupervisor.cs:line 67
   at MassTransit.Transports.HostConfigurationRetryExtensions.Retry(IHostConfiguration hostConfiguration, Func`1 factory, CancellationToken cancellationToken, CancellationToken stoppingToken) in /_/src/MassTransit/Transports/HostConfigurationRetryExtensions.cs:line 39
   at capygram.Auth.Services.UserServices.UpdateAvatar(List`1 fileToUpload, Guid userId) in C:\coode\Hit_Product\capygram-be\src\Services\capygram.Auth\Services\UserServices.cs:line 224
   at capygram.Auth.Controllers.UsersController.UpdateAvatar(List`1 fileToUpload, Guid userId) in C:\coode\Hit_Product\capygram-be\src\Services\capygram.Auth\Controllers\UsersController.cs:line 72
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at capygram.Common.Middlewares.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in C:\coode\Hit_Product\capygram-be\src\Services\capygram.Common\Middlewares\ExceptionHandlingMiddleware.cs:line 19
2024-07-03 00:29:31.517 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7284/api/Users/upload-avatar - 500 null application/json 112971.2951ms
2024-07-03 00:29:36.415 +07:00 [DBG] Connection id "0HN4QNFPR2DNQ" received FIN.
2024-07-03 00:29:36.416 +07:00 [DBG] Connection id "0HN4QNFPR2DNQ" is closed. The last processed stream ID was 3.
2024-07-03 00:29:36.416 +07:00 [DBG] The connection queue processing loop for 0HN4QNFPR2DNQ completed.
2024-07-03 00:29:36.416 +07:00 [DBG] Connection id "0HN4QNFPR2DNQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-07-03 00:29:36.432 +07:00 [DBG] Connection id "0HN4QNFPR2DNQ" stopped.
2024-07-03 00:29:51.950 +07:00 [DBG] Connection id "0HN4QNFPR2DNR" accepted.
2024-07-03 00:29:51.951 +07:00 [DBG] Connection id "0HN4QNFPR2DNR" started.
2024-07-03 00:29:51.954 +07:00 [DBG] Connection 0HN4QNFPR2DNR established using the following protocol: "Tls13"
2024-07-03 00:29:51.956 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7284/api/Users/upload-avatar - multipart/form-data; boundary=----WebKitFormBoundaryduTif2Wmdu01jyEi 522816
2024-07-03 00:29:51.956 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Users/upload-avatar'
2024-07-03 00:29:51.956 +07:00 [DBG] Endpoint 'capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth)' with route pattern 'api/Users/upload-avatar' is valid for the request path '/api/Users/upload-avatar'
2024-07-03 00:29:51.957 +07:00 [DBG] Request matched endpoint 'capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth)'
2024-07-03 00:29:51.958 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-03 00:29:51.960 +07:00 [INF] Start request......!
2024-07-03 00:29:51.962 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-07-03 00:29:51.962 +07:00 [INF] Executing endpoint 'capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth)'
2024-07-03 00:29:51.963 +07:00 [INF] Route matched with {action = "UpdateAvatar", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateAvatar(System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile], System.Guid) on controller capygram.Auth.Controllers.UsersController (capygram.Auth).
2024-07-03 00:29:51.963 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-03 00:29:51.963 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-03 00:29:51.963 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-03 00:29:51.963 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-03 00:29:51.963 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-03 00:29:51.964 +07:00 [DBG] Executing controller factory for controller capygram.Auth.Controllers.UsersController (capygram.Auth)
2024-07-03 00:29:51.970 +07:00 [DBG] Executed controller factory for controller capygram.Auth.Controllers.UsersController (capygram.Auth)
2024-07-03 00:29:51.970 +07:00 [DBG] Connection id "0HN4QNFPR2DNR", Request id "0HN4QNFPR2DNR:00000001": started reading request body.
2024-07-03 00:29:51.970 +07:00 [DBG] Connection id "0HN4QNFPR2DNR", Request id "0HN4QNFPR2DNR:00000001": done reading request body.
2024-07-03 00:29:51.983 +07:00 [DBG] Attempting to bind parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]' ...
2024-07-03 00:29:51.984 +07:00 [DBG] Attempting to bind parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]' using the name '' in request data ...
2024-07-03 00:29:51.984 +07:00 [DBG] Done attempting to bind parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]'.
2024-07-03 00:29:51.984 +07:00 [DBG] Done attempting to bind parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]'.
2024-07-03 00:29:51.985 +07:00 [DBG] Attempting to validate the bound parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]' ...
2024-07-03 00:29:51.985 +07:00 [DBG] Done attempting to validate the bound parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]'.
2024-07-03 00:29:51.985 +07:00 [DBG] Attempting to bind parameter 'userId' of type 'System.Guid' ...
2024-07-03 00:29:51.985 +07:00 [DBG] Attempting to bind parameter 'userId' of type 'System.Guid' using the name 'userId' in request data ...
2024-07-03 00:29:51.986 +07:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.Guid'.
2024-07-03 00:29:51.986 +07:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.Guid'.
2024-07-03 00:29:51.986 +07:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.Guid' ...
2024-07-03 00:29:51.986 +07:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.Guid'.
2024-07-03 00:30:02.790 +07:00 [DBG] Declare exchange: name: image-upload-notification, type: fanout, durable
2024-07-03 00:30:02.803 +07:00 [ERR] S-FAULT "rabbitmq://localhost/capygram/image-upload-notification" "7c7a0000-1625-902e-c36f-08dc9abc9b2f" capygram.Common.MessageBus.Events.ImageUploadNotification
System.Runtime.Serialization.SerializationException: Failed to serialize message
 ---> System.InvalidOperationException: Exception creating proxy (MassTransit.DynamicInternal.Microsoft.AspNetCore.Http.IFormFile) for Microsoft.AspNetCore.Http.IFormFile
 ---> System.TypeLoadException: Method 'OpenReadStream' in type 'MassTransit.DynamicInternal.Microsoft.AspNetCore.Http.IFormFile' from assembly 'Microsoft.AspNetCore.HttpMassTransit.DynamicInternald10e4530ea784b018651a3141fc4843d, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null' does not have an implementation.
   at System.Reflection.Emit.RuntimeTypeBuilder.CreateTypeNoLock()
   at System.Reflection.Emit.RuntimeTypeBuilder.CreateTypeInfoImpl()
   at System.Reflection.Emit.TypeBuilder.CreateTypeInfo()
   at MassTransit.Internals.DynamicImplementationBuilder.CreateTypeFromInterface(ModuleBuilder builder, Type interfaceType) in /_/src/MassTransit/Internals/Reflection/DynamicImplementationBuilder.cs:line 82
   --- End of inner exception stack trace ---
   at MassTransit.Internals.DynamicImplementationBuilder.CreateTypeFromInterface(ModuleBuilder builder, Type interfaceType) in /_/src/MassTransit/Internals/Reflection/DynamicImplementationBuilder.cs:line 88
   at MassTransit.Internals.DynamicImplementationBuilder.<>c__DisplayClass6_0.<CreateImplementation>b__0(ModuleBuilder moduleBuilder) in /_/src/MassTransit/Internals/Reflection/DynamicImplementationBuilder.cs:line 43
   at MassTransit.Internals.DynamicImplementationBuilder.GetModuleBuilderForType[TResult](Type interfaceType, Func`2 callback) in /_/src/MassTransit/Internals/Reflection/DynamicImplementationBuilder.cs:line 179
   at MassTransit.Internals.DynamicImplementationBuilder.CreateImplementation(Type interfaceType) in /_/src/MassTransit/Internals/Reflection/DynamicImplementationBuilder.cs:line 43
   at MassTransit.Internals.DynamicImplementationBuilder.<>c__DisplayClass5_0.<GetImplementationType>b__1() in /_/src/MassTransit/Internals/Reflection/DynamicImplementationBuilder.cs:line 35
   at System.Lazy`1.ViaFactory(LazyThreadSafetyMode mode)
   at System.Lazy`1.ExecutionAndPublication(LazyHelper executionAndPublication, Boolean useDefaultConstructor)
   at System.Lazy`1.CreateValue()
   at MassTransit.Internals.DynamicImplementationBuilder.GetImplementationType(Type interfaceType) in /_/src/MassTransit/Internals/Reflection/DynamicImplementationBuilder.cs:line 35
   at MassTransit.Metadata.TypeMetadataCache.GetImplementationType(Type type) in /_/src/MassTransit/Metadata/TypeMetadataCache.cs:line 17
   at MassTransit.Serialization.JsonConverters.SystemTextJsonConverterFactory.CreateConverter(Type typeToConvert, JsonSerializerOptions options) in /_/src/MassTransit/Serialization/JsonConverters/SystemTextJsonConverterFactory.cs:line 158
   at System.Text.Json.Serialization.JsonConverterFactory.GetConverterInternal(Type typeToConvert, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.GetConverterForType(Type typeToConvert, JsonSerializerOptions options, Boolean resolveJsonConverterAttribute)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.GetTypeInfo(Type type, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfoResolverChain.GetTypeInfo(Type type, JsonSerializerOptions options)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoNoCaching(Type type)
   at System.Text.Json.JsonSerializerOptions.CachingContext.CreateCacheEntry(Type type, CachingContext context)
--- End of stack trace from previous location ---
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|172_0()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.ConfigureProperties()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|172_0()
--- End of stack trace from previous location ---
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|172_0()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.WriteStackFrame.InitializePolymorphicReEntry(Type runtimeType, JsonSerializerOptions options)
   at System.Text.Json.Serialization.JsonConverter.ResolvePolymorphicConverter(Object value, JsonTypeInfo jsonTypeInfo, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.Serialize(Utf8JsonWriter writer, T& rootValue, Object rootValueBoxed)
   at System.Text.Json.JsonSerializer.Serialize[TValue](Utf8JsonWriter writer, TValue value, JsonSerializerOptions options)
   at MassTransit.Serialization.JsonConverters.TypeMappingJsonConverter`2.Write(Utf8JsonWriter writer, TType value, JsonSerializerOptions options) in /_/src/MassTransit/Serialization/JsonConverters/TypeMappingJsonConverter.cs:line 20
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.Serialize(Utf8JsonWriter writer, T& rootValue, Object rootValueBoxed)
   at System.Text.Json.JsonSerializer.WriteBytes[TValue](TValue& value, JsonTypeInfo`1 jsonTypeInfo)
   at System.Text.Json.JsonSerializer.SerializeToUtf8Bytes[TValue](TValue value, JsonSerializerOptions options)
   at MassTransit.Serialization.SystemTextJsonMessageBody`1.GetBytes() in /_/src/MassTransit/Serialization/SystemTextJsonMessageBody.cs:line 50
   --- End of inner exception stack trace ---
   at MassTransit.Serialization.SystemTextJsonMessageBody`1.GetBytes() in /_/src/MassTransit/Serialization/SystemTextJsonMessageBody.cs:line 56
   at MassTransit.RabbitMqTransport.RabbitMqSendTransportContext.Send[T](ModelContext transportContext, SendContext`1 sendContext) in /_/src/Transports/MassTransit.RabbitMqTransport/RabbitMqTransport/RabbitMqSendTransportContext.cs:line 116
   at MassTransit.Transports.SendTransport`1.SendPipe`1.Send(TContext context) in /_/src/MassTransit/Transports/SendTransport.cs:line 93
2024-07-03 00:30:02.924 +07:00 [INF] Executed action capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth) in 10960.0374ms
2024-07-03 00:30:02.924 +07:00 [INF] Executed endpoint 'capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth)'
2024-07-03 00:30:02.962 +07:00 [ERR] Failed to serialize message
System.Runtime.Serialization.SerializationException: Failed to serialize message
 ---> System.InvalidOperationException: Exception creating proxy (MassTransit.DynamicInternal.Microsoft.AspNetCore.Http.IFormFile) for Microsoft.AspNetCore.Http.IFormFile
 ---> System.TypeLoadException: Method 'OpenReadStream' in type 'MassTransit.DynamicInternal.Microsoft.AspNetCore.Http.IFormFile' from assembly 'Microsoft.AspNetCore.HttpMassTransit.DynamicInternald10e4530ea784b018651a3141fc4843d, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null' does not have an implementation.
   at System.Reflection.Emit.RuntimeTypeBuilder.CreateTypeNoLock()
   at System.Reflection.Emit.RuntimeTypeBuilder.CreateTypeInfoImpl()
   at System.Reflection.Emit.TypeBuilder.CreateTypeInfo()
   at MassTransit.Internals.DynamicImplementationBuilder.CreateTypeFromInterface(ModuleBuilder builder, Type interfaceType) in /_/src/MassTransit/Internals/Reflection/DynamicImplementationBuilder.cs:line 82
   --- End of inner exception stack trace ---
   at MassTransit.Internals.DynamicImplementationBuilder.CreateTypeFromInterface(ModuleBuilder builder, Type interfaceType) in /_/src/MassTransit/Internals/Reflection/DynamicImplementationBuilder.cs:line 88
   at MassTransit.Internals.DynamicImplementationBuilder.<>c__DisplayClass6_0.<CreateImplementation>b__0(ModuleBuilder moduleBuilder) in /_/src/MassTransit/Internals/Reflection/DynamicImplementationBuilder.cs:line 43
   at MassTransit.Internals.DynamicImplementationBuilder.GetModuleBuilderForType[TResult](Type interfaceType, Func`2 callback) in /_/src/MassTransit/Internals/Reflection/DynamicImplementationBuilder.cs:line 179
   at MassTransit.Internals.DynamicImplementationBuilder.CreateImplementation(Type interfaceType) in /_/src/MassTransit/Internals/Reflection/DynamicImplementationBuilder.cs:line 43
   at MassTransit.Internals.DynamicImplementationBuilder.<>c__DisplayClass5_0.<GetImplementationType>b__1() in /_/src/MassTransit/Internals/Reflection/DynamicImplementationBuilder.cs:line 35
   at System.Lazy`1.ViaFactory(LazyThreadSafetyMode mode)
   at System.Lazy`1.ExecutionAndPublication(LazyHelper executionAndPublication, Boolean useDefaultConstructor)
   at System.Lazy`1.CreateValue()
   at MassTransit.Internals.DynamicImplementationBuilder.GetImplementationType(Type interfaceType) in /_/src/MassTransit/Internals/Reflection/DynamicImplementationBuilder.cs:line 35
   at MassTransit.Metadata.TypeMetadataCache.GetImplementationType(Type type) in /_/src/MassTransit/Metadata/TypeMetadataCache.cs:line 17
   at MassTransit.Serialization.JsonConverters.SystemTextJsonConverterFactory.CreateConverter(Type typeToConvert, JsonSerializerOptions options) in /_/src/MassTransit/Serialization/JsonConverters/SystemTextJsonConverterFactory.cs:line 158
   at System.Text.Json.Serialization.JsonConverterFactory.GetConverterInternal(Type typeToConvert, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.GetConverterForType(Type typeToConvert, JsonSerializerOptions options, Boolean resolveJsonConverterAttribute)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.GetTypeInfo(Type type, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfoResolverChain.GetTypeInfo(Type type, JsonSerializerOptions options)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoNoCaching(Type type)
   at System.Text.Json.JsonSerializerOptions.CachingContext.CreateCacheEntry(Type type, CachingContext context)
--- End of stack trace from previous location ---
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|172_0()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.ConfigureProperties()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|172_0()
--- End of stack trace from previous location ---
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|172_0()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.WriteStackFrame.InitializePolymorphicReEntry(Type runtimeType, JsonSerializerOptions options)
   at System.Text.Json.Serialization.JsonConverter.ResolvePolymorphicConverter(Object value, JsonTypeInfo jsonTypeInfo, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.Serialize(Utf8JsonWriter writer, T& rootValue, Object rootValueBoxed)
   at System.Text.Json.JsonSerializer.Serialize[TValue](Utf8JsonWriter writer, TValue value, JsonSerializerOptions options)
   at MassTransit.Serialization.JsonConverters.TypeMappingJsonConverter`2.Write(Utf8JsonWriter writer, TType value, JsonSerializerOptions options) in /_/src/MassTransit/Serialization/JsonConverters/TypeMappingJsonConverter.cs:line 20
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.Serialize(Utf8JsonWriter writer, T& rootValue, Object rootValueBoxed)
   at System.Text.Json.JsonSerializer.WriteBytes[TValue](TValue& value, JsonTypeInfo`1 jsonTypeInfo)
   at System.Text.Json.JsonSerializer.SerializeToUtf8Bytes[TValue](TValue value, JsonSerializerOptions options)
   at MassTransit.Serialization.SystemTextJsonMessageBody`1.GetBytes() in /_/src/MassTransit/Serialization/SystemTextJsonMessageBody.cs:line 50
   --- End of inner exception stack trace ---
   at MassTransit.Serialization.SystemTextJsonMessageBody`1.GetBytes() in /_/src/MassTransit/Serialization/SystemTextJsonMessageBody.cs:line 56
   at MassTransit.RabbitMqTransport.RabbitMqSendTransportContext.Send[T](ModelContext transportContext, SendContext`1 sendContext) in /_/src/Transports/MassTransit.RabbitMqTransport/RabbitMqTransport/RabbitMqSendTransportContext.cs:line 116
   at MassTransit.Transports.SendTransport`1.SendPipe`1.Send(TContext context) in /_/src/MassTransit/Transports/SendTransport.cs:line 93
   at MassTransit.Transports.SendTransport`1.SendPipe`1.Send(TContext context) in /_/src/MassTransit/Transports/SendTransport.cs:line 111
   at MassTransit.Agents.PipeContextSupervisor`1.Send(IPipe`1 pipe, CancellationToken cancellationToken) in /_/src/MassTransit/Agents/PipeContextSupervisor.cs:line 55
   at MassTransit.Agents.PipeContextSupervisor`1.Send(IPipe`1 pipe, CancellationToken cancellationToken) in /_/src/MassTransit/Agents/PipeContextSupervisor.cs:line 61
   at MassTransit.Agents.PipeContextSupervisor`1.Send(IPipe`1 pipe, CancellationToken cancellationToken) in /_/src/MassTransit/Agents/PipeContextSupervisor.cs:line 67
   at MassTransit.Transports.HostConfigurationRetryExtensions.Retry(IHostConfiguration hostConfiguration, Func`1 factory, CancellationToken cancellationToken, CancellationToken stoppingToken) in /_/src/MassTransit/Transports/HostConfigurationRetryExtensions.cs:line 39
   at capygram.Auth.Services.UserServices.UpdateAvatar(List`1 fileToUpload, Guid userId) in C:\coode\Hit_Product\capygram-be\src\Services\capygram.Auth\Services\UserServices.cs:line 224
   at capygram.Auth.Controllers.UsersController.UpdateAvatar(List`1 fileToUpload, Guid userId) in C:\coode\Hit_Product\capygram-be\src\Services\capygram.Auth\Controllers\UsersController.cs:line 72
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at capygram.Common.Middlewares.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in C:\coode\Hit_Product\capygram-be\src\Services\capygram.Common\Middlewares\ExceptionHandlingMiddleware.cs:line 19
2024-07-03 00:30:02.970 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7284/api/Users/upload-avatar - 500 null application/json 11014.4035ms
2024-07-03 00:30:20.308 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7284/api/Users/upload-avatar - multipart/form-data; boundary=----WebKitFormBoundarylj6rDGgLoBskDxjY 522816
2024-07-03 00:30:20.309 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Users/upload-avatar'
2024-07-03 00:30:20.309 +07:00 [DBG] Endpoint 'capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth)' with route pattern 'api/Users/upload-avatar' is valid for the request path '/api/Users/upload-avatar'
2024-07-03 00:30:20.310 +07:00 [DBG] Request matched endpoint 'capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth)'
2024-07-03 00:30:20.310 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-03 00:30:20.335 +07:00 [INF] Start request......!
2024-07-03 00:30:20.335 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-07-03 00:30:20.336 +07:00 [INF] Executing endpoint 'capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth)'
2024-07-03 00:30:20.336 +07:00 [INF] Route matched with {action = "UpdateAvatar", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateAvatar(System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile], System.Guid) on controller capygram.Auth.Controllers.UsersController (capygram.Auth).
2024-07-03 00:30:20.336 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-03 00:30:20.336 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-03 00:30:20.336 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-03 00:30:20.336 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-03 00:30:20.337 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-03 00:30:20.337 +07:00 [DBG] Executing controller factory for controller capygram.Auth.Controllers.UsersController (capygram.Auth)
2024-07-03 00:30:20.338 +07:00 [DBG] Executed controller factory for controller capygram.Auth.Controllers.UsersController (capygram.Auth)
2024-07-03 00:30:20.339 +07:00 [DBG] Connection id "0HN4QNFPR2DNR", Request id "0HN4QNFPR2DNR:00000003": started reading request body.
2024-07-03 00:30:20.339 +07:00 [DBG] Connection id "0HN4QNFPR2DNR", Request id "0HN4QNFPR2DNR:00000003": done reading request body.
2024-07-03 00:30:20.349 +07:00 [DBG] Attempting to bind parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]' ...
2024-07-03 00:30:20.350 +07:00 [DBG] Attempting to bind parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]' using the name '' in request data ...
2024-07-03 00:30:20.350 +07:00 [DBG] Done attempting to bind parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]'.
2024-07-03 00:30:20.350 +07:00 [DBG] Done attempting to bind parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]'.
2024-07-03 00:30:20.350 +07:00 [DBG] Attempting to validate the bound parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]' ...
2024-07-03 00:30:20.350 +07:00 [DBG] Done attempting to validate the bound parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]'.
2024-07-03 00:30:20.351 +07:00 [DBG] Attempting to bind parameter 'userId' of type 'System.Guid' ...
2024-07-03 00:30:20.351 +07:00 [DBG] Attempting to bind parameter 'userId' of type 'System.Guid' using the name 'userId' in request data ...
2024-07-03 00:30:20.351 +07:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.Guid'.
2024-07-03 00:30:20.351 +07:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.Guid'.
2024-07-03 00:30:20.351 +07:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.Guid' ...
2024-07-03 00:30:20.351 +07:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.Guid'.
2024-07-03 00:30:25.586 +07:00 [DBG] Declare exchange: name: image-upload-notification, type: fanout, durable
2024-07-03 00:30:25.639 +07:00 [ERR] S-FAULT "rabbitmq://localhost/capygram/image-upload-notification" "7c7a0000-1625-902e-57a0-08dc9abca8c6" capygram.Common.MessageBus.Events.ImageUploadNotification
System.Runtime.Serialization.SerializationException: Failed to serialize message
 ---> System.InvalidOperationException: Exception creating proxy (MassTransit.DynamicInternal.Microsoft.AspNetCore.Http.IFormFile) for Microsoft.AspNetCore.Http.IFormFile
 ---> System.TypeLoadException: Method 'OpenReadStream' in type 'MassTransit.DynamicInternal.Microsoft.AspNetCore.Http.IFormFile' from assembly 'Microsoft.AspNetCore.HttpMassTransit.DynamicInternald10e4530ea784b018651a3141fc4843d, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null' does not have an implementation.
   at System.Reflection.Emit.RuntimeTypeBuilder.CreateTypeNoLock()
   at System.Reflection.Emit.RuntimeTypeBuilder.CreateTypeInfoImpl()
   at System.Reflection.Emit.TypeBuilder.CreateTypeInfo()
   at MassTransit.Internals.DynamicImplementationBuilder.CreateTypeFromInterface(ModuleBuilder builder, Type interfaceType) in /_/src/MassTransit/Internals/Reflection/DynamicImplementationBuilder.cs:line 82
   --- End of inner exception stack trace ---
   at MassTransit.Internals.DynamicImplementationBuilder.CreateTypeFromInterface(ModuleBuilder builder, Type interfaceType) in /_/src/MassTransit/Internals/Reflection/DynamicImplementationBuilder.cs:line 88
   at MassTransit.Internals.DynamicImplementationBuilder.<>c__DisplayClass6_0.<CreateImplementation>b__0(ModuleBuilder moduleBuilder) in /_/src/MassTransit/Internals/Reflection/DynamicImplementationBuilder.cs:line 43
   at MassTransit.Internals.DynamicImplementationBuilder.GetModuleBuilderForType[TResult](Type interfaceType, Func`2 callback) in /_/src/MassTransit/Internals/Reflection/DynamicImplementationBuilder.cs:line 179
   at MassTransit.Internals.DynamicImplementationBuilder.CreateImplementation(Type interfaceType) in /_/src/MassTransit/Internals/Reflection/DynamicImplementationBuilder.cs:line 43
   at MassTransit.Internals.DynamicImplementationBuilder.<>c__DisplayClass5_0.<GetImplementationType>b__1() in /_/src/MassTransit/Internals/Reflection/DynamicImplementationBuilder.cs:line 35
   at System.Lazy`1.ViaFactory(LazyThreadSafetyMode mode)
   at System.Lazy`1.ExecutionAndPublication(LazyHelper executionAndPublication, Boolean useDefaultConstructor)
   at System.Lazy`1.CreateValue()
   at MassTransit.Internals.DynamicImplementationBuilder.GetImplementationType(Type interfaceType) in /_/src/MassTransit/Internals/Reflection/DynamicImplementationBuilder.cs:line 35
   at MassTransit.Metadata.TypeMetadataCache.GetImplementationType(Type type) in /_/src/MassTransit/Metadata/TypeMetadataCache.cs:line 17
   at MassTransit.Serialization.JsonConverters.SystemTextJsonConverterFactory.CreateConverter(Type typeToConvert, JsonSerializerOptions options) in /_/src/MassTransit/Serialization/JsonConverters/SystemTextJsonConverterFactory.cs:line 158
   at System.Text.Json.Serialization.JsonConverterFactory.GetConverterInternal(Type typeToConvert, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.GetConverterForType(Type typeToConvert, JsonSerializerOptions options, Boolean resolveJsonConverterAttribute)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.GetTypeInfo(Type type, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfoResolverChain.GetTypeInfo(Type type, JsonSerializerOptions options)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoNoCaching(Type type)
   at System.Text.Json.JsonSerializerOptions.CachingContext.CreateCacheEntry(Type type, CachingContext context)
--- End of stack trace from previous location ---
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|172_0()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.ConfigureProperties()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|172_0()
--- End of stack trace from previous location ---
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|172_0()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.WriteStackFrame.InitializePolymorphicReEntry(Type runtimeType, JsonSerializerOptions options)
   at System.Text.Json.Serialization.JsonConverter.ResolvePolymorphicConverter(Object value, JsonTypeInfo jsonTypeInfo, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.Serialize(Utf8JsonWriter writer, T& rootValue, Object rootValueBoxed)
   at System.Text.Json.JsonSerializer.Serialize[TValue](Utf8JsonWriter writer, TValue value, JsonSerializerOptions options)
   at MassTransit.Serialization.JsonConverters.TypeMappingJsonConverter`2.Write(Utf8JsonWriter writer, TType value, JsonSerializerOptions options) in /_/src/MassTransit/Serialization/JsonConverters/TypeMappingJsonConverter.cs:line 20
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.Serialize(Utf8JsonWriter writer, T& rootValue, Object rootValueBoxed)
   at System.Text.Json.JsonSerializer.WriteBytes[TValue](TValue& value, JsonTypeInfo`1 jsonTypeInfo)
   at System.Text.Json.JsonSerializer.SerializeToUtf8Bytes[TValue](TValue value, JsonSerializerOptions options)
   at MassTransit.Serialization.SystemTextJsonMessageBody`1.GetBytes() in /_/src/MassTransit/Serialization/SystemTextJsonMessageBody.cs:line 50
   --- End of inner exception stack trace ---
   at MassTransit.Serialization.SystemTextJsonMessageBody`1.GetBytes() in /_/src/MassTransit/Serialization/SystemTextJsonMessageBody.cs:line 56
   at MassTransit.RabbitMqTransport.RabbitMqSendTransportContext.Send[T](ModelContext transportContext, SendContext`1 sendContext) in /_/src/Transports/MassTransit.RabbitMqTransport/RabbitMqTransport/RabbitMqSendTransportContext.cs:line 116
   at MassTransit.Transports.SendTransport`1.SendPipe`1.Send(TContext context) in /_/src/MassTransit/Transports/SendTransport.cs:line 93
2024-07-03 00:30:25.772 +07:00 [INF] Executed action capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth) in 5434.8055ms
2024-07-03 00:30:25.772 +07:00 [INF] Executed endpoint 'capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth)'
2024-07-03 00:30:25.804 +07:00 [ERR] Failed to serialize message
System.Runtime.Serialization.SerializationException: Failed to serialize message
 ---> System.InvalidOperationException: Exception creating proxy (MassTransit.DynamicInternal.Microsoft.AspNetCore.Http.IFormFile) for Microsoft.AspNetCore.Http.IFormFile
 ---> System.TypeLoadException: Method 'OpenReadStream' in type 'MassTransit.DynamicInternal.Microsoft.AspNetCore.Http.IFormFile' from assembly 'Microsoft.AspNetCore.HttpMassTransit.DynamicInternald10e4530ea784b018651a3141fc4843d, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null' does not have an implementation.
   at System.Reflection.Emit.RuntimeTypeBuilder.CreateTypeNoLock()
   at System.Reflection.Emit.RuntimeTypeBuilder.CreateTypeInfoImpl()
   at System.Reflection.Emit.TypeBuilder.CreateTypeInfo()
   at MassTransit.Internals.DynamicImplementationBuilder.CreateTypeFromInterface(ModuleBuilder builder, Type interfaceType) in /_/src/MassTransit/Internals/Reflection/DynamicImplementationBuilder.cs:line 82
   --- End of inner exception stack trace ---
   at MassTransit.Internals.DynamicImplementationBuilder.CreateTypeFromInterface(ModuleBuilder builder, Type interfaceType) in /_/src/MassTransit/Internals/Reflection/DynamicImplementationBuilder.cs:line 88
   at MassTransit.Internals.DynamicImplementationBuilder.<>c__DisplayClass6_0.<CreateImplementation>b__0(ModuleBuilder moduleBuilder) in /_/src/MassTransit/Internals/Reflection/DynamicImplementationBuilder.cs:line 43
   at MassTransit.Internals.DynamicImplementationBuilder.GetModuleBuilderForType[TResult](Type interfaceType, Func`2 callback) in /_/src/MassTransit/Internals/Reflection/DynamicImplementationBuilder.cs:line 179
   at MassTransit.Internals.DynamicImplementationBuilder.CreateImplementation(Type interfaceType) in /_/src/MassTransit/Internals/Reflection/DynamicImplementationBuilder.cs:line 43
   at MassTransit.Internals.DynamicImplementationBuilder.<>c__DisplayClass5_0.<GetImplementationType>b__1() in /_/src/MassTransit/Internals/Reflection/DynamicImplementationBuilder.cs:line 35
   at System.Lazy`1.ViaFactory(LazyThreadSafetyMode mode)
   at System.Lazy`1.ExecutionAndPublication(LazyHelper executionAndPublication, Boolean useDefaultConstructor)
   at System.Lazy`1.CreateValue()
   at MassTransit.Internals.DynamicImplementationBuilder.GetImplementationType(Type interfaceType) in /_/src/MassTransit/Internals/Reflection/DynamicImplementationBuilder.cs:line 35
   at MassTransit.Metadata.TypeMetadataCache.GetImplementationType(Type type) in /_/src/MassTransit/Metadata/TypeMetadataCache.cs:line 17
   at MassTransit.Serialization.JsonConverters.SystemTextJsonConverterFactory.CreateConverter(Type typeToConvert, JsonSerializerOptions options) in /_/src/MassTransit/Serialization/JsonConverters/SystemTextJsonConverterFactory.cs:line 158
   at System.Text.Json.Serialization.JsonConverterFactory.GetConverterInternal(Type typeToConvert, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.GetConverterForType(Type typeToConvert, JsonSerializerOptions options, Boolean resolveJsonConverterAttribute)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.GetTypeInfo(Type type, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfoResolverChain.GetTypeInfo(Type type, JsonSerializerOptions options)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoNoCaching(Type type)
   at System.Text.Json.JsonSerializerOptions.CachingContext.CreateCacheEntry(Type type, CachingContext context)
--- End of stack trace from previous location ---
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|172_0()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.ConfigureProperties()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|172_0()
--- End of stack trace from previous location ---
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|172_0()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.WriteStackFrame.InitializePolymorphicReEntry(Type runtimeType, JsonSerializerOptions options)
   at System.Text.Json.Serialization.JsonConverter.ResolvePolymorphicConverter(Object value, JsonTypeInfo jsonTypeInfo, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.Serialize(Utf8JsonWriter writer, T& rootValue, Object rootValueBoxed)
   at System.Text.Json.JsonSerializer.Serialize[TValue](Utf8JsonWriter writer, TValue value, JsonSerializerOptions options)
   at MassTransit.Serialization.JsonConverters.TypeMappingJsonConverter`2.Write(Utf8JsonWriter writer, TType value, JsonSerializerOptions options) in /_/src/MassTransit/Serialization/JsonConverters/TypeMappingJsonConverter.cs:line 20
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.Serialize(Utf8JsonWriter writer, T& rootValue, Object rootValueBoxed)
   at System.Text.Json.JsonSerializer.WriteBytes[TValue](TValue& value, JsonTypeInfo`1 jsonTypeInfo)
   at System.Text.Json.JsonSerializer.SerializeToUtf8Bytes[TValue](TValue value, JsonSerializerOptions options)
   at MassTransit.Serialization.SystemTextJsonMessageBody`1.GetBytes() in /_/src/MassTransit/Serialization/SystemTextJsonMessageBody.cs:line 50
   --- End of inner exception stack trace ---
   at MassTransit.Serialization.SystemTextJsonMessageBody`1.GetBytes() in /_/src/MassTransit/Serialization/SystemTextJsonMessageBody.cs:line 56
   at MassTransit.RabbitMqTransport.RabbitMqSendTransportContext.Send[T](ModelContext transportContext, SendContext`1 sendContext) in /_/src/Transports/MassTransit.RabbitMqTransport/RabbitMqTransport/RabbitMqSendTransportContext.cs:line 116
   at MassTransit.Transports.SendTransport`1.SendPipe`1.Send(TContext context) in /_/src/MassTransit/Transports/SendTransport.cs:line 93
   at MassTransit.Transports.SendTransport`1.SendPipe`1.Send(TContext context) in /_/src/MassTransit/Transports/SendTransport.cs:line 111
   at MassTransit.Agents.PipeContextSupervisor`1.Send(IPipe`1 pipe, CancellationToken cancellationToken) in /_/src/MassTransit/Agents/PipeContextSupervisor.cs:line 55
   at MassTransit.Agents.PipeContextSupervisor`1.Send(IPipe`1 pipe, CancellationToken cancellationToken) in /_/src/MassTransit/Agents/PipeContextSupervisor.cs:line 61
   at MassTransit.Agents.PipeContextSupervisor`1.Send(IPipe`1 pipe, CancellationToken cancellationToken) in /_/src/MassTransit/Agents/PipeContextSupervisor.cs:line 67
   at MassTransit.Transports.HostConfigurationRetryExtensions.Retry(IHostConfiguration hostConfiguration, Func`1 factory, CancellationToken cancellationToken, CancellationToken stoppingToken) in /_/src/MassTransit/Transports/HostConfigurationRetryExtensions.cs:line 39
   at capygram.Auth.Services.UserServices.UpdateAvatar(List`1 fileToUpload, Guid userId) in C:\coode\Hit_Product\capygram-be\src\Services\capygram.Auth\Services\UserServices.cs:line 224
   at capygram.Auth.Controllers.UsersController.UpdateAvatar(List`1 fileToUpload, Guid userId) in C:\coode\Hit_Product\capygram-be\src\Services\capygram.Auth\Controllers\UsersController.cs:line 72
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at capygram.Common.Middlewares.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in C:\coode\Hit_Product\capygram-be\src\Services\capygram.Common\Middlewares\ExceptionHandlingMiddleware.cs:line 19
2024-07-03 00:30:25.811 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7284/api/Users/upload-avatar - 500 null application/json 5503.5582ms
2024-07-03 00:30:31.494 +07:00 [DBG] Connection id "0HN4QNFPR2DNR" received FIN.
2024-07-03 00:30:31.494 +07:00 [DBG] Connection id "0HN4QNFPR2DNR" is closed. The last processed stream ID was 3.
2024-07-03 00:30:31.494 +07:00 [DBG] Connection id "0HN4QNFPR2DNR" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-07-03 00:30:31.495 +07:00 [DBG] The connection queue processing loop for 0HN4QNFPR2DNR completed.
2024-07-03 00:30:31.495 +07:00 [DBG] Connection id "0HN4QNFPR2DNR" stopped.
2024-07-03 00:32:48.260 +07:00 [DBG] Connection id "0HN4QNFPR2DNS" accepted.
2024-07-03 00:32:48.260 +07:00 [DBG] Connection id "0HN4QNFPR2DNS" started.
2024-07-03 00:32:48.265 +07:00 [DBG] Connection 0HN4QNFPR2DNS established using the following protocol: "Tls13"
2024-07-03 00:32:48.268 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7284/api/Users/upload-avatar - multipart/form-data; boundary=----WebKitFormBoundarywKDJtSXZj419cO1i 522816
2024-07-03 00:32:48.273 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Users/upload-avatar'
2024-07-03 00:32:48.275 +07:00 [DBG] Endpoint 'capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth)' with route pattern 'api/Users/upload-avatar' is valid for the request path '/api/Users/upload-avatar'
2024-07-03 00:32:48.280 +07:00 [DBG] Request matched endpoint 'capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth)'
2024-07-03 00:32:48.281 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-03 00:32:48.282 +07:00 [INF] Start request......!
2024-07-03 00:32:48.282 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-07-03 00:32:48.282 +07:00 [INF] Executing endpoint 'capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth)'
2024-07-03 00:32:48.282 +07:00 [INF] Route matched with {action = "UpdateAvatar", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateAvatar(System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile], System.Guid) on controller capygram.Auth.Controllers.UsersController (capygram.Auth).
2024-07-03 00:32:48.283 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-03 00:32:48.283 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-03 00:32:48.283 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-03 00:32:48.283 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-03 00:32:48.284 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-03 00:32:48.286 +07:00 [DBG] Executing controller factory for controller capygram.Auth.Controllers.UsersController (capygram.Auth)
2024-07-03 00:32:48.288 +07:00 [DBG] Executed controller factory for controller capygram.Auth.Controllers.UsersController (capygram.Auth)
2024-07-03 00:32:48.289 +07:00 [DBG] Connection id "0HN4QNFPR2DNS", Request id "0HN4QNFPR2DNS:00000001": started reading request body.
2024-07-03 00:32:48.289 +07:00 [DBG] Connection id "0HN4QNFPR2DNS", Request id "0HN4QNFPR2DNS:00000001": done reading request body.
2024-07-03 00:32:48.318 +07:00 [DBG] Attempting to bind parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]' ...
2024-07-03 00:32:48.322 +07:00 [DBG] Attempting to bind parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]' using the name '' in request data ...
2024-07-03 00:32:48.323 +07:00 [DBG] Done attempting to bind parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]'.
2024-07-03 00:32:48.330 +07:00 [DBG] Done attempting to bind parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]'.
2024-07-03 00:32:48.332 +07:00 [DBG] Attempting to validate the bound parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]' ...
2024-07-03 00:32:48.334 +07:00 [DBG] Done attempting to validate the bound parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]'.
2024-07-03 00:32:48.335 +07:00 [DBG] Attempting to bind parameter 'userId' of type 'System.Guid' ...
2024-07-03 00:32:48.335 +07:00 [DBG] Attempting to bind parameter 'userId' of type 'System.Guid' using the name 'userId' in request data ...
2024-07-03 00:32:48.336 +07:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.Guid'.
2024-07-03 00:32:48.336 +07:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.Guid'.
2024-07-03 00:32:48.336 +07:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.Guid' ...
2024-07-03 00:32:48.336 +07:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.Guid'.
2024-07-03 00:32:58.908 +07:00 [DBG] Declare exchange: name: image-upload-notification, type: fanout, durable
2024-07-03 00:32:58.926 +07:00 [ERR] S-FAULT "rabbitmq://localhost/capygram/image-upload-notification" "7c7a0000-1625-902e-55c2-08dc9abd0429" capygram.Common.MessageBus.Events.ImageUploadNotification
System.Runtime.Serialization.SerializationException: Failed to serialize message
 ---> System.InvalidOperationException: Exception creating proxy (MassTransit.DynamicInternal.Microsoft.AspNetCore.Http.IFormFile) for Microsoft.AspNetCore.Http.IFormFile
 ---> System.TypeLoadException: Method 'OpenReadStream' in type 'MassTransit.DynamicInternal.Microsoft.AspNetCore.Http.IFormFile' from assembly 'Microsoft.AspNetCore.HttpMassTransit.DynamicInternald10e4530ea784b018651a3141fc4843d, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null' does not have an implementation.
   at System.Reflection.Emit.RuntimeTypeBuilder.CreateTypeNoLock()
   at System.Reflection.Emit.RuntimeTypeBuilder.CreateTypeInfoImpl()
   at System.Reflection.Emit.TypeBuilder.CreateTypeInfo()
   at MassTransit.Internals.DynamicImplementationBuilder.CreateTypeFromInterface(ModuleBuilder builder, Type interfaceType) in /_/src/MassTransit/Internals/Reflection/DynamicImplementationBuilder.cs:line 82
   --- End of inner exception stack trace ---
   at MassTransit.Internals.DynamicImplementationBuilder.CreateTypeFromInterface(ModuleBuilder builder, Type interfaceType) in /_/src/MassTransit/Internals/Reflection/DynamicImplementationBuilder.cs:line 88
   at MassTransit.Internals.DynamicImplementationBuilder.<>c__DisplayClass6_0.<CreateImplementation>b__0(ModuleBuilder moduleBuilder) in /_/src/MassTransit/Internals/Reflection/DynamicImplementationBuilder.cs:line 43
   at MassTransit.Internals.DynamicImplementationBuilder.GetModuleBuilderForType[TResult](Type interfaceType, Func`2 callback) in /_/src/MassTransit/Internals/Reflection/DynamicImplementationBuilder.cs:line 179
   at MassTransit.Internals.DynamicImplementationBuilder.CreateImplementation(Type interfaceType) in /_/src/MassTransit/Internals/Reflection/DynamicImplementationBuilder.cs:line 43
   at MassTransit.Internals.DynamicImplementationBuilder.<>c__DisplayClass5_0.<GetImplementationType>b__1() in /_/src/MassTransit/Internals/Reflection/DynamicImplementationBuilder.cs:line 35
   at System.Lazy`1.ViaFactory(LazyThreadSafetyMode mode)
   at System.Lazy`1.ExecutionAndPublication(LazyHelper executionAndPublication, Boolean useDefaultConstructor)
   at System.Lazy`1.CreateValue()
   at MassTransit.Internals.DynamicImplementationBuilder.GetImplementationType(Type interfaceType) in /_/src/MassTransit/Internals/Reflection/DynamicImplementationBuilder.cs:line 35
   at MassTransit.Metadata.TypeMetadataCache.GetImplementationType(Type type) in /_/src/MassTransit/Metadata/TypeMetadataCache.cs:line 17
   at MassTransit.Serialization.JsonConverters.SystemTextJsonConverterFactory.CreateConverter(Type typeToConvert, JsonSerializerOptions options) in /_/src/MassTransit/Serialization/JsonConverters/SystemTextJsonConverterFactory.cs:line 158
   at System.Text.Json.Serialization.JsonConverterFactory.GetConverterInternal(Type typeToConvert, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.GetConverterForType(Type typeToConvert, JsonSerializerOptions options, Boolean resolveJsonConverterAttribute)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.GetTypeInfo(Type type, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfoResolverChain.GetTypeInfo(Type type, JsonSerializerOptions options)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoNoCaching(Type type)
   at System.Text.Json.JsonSerializerOptions.CachingContext.CreateCacheEntry(Type type, CachingContext context)
--- End of stack trace from previous location ---
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|172_0()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.ConfigureProperties()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|172_0()
--- End of stack trace from previous location ---
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|172_0()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.WriteStackFrame.InitializePolymorphicReEntry(Type runtimeType, JsonSerializerOptions options)
   at System.Text.Json.Serialization.JsonConverter.ResolvePolymorphicConverter(Object value, JsonTypeInfo jsonTypeInfo, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.Serialize(Utf8JsonWriter writer, T& rootValue, Object rootValueBoxed)
   at System.Text.Json.JsonSerializer.Serialize[TValue](Utf8JsonWriter writer, TValue value, JsonSerializerOptions options)
   at MassTransit.Serialization.JsonConverters.TypeMappingJsonConverter`2.Write(Utf8JsonWriter writer, TType value, JsonSerializerOptions options) in /_/src/MassTransit/Serialization/JsonConverters/TypeMappingJsonConverter.cs:line 20
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.Serialize(Utf8JsonWriter writer, T& rootValue, Object rootValueBoxed)
   at System.Text.Json.JsonSerializer.WriteBytes[TValue](TValue& value, JsonTypeInfo`1 jsonTypeInfo)
   at System.Text.Json.JsonSerializer.SerializeToUtf8Bytes[TValue](TValue value, JsonSerializerOptions options)
   at MassTransit.Serialization.SystemTextJsonMessageBody`1.GetBytes() in /_/src/MassTransit/Serialization/SystemTextJsonMessageBody.cs:line 50
   --- End of inner exception stack trace ---
   at MassTransit.Serialization.SystemTextJsonMessageBody`1.GetBytes() in /_/src/MassTransit/Serialization/SystemTextJsonMessageBody.cs:line 56
   at MassTransit.RabbitMqTransport.RabbitMqSendTransportContext.Send[T](ModelContext transportContext, SendContext`1 sendContext) in /_/src/Transports/MassTransit.RabbitMqTransport/RabbitMqTransport/RabbitMqSendTransportContext.cs:line 116
   at MassTransit.Transports.SendTransport`1.SendPipe`1.Send(TContext context) in /_/src/MassTransit/Transports/SendTransport.cs:line 93
2024-07-03 00:32:59.052 +07:00 [INF] Executed action capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth) in 10765.9648ms
2024-07-03 00:32:59.053 +07:00 [INF] Executed endpoint 'capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth)'
2024-07-03 00:34:27.111 +07:00 [ERR] Failed to serialize message
System.Runtime.Serialization.SerializationException: Failed to serialize message
 ---> System.InvalidOperationException: Exception creating proxy (MassTransit.DynamicInternal.Microsoft.AspNetCore.Http.IFormFile) for Microsoft.AspNetCore.Http.IFormFile
 ---> System.TypeLoadException: Method 'OpenReadStream' in type 'MassTransit.DynamicInternal.Microsoft.AspNetCore.Http.IFormFile' from assembly 'Microsoft.AspNetCore.HttpMassTransit.DynamicInternald10e4530ea784b018651a3141fc4843d, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null' does not have an implementation.
   at System.Reflection.Emit.RuntimeTypeBuilder.CreateTypeNoLock()
   at System.Reflection.Emit.RuntimeTypeBuilder.CreateTypeInfoImpl()
   at System.Reflection.Emit.TypeBuilder.CreateTypeInfo()
   at MassTransit.Internals.DynamicImplementationBuilder.CreateTypeFromInterface(ModuleBuilder builder, Type interfaceType) in /_/src/MassTransit/Internals/Reflection/DynamicImplementationBuilder.cs:line 82
   --- End of inner exception stack trace ---
   at MassTransit.Internals.DynamicImplementationBuilder.CreateTypeFromInterface(ModuleBuilder builder, Type interfaceType) in /_/src/MassTransit/Internals/Reflection/DynamicImplementationBuilder.cs:line 88
   at MassTransit.Internals.DynamicImplementationBuilder.<>c__DisplayClass6_0.<CreateImplementation>b__0(ModuleBuilder moduleBuilder) in /_/src/MassTransit/Internals/Reflection/DynamicImplementationBuilder.cs:line 43
   at MassTransit.Internals.DynamicImplementationBuilder.GetModuleBuilderForType[TResult](Type interfaceType, Func`2 callback) in /_/src/MassTransit/Internals/Reflection/DynamicImplementationBuilder.cs:line 179
   at MassTransit.Internals.DynamicImplementationBuilder.CreateImplementation(Type interfaceType) in /_/src/MassTransit/Internals/Reflection/DynamicImplementationBuilder.cs:line 43
   at MassTransit.Internals.DynamicImplementationBuilder.<>c__DisplayClass5_0.<GetImplementationType>b__1() in /_/src/MassTransit/Internals/Reflection/DynamicImplementationBuilder.cs:line 35
   at System.Lazy`1.ViaFactory(LazyThreadSafetyMode mode)
   at System.Lazy`1.ExecutionAndPublication(LazyHelper executionAndPublication, Boolean useDefaultConstructor)
   at System.Lazy`1.CreateValue()
   at MassTransit.Internals.DynamicImplementationBuilder.GetImplementationType(Type interfaceType) in /_/src/MassTransit/Internals/Reflection/DynamicImplementationBuilder.cs:line 35
   at MassTransit.Metadata.TypeMetadataCache.GetImplementationType(Type type) in /_/src/MassTransit/Metadata/TypeMetadataCache.cs:line 17
   at MassTransit.Serialization.JsonConverters.SystemTextJsonConverterFactory.CreateConverter(Type typeToConvert, JsonSerializerOptions options) in /_/src/MassTransit/Serialization/JsonConverters/SystemTextJsonConverterFactory.cs:line 158
   at System.Text.Json.Serialization.JsonConverterFactory.GetConverterInternal(Type typeToConvert, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.GetConverterForType(Type typeToConvert, JsonSerializerOptions options, Boolean resolveJsonConverterAttribute)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.GetTypeInfo(Type type, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfoResolverChain.GetTypeInfo(Type type, JsonSerializerOptions options)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoNoCaching(Type type)
   at System.Text.Json.JsonSerializerOptions.CachingContext.CreateCacheEntry(Type type, CachingContext context)
--- End of stack trace from previous location ---
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|172_0()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.ConfigureProperties()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|172_0()
--- End of stack trace from previous location ---
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|172_0()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.WriteStackFrame.InitializePolymorphicReEntry(Type runtimeType, JsonSerializerOptions options)
   at System.Text.Json.Serialization.JsonConverter.ResolvePolymorphicConverter(Object value, JsonTypeInfo jsonTypeInfo, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.Serialize(Utf8JsonWriter writer, T& rootValue, Object rootValueBoxed)
   at System.Text.Json.JsonSerializer.Serialize[TValue](Utf8JsonWriter writer, TValue value, JsonSerializerOptions options)
   at MassTransit.Serialization.JsonConverters.TypeMappingJsonConverter`2.Write(Utf8JsonWriter writer, TType value, JsonSerializerOptions options) in /_/src/MassTransit/Serialization/JsonConverters/TypeMappingJsonConverter.cs:line 20
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.Serialize(Utf8JsonWriter writer, T& rootValue, Object rootValueBoxed)
   at System.Text.Json.JsonSerializer.WriteBytes[TValue](TValue& value, JsonTypeInfo`1 jsonTypeInfo)
   at System.Text.Json.JsonSerializer.SerializeToUtf8Bytes[TValue](TValue value, JsonSerializerOptions options)
   at MassTransit.Serialization.SystemTextJsonMessageBody`1.GetBytes() in /_/src/MassTransit/Serialization/SystemTextJsonMessageBody.cs:line 50
   --- End of inner exception stack trace ---
   at MassTransit.Serialization.SystemTextJsonMessageBody`1.GetBytes() in /_/src/MassTransit/Serialization/SystemTextJsonMessageBody.cs:line 56
   at MassTransit.RabbitMqTransport.RabbitMqSendTransportContext.Send[T](ModelContext transportContext, SendContext`1 sendContext) in /_/src/Transports/MassTransit.RabbitMqTransport/RabbitMqTransport/RabbitMqSendTransportContext.cs:line 116
   at MassTransit.Transports.SendTransport`1.SendPipe`1.Send(TContext context) in /_/src/MassTransit/Transports/SendTransport.cs:line 93
   at MassTransit.Transports.SendTransport`1.SendPipe`1.Send(TContext context) in /_/src/MassTransit/Transports/SendTransport.cs:line 111
   at MassTransit.Agents.PipeContextSupervisor`1.Send(IPipe`1 pipe, CancellationToken cancellationToken) in /_/src/MassTransit/Agents/PipeContextSupervisor.cs:line 55
   at MassTransit.Agents.PipeContextSupervisor`1.Send(IPipe`1 pipe, CancellationToken cancellationToken) in /_/src/MassTransit/Agents/PipeContextSupervisor.cs:line 61
   at MassTransit.Agents.PipeContextSupervisor`1.Send(IPipe`1 pipe, CancellationToken cancellationToken) in /_/src/MassTransit/Agents/PipeContextSupervisor.cs:line 67
   at MassTransit.Transports.HostConfigurationRetryExtensions.Retry(IHostConfiguration hostConfiguration, Func`1 factory, CancellationToken cancellationToken, CancellationToken stoppingToken) in /_/src/MassTransit/Transports/HostConfigurationRetryExtensions.cs:line 39
   at capygram.Auth.Services.UserServices.UpdateAvatar(List`1 fileToUpload, Guid userId) in C:\coode\Hit_Product\capygram-be\src\Services\capygram.Auth\Services\UserServices.cs:line 224
   at capygram.Auth.Controllers.UsersController.UpdateAvatar(List`1 fileToUpload, Guid userId) in C:\coode\Hit_Product\capygram-be\src\Services\capygram.Auth\Controllers\UsersController.cs:line 72
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at capygram.Common.Middlewares.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in C:\coode\Hit_Product\capygram-be\src\Services\capygram.Common\Middlewares\ExceptionHandlingMiddleware.cs:line 19
2024-07-03 00:34:27.137 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7284/api/Users/upload-avatar - 500 null application/json 98868.8873ms
2024-07-03 00:34:31.756 +07:00 [DBG] Connection id "0HN4QNFPR2DNS" received FIN.
2024-07-03 00:34:31.757 +07:00 [DBG] Connection id "0HN4QNFPR2DNS" is closed. The last processed stream ID was 1.
2024-07-03 00:34:31.757 +07:00 [DBG] The connection queue processing loop for 0HN4QNFPR2DNS completed.
2024-07-03 00:34:31.757 +07:00 [DBG] Connection id "0HN4QNFPR2DNS" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-07-03 00:34:31.762 +07:00 [DBG] Connection id "0HN4QNFPR2DNS" stopped.
2024-07-03 00:47:05.605 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-07-03 00:47:06.115 +07:00 [DBG] Hosting starting
2024-07-03 00:47:06.147 +07:00 [INF] User profile is available. Using 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-07-03 00:47:06.613 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-86acdddc-5ebb-46d0-8da9-a5d2c38b8b42.xml'.
2024-07-03 00:47:06.624 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-97575500-6a39-4aec-a5f7-bc1ac2a50231.xml'.
2024-07-03 00:47:06.625 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-c1d10d47-675a-4953-a6d0-6a670993d84e.xml'.
2024-07-03 00:47:06.626 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-cd53a739-4711-4aeb-9f47-0d2c26453423.xml'.
2024-07-03 00:47:06.631 +07:00 [DBG] Found key {86acdddc-5ebb-46d0-8da9-a5d2c38b8b42}.
2024-07-03 00:47:06.637 +07:00 [DBG] Found key {97575500-6a39-4aec-a5f7-bc1ac2a50231}.
2024-07-03 00:47:06.637 +07:00 [DBG] Found key {c1d10d47-675a-4953-a6d0-6a670993d84e}.
2024-07-03 00:47:06.638 +07:00 [DBG] Found key {cd53a739-4711-4aeb-9f47-0d2c26453423}.
2024-07-03 00:47:06.644 +07:00 [DBG] Considering key {97575500-6a39-4aec-a5f7-bc1ac2a50231} with expiration date 2024-09-23 17:58:26Z as default key.
2024-07-03 00:47:06.649 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-07-03 00:47:06.652 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-07-03 00:47:06.654 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-07-03 00:47:06.658 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-07-03 00:47:06.660 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-07-03 00:47:06.661 +07:00 [DBG] Using key {97575500-6a39-4aec-a5f7-bc1ac2a50231} as the default key.
2024-07-03 00:47:06.662 +07:00 [DBG] Key ring with default key {97575500-6a39-4aec-a5f7-bc1ac2a50231} was loaded during application startup.
2024-07-03 00:47:06.664 +07:00 [DBG] Starting bus instances: IBus
2024-07-03 00:47:06.669 +07:00 [DBG] Starting bus: "rabbitmq://localhost/capygram"
2024-07-03 00:47:06.760 +07:00 [DBG] Connect: guest@localhost:5672/capygram
2024-07-03 00:47:07.032 +07:00 [DBG] Connected: guest@localhost:5672/capygram (address: amqp://localhost:5672, local: 55359)
2024-07-03 00:47:07.123 +07:00 [DBG] Connection id "0HN4QNRURP9FT" accepted.
2024-07-03 00:47:07.133 +07:00 [DBG] Connection id "0HN4QNRURP9FT" received FIN.
2024-07-03 00:47:07.135 +07:00 [DBG] Connection id "0HN4QNRURP9FU" received FIN.
2024-07-03 00:47:07.124 +07:00 [DBG] Connection id "0HN4QNRURP9FU" accepted.
2024-07-03 00:47:07.138 +07:00 [DBG] Connection id "0HN4QNRURP9FT" started.
2024-07-03 00:47:07.139 +07:00 [DBG] Connection id "0HN4QNRURP9FU" started.
2024-07-03 00:47:07.156 +07:00 [DBG] Endpoint Ready: "rabbitmq://localhost/capygram/DESKTOPO1721LD_capygramAuth_bus_ub6oyyysrsenhqrbbdqjixz7nz?temporary=true"
2024-07-03 00:47:07.163 +07:00 [INF] Now listening on: https://localhost:7284
2024-07-03 00:47:07.163 +07:00 [INF] Bus started: "rabbitmq://localhost/capygram"
2024-07-03 00:47:07.167 +07:00 [INF] Now listening on: http://localhost:5090
2024-07-03 00:47:07.268 +07:00 [DBG] Loaded hosting startup assembly capygram.Auth
2024-07-03 00:47:07.268 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-07-03 00:47:07.271 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-07-03 00:47:07.272 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-07-03 00:47:07.274 +07:00 [INF] Hosting environment: Development
2024-07-03 00:47:07.274 +07:00 [INF] Content root path: C:\coode\Hit_Product\capygram-be\src\Services\capygram.Auth
2024-07-03 00:47:07.274 +07:00 [DBG] Hosting started
2024-07-03 00:47:07.169 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-07-03 00:47:07.268 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-07-03 00:47:07.283 +07:00 [DBG] Connection id "0HN4QNRURP9FU" stopped.
2024-07-03 00:47:07.283 +07:00 [DBG] Connection id "0HN4QNRURP9FT" stopped.
2024-07-03 00:47:07.290 +07:00 [DBG] Connection id "0HN4QNRURP9FU" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-07-03 00:47:07.290 +07:00 [DBG] Connection id "0HN4QNRURP9FT" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-07-03 00:47:07.551 +07:00 [DBG] Connection id "0HN4QNRURP9FV" accepted.
2024-07-03 00:47:07.554 +07:00 [DBG] Connection id "0HN4QNRURP9FV" started.
2024-07-03 00:47:07.617 +07:00 [DBG] Connection 0HN4QNRURP9FV established using the following protocol: "Tls13"
2024-07-03 00:47:07.682 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7284/swagger/index.html - null null
2024-07-03 00:47:07.777 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-07-03 00:47:07.823 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-07-03 00:47:07.826 +07:00 [DBG] Request did not match any endpoints
2024-07-03 00:47:07.935 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-07-03 00:47:07.938 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-07-03 00:47:07.981 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-07-03 00:47:07.982 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-07-03 00:47:07.986 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7284/swagger/index.html - 200 null text/html;charset=utf-8 308.4385ms
2024-07-03 00:47:07.998 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7284/_framework/aspnetcore-browser-refresh.js - null null
2024-07-03 00:47:08.020 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7284/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 22.2194ms
2024-07-03 00:47:08.070 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7284/_vs/browserLink - null null
2024-07-03 00:47:08.147 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7284/_vs/browserLink - 200 null text/javascript; charset=UTF-8 78.0818ms
2024-07-03 00:47:08.339 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7284/swagger/v1/swagger.json - null null
2024-07-03 00:47:08.341 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-07-03 00:47:08.341 +07:00 [DBG] Request did not match any endpoints
2024-07-03 00:47:08.491 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7284/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 151.5092ms
2024-07-03 00:47:43.055 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7284/api/Users/upload-avatar - multipart/form-data; boundary=----WebKitFormBoundaryA7Q4FUr0ww26Ccgu 522816
2024-07-03 00:47:43.125 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Users/upload-avatar'
2024-07-03 00:47:43.127 +07:00 [DBG] Endpoint 'capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth)' with route pattern 'api/Users/upload-avatar' is valid for the request path '/api/Users/upload-avatar'
2024-07-03 00:47:43.128 +07:00 [DBG] Request matched endpoint 'capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth)'
2024-07-03 00:47:43.129 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-03 00:47:43.131 +07:00 [INF] Start request......!
2024-07-03 00:47:43.195 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-07-03 00:47:43.198 +07:00 [INF] Executing endpoint 'capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth)'
2024-07-03 00:47:43.223 +07:00 [INF] Route matched with {action = "UpdateAvatar", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateAvatar(System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile], System.Guid) on controller capygram.Auth.Controllers.UsersController (capygram.Auth).
2024-07-03 00:47:43.225 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-03 00:47:43.225 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-03 00:47:43.226 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-03 00:47:43.226 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-03 00:47:43.226 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-03 00:47:43.228 +07:00 [DBG] Executing controller factory for controller capygram.Auth.Controllers.UsersController (capygram.Auth)
2024-07-03 00:47:43.237 +07:00 [DBG] Executed controller factory for controller capygram.Auth.Controllers.UsersController (capygram.Auth)
2024-07-03 00:47:43.243 +07:00 [DBG] Connection id "0HN4QNRURP9FV", Request id "0HN4QNRURP9FV:00000009": started reading request body.
2024-07-03 00:47:43.244 +07:00 [DBG] Connection id "0HN4QNRURP9FV", Request id "0HN4QNRURP9FV:00000009": done reading request body.
2024-07-03 00:47:43.272 +07:00 [DBG] Attempting to bind parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]' ...
2024-07-03 00:47:43.276 +07:00 [DBG] Attempting to bind parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]' using the name '' in request data ...
2024-07-03 00:47:43.277 +07:00 [DBG] Done attempting to bind parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]'.
2024-07-03 00:47:43.278 +07:00 [DBG] Done attempting to bind parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]'.
2024-07-03 00:47:43.278 +07:00 [DBG] Attempting to validate the bound parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]' ...
2024-07-03 00:47:43.288 +07:00 [DBG] Done attempting to validate the bound parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]'.
2024-07-03 00:47:43.289 +07:00 [DBG] Attempting to bind parameter 'userId' of type 'System.Guid' ...
2024-07-03 00:47:43.290 +07:00 [DBG] Attempting to bind parameter 'userId' of type 'System.Guid' using the name 'userId' in request data ...
2024-07-03 00:47:43.291 +07:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.Guid'.
2024-07-03 00:47:43.291 +07:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.Guid'.
2024-07-03 00:47:43.291 +07:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.Guid' ...
2024-07-03 00:47:43.291 +07:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.Guid'.
2024-07-03 00:47:51.727 +07:00 [DBG] Declare exchange: name: image-upload-notification, type: fanout, durable
2024-07-03 00:47:51.809 +07:00 [ERR] S-FAULT "rabbitmq://localhost/capygram/image-upload-notification" "987d0000-1625-902e-8fdf-08dc9abf184d" capygram.Common.MessageBus.Events.ImageUploadNotification
System.Runtime.Serialization.SerializationException: Failed to serialize message
 ---> System.InvalidOperationException: Timeouts are not supported on this stream.
   at System.IO.Stream.get_ReadTimeout()
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWriteAsObject(Utf8JsonWriter writer, Object value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.Serialize(Utf8JsonWriter writer, T& rootValue, Object rootValueBoxed)
   at System.Text.Json.JsonSerializer.Serialize[TValue](Utf8JsonWriter writer, TValue value, JsonSerializerOptions options)
   at MassTransit.Serialization.JsonConverters.TypeMappingJsonConverter`2.Write(Utf8JsonWriter writer, TType value, JsonSerializerOptions options) in /_/src/MassTransit/Serialization/JsonConverters/TypeMappingJsonConverter.cs:line 20
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.Serialize(Utf8JsonWriter writer, T& rootValue, Object rootValueBoxed)
   at System.Text.Json.JsonSerializer.WriteBytes[TValue](TValue& value, JsonTypeInfo`1 jsonTypeInfo)
   at System.Text.Json.JsonSerializer.SerializeToUtf8Bytes[TValue](TValue value, JsonSerializerOptions options)
   at MassTransit.Serialization.SystemTextJsonMessageBody`1.GetBytes() in /_/src/MassTransit/Serialization/SystemTextJsonMessageBody.cs:line 50
   --- End of inner exception stack trace ---
   at MassTransit.Serialization.SystemTextJsonMessageBody`1.GetBytes() in /_/src/MassTransit/Serialization/SystemTextJsonMessageBody.cs:line 56
   at MassTransit.RabbitMqTransport.RabbitMqSendTransportContext.Send[T](ModelContext transportContext, SendContext`1 sendContext) in /_/src/Transports/MassTransit.RabbitMqTransport/RabbitMqTransport/RabbitMqSendTransportContext.cs:line 116
   at MassTransit.Transports.SendTransport`1.SendPipe`1.Send(TContext context) in /_/src/MassTransit/Transports/SendTransport.cs:line 93
2024-07-03 00:47:58.752 +07:00 [INF] Executed action capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth) in 15523.64ms
2024-07-03 00:47:58.754 +07:00 [INF] Executed endpoint 'capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth)'
2024-07-03 00:48:43.955 +07:00 [ERR] Failed to serialize message
System.Runtime.Serialization.SerializationException: Failed to serialize message
 ---> System.InvalidOperationException: Timeouts are not supported on this stream.
   at System.IO.Stream.get_ReadTimeout()
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWriteAsObject(Utf8JsonWriter writer, Object value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.Serialize(Utf8JsonWriter writer, T& rootValue, Object rootValueBoxed)
   at System.Text.Json.JsonSerializer.Serialize[TValue](Utf8JsonWriter writer, TValue value, JsonSerializerOptions options)
   at MassTransit.Serialization.JsonConverters.TypeMappingJsonConverter`2.Write(Utf8JsonWriter writer, TType value, JsonSerializerOptions options) in /_/src/MassTransit/Serialization/JsonConverters/TypeMappingJsonConverter.cs:line 20
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.Serialize(Utf8JsonWriter writer, T& rootValue, Object rootValueBoxed)
   at System.Text.Json.JsonSerializer.WriteBytes[TValue](TValue& value, JsonTypeInfo`1 jsonTypeInfo)
   at System.Text.Json.JsonSerializer.SerializeToUtf8Bytes[TValue](TValue value, JsonSerializerOptions options)
   at MassTransit.Serialization.SystemTextJsonMessageBody`1.GetBytes() in /_/src/MassTransit/Serialization/SystemTextJsonMessageBody.cs:line 50
   --- End of inner exception stack trace ---
   at MassTransit.Serialization.SystemTextJsonMessageBody`1.GetBytes() in /_/src/MassTransit/Serialization/SystemTextJsonMessageBody.cs:line 56
   at MassTransit.RabbitMqTransport.RabbitMqSendTransportContext.Send[T](ModelContext transportContext, SendContext`1 sendContext) in /_/src/Transports/MassTransit.RabbitMqTransport/RabbitMqTransport/RabbitMqSendTransportContext.cs:line 116
   at MassTransit.Transports.SendTransport`1.SendPipe`1.Send(TContext context) in /_/src/MassTransit/Transports/SendTransport.cs:line 93
   at MassTransit.Transports.SendTransport`1.SendPipe`1.Send(TContext context) in /_/src/MassTransit/Transports/SendTransport.cs:line 111
   at MassTransit.Agents.PipeContextSupervisor`1.Send(IPipe`1 pipe, CancellationToken cancellationToken) in /_/src/MassTransit/Agents/PipeContextSupervisor.cs:line 55
   at MassTransit.Agents.PipeContextSupervisor`1.Send(IPipe`1 pipe, CancellationToken cancellationToken) in /_/src/MassTransit/Agents/PipeContextSupervisor.cs:line 61
   at MassTransit.Agents.PipeContextSupervisor`1.Send(IPipe`1 pipe, CancellationToken cancellationToken) in /_/src/MassTransit/Agents/PipeContextSupervisor.cs:line 67
   at MassTransit.Transports.HostConfigurationRetryExtensions.Retry(IHostConfiguration hostConfiguration, Func`1 factory, CancellationToken cancellationToken, CancellationToken stoppingToken) in /_/src/MassTransit/Transports/HostConfigurationRetryExtensions.cs:line 39
   at capygram.Auth.Services.UserServices.UpdateAvatar(List`1 fileToUpload, Guid userId) in C:\coode\Hit_Product\capygram-be\src\Services\capygram.Auth\Services\UserServices.cs:line 235
   at capygram.Auth.Controllers.UsersController.UpdateAvatar(List`1 fileToUpload, Guid userId) in C:\coode\Hit_Product\capygram-be\src\Services\capygram.Auth\Controllers\UsersController.cs:line 72
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at capygram.Common.Middlewares.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in C:\coode\Hit_Product\capygram-be\src\Services\capygram.Common\Middlewares\ExceptionHandlingMiddleware.cs:line 19
2024-07-03 00:48:44.026 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7284/api/Users/upload-avatar - 500 null application/json 60970.5478ms
2024-07-03 00:53:01.368 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-07-03 00:53:01.915 +07:00 [DBG] Hosting starting
2024-07-03 00:53:01.955 +07:00 [INF] User profile is available. Using 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-07-03 00:53:02.378 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-86acdddc-5ebb-46d0-8da9-a5d2c38b8b42.xml'.
2024-07-03 00:53:02.388 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-97575500-6a39-4aec-a5f7-bc1ac2a50231.xml'.
2024-07-03 00:53:02.388 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-c1d10d47-675a-4953-a6d0-6a670993d84e.xml'.
2024-07-03 00:53:02.389 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-cd53a739-4711-4aeb-9f47-0d2c26453423.xml'.
2024-07-03 00:53:02.395 +07:00 [DBG] Found key {86acdddc-5ebb-46d0-8da9-a5d2c38b8b42}.
2024-07-03 00:53:02.402 +07:00 [DBG] Found key {97575500-6a39-4aec-a5f7-bc1ac2a50231}.
2024-07-03 00:53:02.402 +07:00 [DBG] Found key {c1d10d47-675a-4953-a6d0-6a670993d84e}.
2024-07-03 00:53:02.402 +07:00 [DBG] Found key {cd53a739-4711-4aeb-9f47-0d2c26453423}.
2024-07-03 00:53:02.410 +07:00 [DBG] Considering key {97575500-6a39-4aec-a5f7-bc1ac2a50231} with expiration date 2024-09-23 17:58:26Z as default key.
2024-07-03 00:53:02.417 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-07-03 00:53:02.424 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-07-03 00:53:02.427 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-07-03 00:53:02.431 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-07-03 00:53:02.432 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-07-03 00:53:02.434 +07:00 [DBG] Using key {97575500-6a39-4aec-a5f7-bc1ac2a50231} as the default key.
2024-07-03 00:53:02.435 +07:00 [DBG] Key ring with default key {97575500-6a39-4aec-a5f7-bc1ac2a50231} was loaded during application startup.
2024-07-03 00:53:02.436 +07:00 [DBG] Starting bus instances: IBus
2024-07-03 00:53:02.440 +07:00 [DBG] Starting bus: "rabbitmq://localhost/capygram"
2024-07-03 00:53:02.515 +07:00 [DBG] Connect: guest@localhost:5672/capygram
2024-07-03 00:53:02.781 +07:00 [DBG] Connected: guest@localhost:5672/capygram (address: amqp://localhost:5672, local: 55641)
2024-07-03 00:53:02.840 +07:00 [DBG] Endpoint Ready: "rabbitmq://localhost/capygram/DESKTOPO1721LD_capygramAuth_bus_xn5yyyysrsen79sybdqjix6tn7?temporary=true"
2024-07-03 00:53:02.845 +07:00 [INF] Bus started: "rabbitmq://localhost/capygram"
2024-07-03 00:53:02.908 +07:00 [INF] Now listening on: https://localhost:7284
2024-07-03 00:53:02.909 +07:00 [INF] Now listening on: http://localhost:5090
2024-07-03 00:53:02.909 +07:00 [DBG] Loaded hosting startup assembly capygram.Auth
2024-07-03 00:53:02.910 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-07-03 00:53:02.910 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-07-03 00:53:02.910 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-07-03 00:53:02.911 +07:00 [INF] Hosting environment: Development
2024-07-03 00:53:02.911 +07:00 [INF] Content root path: C:\coode\Hit_Product\capygram-be\src\Services\capygram.Auth
2024-07-03 00:53:02.911 +07:00 [DBG] Hosting started
2024-07-03 00:53:03.167 +07:00 [DBG] Connection id "0HN4QNV8V96G5" received FIN.
2024-07-03 00:53:03.167 +07:00 [DBG] Connection id "0HN4QNV8V96G4" received FIN.
2024-07-03 00:53:03.169 +07:00 [DBG] Connection id "0HN4QNV8V96G5" accepted.
2024-07-03 00:53:03.169 +07:00 [DBG] Connection id "0HN4QNV8V96G4" accepted.
2024-07-03 00:53:03.172 +07:00 [DBG] Connection id "0HN4QNV8V96G5" started.
2024-07-03 00:53:03.172 +07:00 [DBG] Connection id "0HN4QNV8V96G4" started.
2024-07-03 00:53:03.194 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-07-03 00:53:03.194 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-07-03 00:53:03.225 +07:00 [DBG] Connection id "0HN4QNV8V96G4" stopped.
2024-07-03 00:53:03.225 +07:00 [DBG] Connection id "0HN4QNV8V96G5" stopped.
2024-07-03 00:53:03.229 +07:00 [DBG] Connection id "0HN4QNV8V96G5" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-07-03 00:53:03.229 +07:00 [DBG] Connection id "0HN4QNV8V96G4" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-07-03 00:53:03.559 +07:00 [DBG] Connection id "0HN4QNV8V96G6" accepted.
2024-07-03 00:53:03.560 +07:00 [DBG] Connection id "0HN4QNV8V96G6" started.
2024-07-03 00:53:03.642 +07:00 [DBG] Connection 0HN4QNV8V96G6 established using the following protocol: "Tls13"
2024-07-03 00:53:03.730 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7284/swagger/index.html - null null
2024-07-03 00:53:03.867 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-07-03 00:53:03.902 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-07-03 00:53:03.903 +07:00 [DBG] Request did not match any endpoints
2024-07-03 00:53:04.003 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-07-03 00:53:04.005 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-07-03 00:53:04.040 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-07-03 00:53:04.041 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-07-03 00:53:04.044 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7284/swagger/index.html - 200 null text/html;charset=utf-8 321.6527ms
2024-07-03 00:53:04.210 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7284/_framework/aspnetcore-browser-refresh.js - null null
2024-07-03 00:53:04.221 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7284/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 12.7107ms
2024-07-03 00:53:04.298 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7284/_vs/browserLink - null null
2024-07-03 00:53:04.362 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7284/_vs/browserLink - 200 null text/javascript; charset=UTF-8 64.8013ms
2024-07-03 00:53:04.839 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7284/swagger/v1/swagger.json - null null
2024-07-03 00:53:04.841 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-07-03 00:53:04.841 +07:00 [DBG] Request did not match any endpoints
2024-07-03 00:53:05.050 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7284/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 211.5529ms
2024-07-03 00:53:38.923 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7284/api/Users/upload-avatar - multipart/form-data; boundary=----WebKitFormBoundaryaowNQpDopglUDeBU 522816
2024-07-03 00:53:38.935 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Users/upload-avatar'
2024-07-03 00:53:38.937 +07:00 [DBG] Endpoint 'capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth)' with route pattern 'api/Users/upload-avatar' is valid for the request path '/api/Users/upload-avatar'
2024-07-03 00:53:38.938 +07:00 [DBG] Request matched endpoint 'capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth)'
2024-07-03 00:53:38.940 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-03 00:53:38.942 +07:00 [INF] Start request......!
2024-07-03 00:53:39.001 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-07-03 00:53:39.004 +07:00 [INF] Executing endpoint 'capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth)'
2024-07-03 00:53:39.028 +07:00 [INF] Route matched with {action = "UpdateAvatar", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateAvatar(System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile], System.Guid) on controller capygram.Auth.Controllers.UsersController (capygram.Auth).
2024-07-03 00:53:39.030 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-03 00:53:39.030 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-03 00:53:39.030 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-03 00:53:39.031 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-03 00:53:39.031 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-03 00:53:39.033 +07:00 [DBG] Executing controller factory for controller capygram.Auth.Controllers.UsersController (capygram.Auth)
2024-07-03 00:53:39.041 +07:00 [DBG] Executed controller factory for controller capygram.Auth.Controllers.UsersController (capygram.Auth)
2024-07-03 00:53:39.047 +07:00 [DBG] Connection id "0HN4QNV8V96G6", Request id "0HN4QNV8V96G6:00000009": started reading request body.
2024-07-03 00:53:39.048 +07:00 [DBG] Connection id "0HN4QNV8V96G6", Request id "0HN4QNV8V96G6:00000009": done reading request body.
2024-07-03 00:53:39.077 +07:00 [DBG] Attempting to bind parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]' ...
2024-07-03 00:53:39.080 +07:00 [DBG] Attempting to bind parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]' using the name '' in request data ...
2024-07-03 00:53:39.082 +07:00 [DBG] Done attempting to bind parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]'.
2024-07-03 00:53:39.082 +07:00 [DBG] Done attempting to bind parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]'.
2024-07-03 00:53:39.082 +07:00 [DBG] Attempting to validate the bound parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]' ...
2024-07-03 00:53:39.089 +07:00 [DBG] Done attempting to validate the bound parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]'.
2024-07-03 00:53:39.090 +07:00 [DBG] Attempting to bind parameter 'userId' of type 'System.Guid' ...
2024-07-03 00:53:39.091 +07:00 [DBG] Attempting to bind parameter 'userId' of type 'System.Guid' using the name 'userId' in request data ...
2024-07-03 00:53:39.092 +07:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.Guid'.
2024-07-03 00:53:39.092 +07:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.Guid'.
2024-07-03 00:53:39.092 +07:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.Guid' ...
2024-07-03 00:53:39.092 +07:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.Guid'.
2024-07-03 00:53:59.458 +07:00 [DBG] Declare exchange: name: image-upload-notification, type: fanout, durable
2024-07-03 00:53:59.538 +07:00 [ERR] S-FAULT "rabbitmq://localhost/capygram/image-upload-notification" "78b60000-1625-902e-2320-08dc9abff37d" capygram.Common.MessageBus.Events.ImageUploadNotification
System.Runtime.Serialization.SerializationException: Failed to serialize message
 ---> System.InvalidOperationException: Timeouts are not supported on this stream.
   at System.IO.Stream.get_ReadTimeout()
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWriteAsObject(Utf8JsonWriter writer, Object value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.Serialize(Utf8JsonWriter writer, T& rootValue, Object rootValueBoxed)
   at System.Text.Json.JsonSerializer.Serialize[TValue](Utf8JsonWriter writer, TValue value, JsonSerializerOptions options)
   at MassTransit.Serialization.JsonConverters.TypeMappingJsonConverter`2.Write(Utf8JsonWriter writer, TType value, JsonSerializerOptions options) in /_/src/MassTransit/Serialization/JsonConverters/TypeMappingJsonConverter.cs:line 20
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.Serialize(Utf8JsonWriter writer, T& rootValue, Object rootValueBoxed)
   at System.Text.Json.JsonSerializer.WriteBytes[TValue](TValue& value, JsonTypeInfo`1 jsonTypeInfo)
   at System.Text.Json.JsonSerializer.SerializeToUtf8Bytes[TValue](TValue value, JsonSerializerOptions options)
   at MassTransit.Serialization.SystemTextJsonMessageBody`1.GetBytes() in /_/src/MassTransit/Serialization/SystemTextJsonMessageBody.cs:line 50
   --- End of inner exception stack trace ---
   at MassTransit.Serialization.SystemTextJsonMessageBody`1.GetBytes() in /_/src/MassTransit/Serialization/SystemTextJsonMessageBody.cs:line 56
   at MassTransit.RabbitMqTransport.RabbitMqSendTransportContext.Send[T](ModelContext transportContext, SendContext`1 sendContext) in /_/src/Transports/MassTransit.RabbitMqTransport/RabbitMqTransport/RabbitMqSendTransportContext.cs:line 116
   at MassTransit.Transports.SendTransport`1.SendPipe`1.Send(TContext context) in /_/src/MassTransit/Transports/SendTransport.cs:line 93
2024-07-03 00:53:59.645 +07:00 [INF] Executed action capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth) in 20611.8026ms
2024-07-03 00:53:59.646 +07:00 [INF] Executed endpoint 'capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth)'
2024-07-03 00:53:59.700 +07:00 [ERR] Failed to serialize message
System.Runtime.Serialization.SerializationException: Failed to serialize message
 ---> System.InvalidOperationException: Timeouts are not supported on this stream.
   at System.IO.Stream.get_ReadTimeout()
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWriteAsObject(Utf8JsonWriter writer, Object value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.Serialize(Utf8JsonWriter writer, T& rootValue, Object rootValueBoxed)
   at System.Text.Json.JsonSerializer.Serialize[TValue](Utf8JsonWriter writer, TValue value, JsonSerializerOptions options)
   at MassTransit.Serialization.JsonConverters.TypeMappingJsonConverter`2.Write(Utf8JsonWriter writer, TType value, JsonSerializerOptions options) in /_/src/MassTransit/Serialization/JsonConverters/TypeMappingJsonConverter.cs:line 20
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.Serialize(Utf8JsonWriter writer, T& rootValue, Object rootValueBoxed)
   at System.Text.Json.JsonSerializer.WriteBytes[TValue](TValue& value, JsonTypeInfo`1 jsonTypeInfo)
   at System.Text.Json.JsonSerializer.SerializeToUtf8Bytes[TValue](TValue value, JsonSerializerOptions options)
   at MassTransit.Serialization.SystemTextJsonMessageBody`1.GetBytes() in /_/src/MassTransit/Serialization/SystemTextJsonMessageBody.cs:line 50
   --- End of inner exception stack trace ---
   at MassTransit.Serialization.SystemTextJsonMessageBody`1.GetBytes() in /_/src/MassTransit/Serialization/SystemTextJsonMessageBody.cs:line 56
   at MassTransit.RabbitMqTransport.RabbitMqSendTransportContext.Send[T](ModelContext transportContext, SendContext`1 sendContext) in /_/src/Transports/MassTransit.RabbitMqTransport/RabbitMqTransport/RabbitMqSendTransportContext.cs:line 116
   at MassTransit.Transports.SendTransport`1.SendPipe`1.Send(TContext context) in /_/src/MassTransit/Transports/SendTransport.cs:line 93
   at MassTransit.Transports.SendTransport`1.SendPipe`1.Send(TContext context) in /_/src/MassTransit/Transports/SendTransport.cs:line 111
   at MassTransit.Agents.PipeContextSupervisor`1.Send(IPipe`1 pipe, CancellationToken cancellationToken) in /_/src/MassTransit/Agents/PipeContextSupervisor.cs:line 55
   at MassTransit.Agents.PipeContextSupervisor`1.Send(IPipe`1 pipe, CancellationToken cancellationToken) in /_/src/MassTransit/Agents/PipeContextSupervisor.cs:line 61
   at MassTransit.Agents.PipeContextSupervisor`1.Send(IPipe`1 pipe, CancellationToken cancellationToken) in /_/src/MassTransit/Agents/PipeContextSupervisor.cs:line 67
   at MassTransit.Transports.HostConfigurationRetryExtensions.Retry(IHostConfiguration hostConfiguration, Func`1 factory, CancellationToken cancellationToken, CancellationToken stoppingToken) in /_/src/MassTransit/Transports/HostConfigurationRetryExtensions.cs:line 39
   at capygram.Auth.Services.UserServices.UpdateAvatar(List`1 fileToUpload, Guid userId) in C:\coode\Hit_Product\capygram-be\src\Services\capygram.Auth\Services\UserServices.cs:line 235
   at capygram.Auth.Controllers.UsersController.UpdateAvatar(List`1 fileToUpload, Guid userId) in C:\coode\Hit_Product\capygram-be\src\Services\capygram.Auth\Controllers\UsersController.cs:line 72
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at capygram.Common.Middlewares.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in C:\coode\Hit_Product\capygram-be\src\Services\capygram.Common\Middlewares\ExceptionHandlingMiddleware.cs:line 19
2024-07-03 00:53:59.721 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7284/api/Users/upload-avatar - 500 null application/json 20798.5687ms
2024-07-03 00:54:53.859 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7284/api/Users/upload-avatar - multipart/form-data; boundary=----WebKitFormBoundarySEHBn6fhN1GdXRhL 522816
2024-07-03 00:54:53.865 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Users/upload-avatar'
2024-07-03 00:54:53.865 +07:00 [DBG] Endpoint 'capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth)' with route pattern 'api/Users/upload-avatar' is valid for the request path '/api/Users/upload-avatar'
2024-07-03 00:54:53.865 +07:00 [DBG] Request matched endpoint 'capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth)'
2024-07-03 00:54:53.865 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-03 00:54:53.866 +07:00 [INF] Start request......!
2024-07-03 00:54:53.867 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-07-03 00:54:53.867 +07:00 [INF] Executing endpoint 'capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth)'
2024-07-03 00:54:53.867 +07:00 [INF] Route matched with {action = "UpdateAvatar", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateAvatar(System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile], System.Guid) on controller capygram.Auth.Controllers.UsersController (capygram.Auth).
2024-07-03 00:54:53.868 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-03 00:54:53.869 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-03 00:54:53.869 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-03 00:54:53.871 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-03 00:54:53.871 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-03 00:54:53.872 +07:00 [DBG] Executing controller factory for controller capygram.Auth.Controllers.UsersController (capygram.Auth)
2024-07-03 00:54:53.880 +07:00 [DBG] Executed controller factory for controller capygram.Auth.Controllers.UsersController (capygram.Auth)
2024-07-03 00:54:53.880 +07:00 [DBG] Connection id "0HN4QNV8V96G6", Request id "0HN4QNV8V96G6:0000000B": started reading request body.
2024-07-03 00:54:53.881 +07:00 [DBG] Connection id "0HN4QNV8V96G6", Request id "0HN4QNV8V96G6:0000000B": done reading request body.
2024-07-03 00:54:53.893 +07:00 [DBG] Attempting to bind parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]' ...
2024-07-03 00:54:53.894 +07:00 [DBG] Attempting to bind parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]' using the name '' in request data ...
2024-07-03 00:54:53.894 +07:00 [DBG] Done attempting to bind parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]'.
2024-07-03 00:54:53.894 +07:00 [DBG] Done attempting to bind parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]'.
2024-07-03 00:54:53.894 +07:00 [DBG] Attempting to validate the bound parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]' ...
2024-07-03 00:54:53.895 +07:00 [DBG] Done attempting to validate the bound parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]'.
2024-07-03 00:54:53.895 +07:00 [DBG] Attempting to bind parameter 'userId' of type 'System.Guid' ...
2024-07-03 00:54:53.895 +07:00 [DBG] Attempting to bind parameter 'userId' of type 'System.Guid' using the name 'userId' in request data ...
2024-07-03 00:54:53.895 +07:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.Guid'.
2024-07-03 00:54:53.895 +07:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.Guid'.
2024-07-03 00:54:53.895 +07:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.Guid' ...
2024-07-03 00:54:53.895 +07:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.Guid'.
2024-07-03 00:55:07.471 +07:00 [DBG] Declare exchange: name: image-upload-notification, type: fanout, durable
2024-07-03 00:55:07.485 +07:00 [ERR] S-FAULT "rabbitmq://localhost/capygram/image-upload-notification" "78b60000-1625-902e-efa2-08dc9ac01c0b" capygram.Common.MessageBus.Events.ImageUploadNotification
System.Runtime.Serialization.SerializationException: Failed to serialize message
 ---> System.InvalidOperationException: Timeouts are not supported on this stream.
   at System.IO.Stream.get_ReadTimeout()
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWriteAsObject(Utf8JsonWriter writer, Object value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.Serialize(Utf8JsonWriter writer, T& rootValue, Object rootValueBoxed)
   at System.Text.Json.JsonSerializer.Serialize[TValue](Utf8JsonWriter writer, TValue value, JsonSerializerOptions options)
   at MassTransit.Serialization.JsonConverters.TypeMappingJsonConverter`2.Write(Utf8JsonWriter writer, TType value, JsonSerializerOptions options) in /_/src/MassTransit/Serialization/JsonConverters/TypeMappingJsonConverter.cs:line 20
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.Serialize(Utf8JsonWriter writer, T& rootValue, Object rootValueBoxed)
   at System.Text.Json.JsonSerializer.WriteBytes[TValue](TValue& value, JsonTypeInfo`1 jsonTypeInfo)
   at System.Text.Json.JsonSerializer.SerializeToUtf8Bytes[TValue](TValue value, JsonSerializerOptions options)
   at MassTransit.Serialization.SystemTextJsonMessageBody`1.GetBytes() in /_/src/MassTransit/Serialization/SystemTextJsonMessageBody.cs:line 50
   --- End of inner exception stack trace ---
   at MassTransit.Serialization.SystemTextJsonMessageBody`1.GetBytes() in /_/src/MassTransit/Serialization/SystemTextJsonMessageBody.cs:line 56
   at MassTransit.RabbitMqTransport.RabbitMqSendTransportContext.Send[T](ModelContext transportContext, SendContext`1 sendContext) in /_/src/Transports/MassTransit.RabbitMqTransport/RabbitMqTransport/RabbitMqSendTransportContext.cs:line 116
   at MassTransit.Transports.SendTransport`1.SendPipe`1.Send(TContext context) in /_/src/MassTransit/Transports/SendTransport.cs:line 93
2024-07-03 00:55:07.606 +07:00 [INF] Executed action capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth) in 13734.899ms
2024-07-03 00:55:07.607 +07:00 [INF] Executed endpoint 'capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth)'
2024-07-03 00:55:40.077 +07:00 [ERR] Failed to serialize message
System.Runtime.Serialization.SerializationException: Failed to serialize message
 ---> System.InvalidOperationException: Timeouts are not supported on this stream.
   at System.IO.Stream.get_ReadTimeout()
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWriteAsObject(Utf8JsonWriter writer, Object value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.Serialize(Utf8JsonWriter writer, T& rootValue, Object rootValueBoxed)
   at System.Text.Json.JsonSerializer.Serialize[TValue](Utf8JsonWriter writer, TValue value, JsonSerializerOptions options)
   at MassTransit.Serialization.JsonConverters.TypeMappingJsonConverter`2.Write(Utf8JsonWriter writer, TType value, JsonSerializerOptions options) in /_/src/MassTransit/Serialization/JsonConverters/TypeMappingJsonConverter.cs:line 20
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.Serialize(Utf8JsonWriter writer, T& rootValue, Object rootValueBoxed)
   at System.Text.Json.JsonSerializer.WriteBytes[TValue](TValue& value, JsonTypeInfo`1 jsonTypeInfo)
   at System.Text.Json.JsonSerializer.SerializeToUtf8Bytes[TValue](TValue value, JsonSerializerOptions options)
   at MassTransit.Serialization.SystemTextJsonMessageBody`1.GetBytes() in /_/src/MassTransit/Serialization/SystemTextJsonMessageBody.cs:line 50
   --- End of inner exception stack trace ---
   at MassTransit.Serialization.SystemTextJsonMessageBody`1.GetBytes() in /_/src/MassTransit/Serialization/SystemTextJsonMessageBody.cs:line 56
   at MassTransit.RabbitMqTransport.RabbitMqSendTransportContext.Send[T](ModelContext transportContext, SendContext`1 sendContext) in /_/src/Transports/MassTransit.RabbitMqTransport/RabbitMqTransport/RabbitMqSendTransportContext.cs:line 116
   at MassTransit.Transports.SendTransport`1.SendPipe`1.Send(TContext context) in /_/src/MassTransit/Transports/SendTransport.cs:line 93
   at MassTransit.Transports.SendTransport`1.SendPipe`1.Send(TContext context) in /_/src/MassTransit/Transports/SendTransport.cs:line 111
   at MassTransit.Agents.PipeContextSupervisor`1.Send(IPipe`1 pipe, CancellationToken cancellationToken) in /_/src/MassTransit/Agents/PipeContextSupervisor.cs:line 55
   at MassTransit.Agents.PipeContextSupervisor`1.Send(IPipe`1 pipe, CancellationToken cancellationToken) in /_/src/MassTransit/Agents/PipeContextSupervisor.cs:line 61
   at MassTransit.Agents.PipeContextSupervisor`1.Send(IPipe`1 pipe, CancellationToken cancellationToken) in /_/src/MassTransit/Agents/PipeContextSupervisor.cs:line 67
   at MassTransit.Transports.HostConfigurationRetryExtensions.Retry(IHostConfiguration hostConfiguration, Func`1 factory, CancellationToken cancellationToken, CancellationToken stoppingToken) in /_/src/MassTransit/Transports/HostConfigurationRetryExtensions.cs:line 39
   at capygram.Auth.Services.UserServices.UpdateAvatar(List`1 fileToUpload, Guid userId) in C:\coode\Hit_Product\capygram-be\src\Services\capygram.Auth\Services\UserServices.cs:line 235
   at capygram.Auth.Controllers.UsersController.UpdateAvatar(List`1 fileToUpload, Guid userId) in C:\coode\Hit_Product\capygram-be\src\Services\capygram.Auth\Controllers\UsersController.cs:line 72
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at capygram.Common.Middlewares.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in C:\coode\Hit_Product\capygram-be\src\Services\capygram.Common\Middlewares\ExceptionHandlingMiddleware.cs:line 19
2024-07-03 00:55:40.120 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7284/api/Users/upload-avatar - 500 null application/json 46261.2905ms
2024-07-03 00:56:40.100 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-07-03 00:56:40.575 +07:00 [DBG] Hosting starting
2024-07-03 00:56:40.614 +07:00 [INF] User profile is available. Using 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-07-03 00:56:40.899 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-86acdddc-5ebb-46d0-8da9-a5d2c38b8b42.xml'.
2024-07-03 00:56:40.906 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-97575500-6a39-4aec-a5f7-bc1ac2a50231.xml'.
2024-07-03 00:56:40.906 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-c1d10d47-675a-4953-a6d0-6a670993d84e.xml'.
2024-07-03 00:56:40.907 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-cd53a739-4711-4aeb-9f47-0d2c26453423.xml'.
2024-07-03 00:56:40.911 +07:00 [DBG] Found key {86acdddc-5ebb-46d0-8da9-a5d2c38b8b42}.
2024-07-03 00:56:40.915 +07:00 [DBG] Found key {97575500-6a39-4aec-a5f7-bc1ac2a50231}.
2024-07-03 00:56:40.915 +07:00 [DBG] Found key {c1d10d47-675a-4953-a6d0-6a670993d84e}.
2024-07-03 00:56:40.915 +07:00 [DBG] Found key {cd53a739-4711-4aeb-9f47-0d2c26453423}.
2024-07-03 00:56:40.920 +07:00 [DBG] Considering key {97575500-6a39-4aec-a5f7-bc1ac2a50231} with expiration date 2024-09-23 17:58:26Z as default key.
2024-07-03 00:56:40.923 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-07-03 00:56:40.925 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-07-03 00:56:40.926 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-07-03 00:56:40.929 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-07-03 00:56:40.930 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-07-03 00:56:40.932 +07:00 [DBG] Using key {97575500-6a39-4aec-a5f7-bc1ac2a50231} as the default key.
2024-07-03 00:56:40.933 +07:00 [DBG] Key ring with default key {97575500-6a39-4aec-a5f7-bc1ac2a50231} was loaded during application startup.
2024-07-03 00:56:40.935 +07:00 [DBG] Starting bus instances: IBus
2024-07-03 00:56:40.940 +07:00 [DBG] Starting bus: "rabbitmq://localhost/capygram"
2024-07-03 00:56:40.986 +07:00 [DBG] Connect: guest@localhost:5672/capygram
2024-07-03 00:56:41.192 +07:00 [DBG] Connected: guest@localhost:5672/capygram (address: amqp://localhost:5672, local: 55835)
2024-07-03 00:56:41.243 +07:00 [INF] Now listening on: https://localhost:7284
2024-07-03 00:56:41.244 +07:00 [INF] Now listening on: http://localhost:5090
2024-07-03 00:56:41.244 +07:00 [DBG] Loaded hosting startup assembly capygram.Auth
2024-07-03 00:56:41.244 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-07-03 00:56:41.245 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-07-03 00:56:41.246 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-07-03 00:56:41.246 +07:00 [INF] Hosting environment: Development
2024-07-03 00:56:41.247 +07:00 [INF] Content root path: C:\coode\Hit_Product\capygram-be\src\Services\capygram.Auth
2024-07-03 00:56:41.247 +07:00 [DBG] Hosting started
2024-07-03 00:56:41.270 +07:00 [DBG] Endpoint Ready: "rabbitmq://localhost/capygram/DESKTOPO1721LD_capygramAuth_bus_3tnoyyysrsen79whbdqjionufq?temporary=true"
2024-07-03 00:56:41.277 +07:00 [INF] Bus started: "rabbitmq://localhost/capygram"
2024-07-03 00:56:41.551 +07:00 [DBG] Connection id "0HN4QO1A1UNQ1" received FIN.
2024-07-03 00:56:41.551 +07:00 [DBG] Connection id "0HN4QO1A1UNQ2" received FIN.
2024-07-03 00:56:41.557 +07:00 [DBG] Connection id "0HN4QO1A1UNQ1" accepted.
2024-07-03 00:56:41.557 +07:00 [DBG] Connection id "0HN4QO1A1UNQ2" accepted.
2024-07-03 00:56:41.558 +07:00 [DBG] Connection id "0HN4QO1A1UNQ2" started.
2024-07-03 00:56:41.558 +07:00 [DBG] Connection id "0HN4QO1A1UNQ1" started.
2024-07-03 00:56:41.573 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-07-03 00:56:41.573 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-07-03 00:56:41.594 +07:00 [DBG] Connection id "0HN4QO1A1UNQ2" stopped.
2024-07-03 00:56:41.594 +07:00 [DBG] Connection id "0HN4QO1A1UNQ1" stopped.
2024-07-03 00:56:41.597 +07:00 [DBG] Connection id "0HN4QO1A1UNQ1" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-07-03 00:56:41.597 +07:00 [DBG] Connection id "0HN4QO1A1UNQ2" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-07-03 00:56:42.000 +07:00 [DBG] Connection id "0HN4QO1A1UNQ3" accepted.
2024-07-03 00:56:42.003 +07:00 [DBG] Connection id "0HN4QO1A1UNQ3" started.
2024-07-03 00:56:42.072 +07:00 [DBG] Connection 0HN4QO1A1UNQ3 established using the following protocol: "Tls13"
2024-07-03 00:56:42.155 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7284/swagger/index.html - null null
2024-07-03 00:56:42.274 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-07-03 00:56:42.299 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-07-03 00:56:42.302 +07:00 [DBG] Request did not match any endpoints
2024-07-03 00:56:42.401 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-07-03 00:56:42.403 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-07-03 00:56:42.443 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-07-03 00:56:42.445 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-07-03 00:56:42.448 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7284/swagger/index.html - 200 null text/html;charset=utf-8 299.8897ms
2024-07-03 00:56:42.583 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7284/_framework/aspnetcore-browser-refresh.js - null null
2024-07-03 00:56:42.586 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7284/_vs/browserLink - null null
2024-07-03 00:56:42.591 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7284/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 8.9988ms
2024-07-03 00:56:42.660 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7284/_vs/browserLink - 200 null text/javascript; charset=UTF-8 74.4225ms
2024-07-03 00:56:42.983 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7284/swagger/v1/swagger.json - null null
2024-07-03 00:56:42.986 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-07-03 00:56:42.987 +07:00 [DBG] Request did not match any endpoints
2024-07-03 00:56:43.250 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7284/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 267.3037ms
2024-07-03 00:57:09.594 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7284/api/Users/upload-avatar - multipart/form-data; boundary=----WebKitFormBoundarytoFWI9HyNEHZGkbf 522816
2024-07-03 00:57:09.604 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Users/upload-avatar'
2024-07-03 00:57:09.606 +07:00 [DBG] Endpoint 'capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth)' with route pattern 'api/Users/upload-avatar' is valid for the request path '/api/Users/upload-avatar'
2024-07-03 00:57:09.607 +07:00 [DBG] Request matched endpoint 'capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth)'
2024-07-03 00:57:09.609 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-03 00:57:09.610 +07:00 [INF] Start request......!
2024-07-03 00:57:09.674 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-07-03 00:57:09.676 +07:00 [INF] Executing endpoint 'capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth)'
2024-07-03 00:57:09.697 +07:00 [INF] Route matched with {action = "UpdateAvatar", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateAvatar(System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile], System.Guid) on controller capygram.Auth.Controllers.UsersController (capygram.Auth).
2024-07-03 00:57:09.698 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-03 00:57:09.699 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-03 00:57:09.699 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-03 00:57:09.699 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-03 00:57:09.700 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-03 00:57:09.701 +07:00 [DBG] Executing controller factory for controller capygram.Auth.Controllers.UsersController (capygram.Auth)
2024-07-03 00:57:09.708 +07:00 [DBG] Executed controller factory for controller capygram.Auth.Controllers.UsersController (capygram.Auth)
2024-07-03 00:57:09.714 +07:00 [DBG] Connection id "0HN4QO1A1UNQ3", Request id "0HN4QO1A1UNQ3:00000009": started reading request body.
2024-07-03 00:57:09.714 +07:00 [DBG] Connection id "0HN4QO1A1UNQ3", Request id "0HN4QO1A1UNQ3:00000009": done reading request body.
2024-07-03 00:57:09.744 +07:00 [DBG] Attempting to bind parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]' ...
2024-07-03 00:57:09.748 +07:00 [DBG] Attempting to bind parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]' using the name '' in request data ...
2024-07-03 00:57:09.749 +07:00 [DBG] Done attempting to bind parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]'.
2024-07-03 00:57:09.749 +07:00 [DBG] Done attempting to bind parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]'.
2024-07-03 00:57:09.749 +07:00 [DBG] Attempting to validate the bound parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]' ...
2024-07-03 00:57:09.756 +07:00 [DBG] Done attempting to validate the bound parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]'.
2024-07-03 00:57:09.757 +07:00 [DBG] Attempting to bind parameter 'userId' of type 'System.Guid' ...
2024-07-03 00:57:09.758 +07:00 [DBG] Attempting to bind parameter 'userId' of type 'System.Guid' using the name 'userId' in request data ...
2024-07-03 00:57:09.758 +07:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.Guid'.
2024-07-03 00:57:09.758 +07:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.Guid'.
2024-07-03 00:57:09.758 +07:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.Guid' ...
2024-07-03 00:57:09.759 +07:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.Guid'.
2024-07-03 00:57:16.014 +07:00 [DBG] Declare exchange: name: image-upload-notification, type: fanout, durable
2024-07-03 00:57:16.096 +07:00 [ERR] S-FAULT "rabbitmq://localhost/capygram/image-upload-notification" "cc450000-1625-902e-1cbb-08dc9ac068a5" capygram.Common.MessageBus.Events.ImageUploadNotification
System.Runtime.Serialization.SerializationException: Failed to serialize message
 ---> System.InvalidOperationException: Timeouts are not supported on this stream.
   at System.IO.Stream.get_ReadTimeout()
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWriteAsObject(Utf8JsonWriter writer, Object value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.Serialize(Utf8JsonWriter writer, T& rootValue, Object rootValueBoxed)
   at System.Text.Json.JsonSerializer.Serialize[TValue](Utf8JsonWriter writer, TValue value, JsonSerializerOptions options)
   at MassTransit.Serialization.JsonConverters.TypeMappingJsonConverter`2.Write(Utf8JsonWriter writer, TType value, JsonSerializerOptions options) in /_/src/MassTransit/Serialization/JsonConverters/TypeMappingJsonConverter.cs:line 20
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.Serialize(Utf8JsonWriter writer, T& rootValue, Object rootValueBoxed)
   at System.Text.Json.JsonSerializer.WriteBytes[TValue](TValue& value, JsonTypeInfo`1 jsonTypeInfo)
   at System.Text.Json.JsonSerializer.SerializeToUtf8Bytes[TValue](TValue value, JsonSerializerOptions options)
   at MassTransit.Serialization.SystemTextJsonMessageBody`1.GetBytes() in /_/src/MassTransit/Serialization/SystemTextJsonMessageBody.cs:line 50
   --- End of inner exception stack trace ---
   at MassTransit.Serialization.SystemTextJsonMessageBody`1.GetBytes() in /_/src/MassTransit/Serialization/SystemTextJsonMessageBody.cs:line 56
   at MassTransit.RabbitMqTransport.RabbitMqSendTransportContext.Send[T](ModelContext transportContext, SendContext`1 sendContext) in /_/src/Transports/MassTransit.RabbitMqTransport/RabbitMqTransport/RabbitMqSendTransportContext.cs:line 116
   at MassTransit.Transports.SendTransport`1.SendPipe`1.Send(TContext context) in /_/src/MassTransit/Transports/SendTransport.cs:line 93
2024-07-03 00:57:16.205 +07:00 [INF] Executed action capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth) in 6502.7148ms
2024-07-03 00:57:16.206 +07:00 [INF] Executed endpoint 'capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth)'
2024-07-03 00:57:16.240 +07:00 [ERR] Failed to serialize message
System.Runtime.Serialization.SerializationException: Failed to serialize message
 ---> System.InvalidOperationException: Timeouts are not supported on this stream.
   at System.IO.Stream.get_ReadTimeout()
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWriteAsObject(Utf8JsonWriter writer, Object value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.Serialize(Utf8JsonWriter writer, T& rootValue, Object rootValueBoxed)
   at System.Text.Json.JsonSerializer.Serialize[TValue](Utf8JsonWriter writer, TValue value, JsonSerializerOptions options)
   at MassTransit.Serialization.JsonConverters.TypeMappingJsonConverter`2.Write(Utf8JsonWriter writer, TType value, JsonSerializerOptions options) in /_/src/MassTransit/Serialization/JsonConverters/TypeMappingJsonConverter.cs:line 20
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.Serialize(Utf8JsonWriter writer, T& rootValue, Object rootValueBoxed)
   at System.Text.Json.JsonSerializer.WriteBytes[TValue](TValue& value, JsonTypeInfo`1 jsonTypeInfo)
   at System.Text.Json.JsonSerializer.SerializeToUtf8Bytes[TValue](TValue value, JsonSerializerOptions options)
   at MassTransit.Serialization.SystemTextJsonMessageBody`1.GetBytes() in /_/src/MassTransit/Serialization/SystemTextJsonMessageBody.cs:line 50
   --- End of inner exception stack trace ---
   at MassTransit.Serialization.SystemTextJsonMessageBody`1.GetBytes() in /_/src/MassTransit/Serialization/SystemTextJsonMessageBody.cs:line 56
   at MassTransit.RabbitMqTransport.RabbitMqSendTransportContext.Send[T](ModelContext transportContext, SendContext`1 sendContext) in /_/src/Transports/MassTransit.RabbitMqTransport/RabbitMqTransport/RabbitMqSendTransportContext.cs:line 116
   at MassTransit.Transports.SendTransport`1.SendPipe`1.Send(TContext context) in /_/src/MassTransit/Transports/SendTransport.cs:line 93
   at MassTransit.Transports.SendTransport`1.SendPipe`1.Send(TContext context) in /_/src/MassTransit/Transports/SendTransport.cs:line 111
   at MassTransit.Agents.PipeContextSupervisor`1.Send(IPipe`1 pipe, CancellationToken cancellationToken) in /_/src/MassTransit/Agents/PipeContextSupervisor.cs:line 55
   at MassTransit.Agents.PipeContextSupervisor`1.Send(IPipe`1 pipe, CancellationToken cancellationToken) in /_/src/MassTransit/Agents/PipeContextSupervisor.cs:line 61
   at MassTransit.Agents.PipeContextSupervisor`1.Send(IPipe`1 pipe, CancellationToken cancellationToken) in /_/src/MassTransit/Agents/PipeContextSupervisor.cs:line 67
   at MassTransit.Transports.HostConfigurationRetryExtensions.Retry(IHostConfiguration hostConfiguration, Func`1 factory, CancellationToken cancellationToken, CancellationToken stoppingToken) in /_/src/MassTransit/Transports/HostConfigurationRetryExtensions.cs:line 39
   at capygram.Auth.Services.UserServices.UpdateAvatar(List`1 fileToUpload, Guid userId) in C:\coode\Hit_Product\capygram-be\src\Services\capygram.Auth\Services\UserServices.cs:line 233
   at capygram.Auth.Controllers.UsersController.UpdateAvatar(List`1 fileToUpload, Guid userId) in C:\coode\Hit_Product\capygram-be\src\Services\capygram.Auth\Controllers\UsersController.cs:line 72
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at capygram.Common.Middlewares.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in C:\coode\Hit_Product\capygram-be\src\Services\capygram.Common\Middlewares\ExceptionHandlingMiddleware.cs:line 19
2024-07-03 00:57:16.258 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7284/api/Users/upload-avatar - 500 null application/json 6668.8754ms
2024-07-03 00:57:22.727 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7284/api/Users/upload-avatar - multipart/form-data; boundary=----WebKitFormBoundaryQQN7o3kXiRUMmk3Y 522816
2024-07-03 00:57:22.736 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Users/upload-avatar'
2024-07-03 00:57:22.736 +07:00 [DBG] Endpoint 'capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth)' with route pattern 'api/Users/upload-avatar' is valid for the request path '/api/Users/upload-avatar'
2024-07-03 00:57:22.738 +07:00 [DBG] Request matched endpoint 'capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth)'
2024-07-03 00:57:22.739 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-03 00:57:22.759 +07:00 [INF] Start request......!
2024-07-03 00:57:22.760 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-07-03 00:57:22.760 +07:00 [INF] Executing endpoint 'capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth)'
2024-07-03 00:57:22.761 +07:00 [INF] Route matched with {action = "UpdateAvatar", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateAvatar(System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile], System.Guid) on controller capygram.Auth.Controllers.UsersController (capygram.Auth).
2024-07-03 00:57:22.761 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-03 00:57:22.761 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-03 00:57:22.761 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-03 00:57:22.762 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-03 00:57:22.762 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-03 00:57:22.762 +07:00 [DBG] Executing controller factory for controller capygram.Auth.Controllers.UsersController (capygram.Auth)
2024-07-03 00:57:22.765 +07:00 [DBG] Executed controller factory for controller capygram.Auth.Controllers.UsersController (capygram.Auth)
2024-07-03 00:57:22.766 +07:00 [DBG] Connection id "0HN4QO1A1UNQ3", Request id "0HN4QO1A1UNQ3:0000000B": started reading request body.
2024-07-03 00:57:22.766 +07:00 [DBG] Connection id "0HN4QO1A1UNQ3", Request id "0HN4QO1A1UNQ3:0000000B": done reading request body.
2024-07-03 00:57:22.779 +07:00 [DBG] Attempting to bind parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]' ...
2024-07-03 00:57:22.779 +07:00 [DBG] Attempting to bind parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]' using the name '' in request data ...
2024-07-03 00:57:22.780 +07:00 [DBG] Done attempting to bind parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]'.
2024-07-03 00:57:22.780 +07:00 [DBG] Done attempting to bind parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]'.
2024-07-03 00:57:22.780 +07:00 [DBG] Attempting to validate the bound parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]' ...
2024-07-03 00:57:22.780 +07:00 [DBG] Done attempting to validate the bound parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]'.
2024-07-03 00:57:22.780 +07:00 [DBG] Attempting to bind parameter 'userId' of type 'System.Guid' ...
2024-07-03 00:57:22.781 +07:00 [DBG] Attempting to bind parameter 'userId' of type 'System.Guid' using the name 'userId' in request data ...
2024-07-03 00:57:22.781 +07:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.Guid'.
2024-07-03 00:57:22.781 +07:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.Guid'.
2024-07-03 00:57:22.781 +07:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.Guid' ...
2024-07-03 00:57:22.781 +07:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.Guid'.
2024-07-03 00:57:27.222 +07:00 [DBG] Declare exchange: name: image-upload-notification, type: fanout, durable
2024-07-03 00:57:27.236 +07:00 [ERR] S-FAULT "rabbitmq://localhost/capygram/image-upload-notification" "cc450000-1625-902e-41b9-08dc9ac06f58" capygram.Common.MessageBus.Events.ImageUploadNotification
System.Runtime.Serialization.SerializationException: Failed to serialize message
 ---> System.InvalidOperationException: Timeouts are not supported on this stream.
   at System.IO.Stream.get_ReadTimeout()
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWriteAsObject(Utf8JsonWriter writer, Object value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.Serialize(Utf8JsonWriter writer, T& rootValue, Object rootValueBoxed)
   at System.Text.Json.JsonSerializer.Serialize[TValue](Utf8JsonWriter writer, TValue value, JsonSerializerOptions options)
   at MassTransit.Serialization.JsonConverters.TypeMappingJsonConverter`2.Write(Utf8JsonWriter writer, TType value, JsonSerializerOptions options) in /_/src/MassTransit/Serialization/JsonConverters/TypeMappingJsonConverter.cs:line 20
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.Serialize(Utf8JsonWriter writer, T& rootValue, Object rootValueBoxed)
   at System.Text.Json.JsonSerializer.WriteBytes[TValue](TValue& value, JsonTypeInfo`1 jsonTypeInfo)
   at System.Text.Json.JsonSerializer.SerializeToUtf8Bytes[TValue](TValue value, JsonSerializerOptions options)
   at MassTransit.Serialization.SystemTextJsonMessageBody`1.GetBytes() in /_/src/MassTransit/Serialization/SystemTextJsonMessageBody.cs:line 50
   --- End of inner exception stack trace ---
   at MassTransit.Serialization.SystemTextJsonMessageBody`1.GetBytes() in /_/src/MassTransit/Serialization/SystemTextJsonMessageBody.cs:line 56
   at MassTransit.RabbitMqTransport.RabbitMqSendTransportContext.Send[T](ModelContext transportContext, SendContext`1 sendContext) in /_/src/Transports/MassTransit.RabbitMqTransport/RabbitMqTransport/RabbitMqSendTransportContext.cs:line 116
   at MassTransit.Transports.SendTransport`1.SendPipe`1.Send(TContext context) in /_/src/MassTransit/Transports/SendTransport.cs:line 93
2024-07-03 00:57:27.360 +07:00 [INF] Executed action capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth) in 4598.053ms
2024-07-03 00:57:27.361 +07:00 [INF] Executed endpoint 'capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth)'
2024-07-03 00:57:32.108 +07:00 [ERR] Failed to serialize message
System.Runtime.Serialization.SerializationException: Failed to serialize message
 ---> System.InvalidOperationException: Timeouts are not supported on this stream.
   at System.IO.Stream.get_ReadTimeout()
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWriteAsObject(Utf8JsonWriter writer, Object value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.Serialize(Utf8JsonWriter writer, T& rootValue, Object rootValueBoxed)
   at System.Text.Json.JsonSerializer.Serialize[TValue](Utf8JsonWriter writer, TValue value, JsonSerializerOptions options)
   at MassTransit.Serialization.JsonConverters.TypeMappingJsonConverter`2.Write(Utf8JsonWriter writer, TType value, JsonSerializerOptions options) in /_/src/MassTransit/Serialization/JsonConverters/TypeMappingJsonConverter.cs:line 20
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.Serialize(Utf8JsonWriter writer, T& rootValue, Object rootValueBoxed)
   at System.Text.Json.JsonSerializer.WriteBytes[TValue](TValue& value, JsonTypeInfo`1 jsonTypeInfo)
   at System.Text.Json.JsonSerializer.SerializeToUtf8Bytes[TValue](TValue value, JsonSerializerOptions options)
   at MassTransit.Serialization.SystemTextJsonMessageBody`1.GetBytes() in /_/src/MassTransit/Serialization/SystemTextJsonMessageBody.cs:line 50
   --- End of inner exception stack trace ---
   at MassTransit.Serialization.SystemTextJsonMessageBody`1.GetBytes() in /_/src/MassTransit/Serialization/SystemTextJsonMessageBody.cs:line 56
   at MassTransit.RabbitMqTransport.RabbitMqSendTransportContext.Send[T](ModelContext transportContext, SendContext`1 sendContext) in /_/src/Transports/MassTransit.RabbitMqTransport/RabbitMqTransport/RabbitMqSendTransportContext.cs:line 116
   at MassTransit.Transports.SendTransport`1.SendPipe`1.Send(TContext context) in /_/src/MassTransit/Transports/SendTransport.cs:line 93
   at MassTransit.Transports.SendTransport`1.SendPipe`1.Send(TContext context) in /_/src/MassTransit/Transports/SendTransport.cs:line 111
   at MassTransit.Agents.PipeContextSupervisor`1.Send(IPipe`1 pipe, CancellationToken cancellationToken) in /_/src/MassTransit/Agents/PipeContextSupervisor.cs:line 55
   at MassTransit.Agents.PipeContextSupervisor`1.Send(IPipe`1 pipe, CancellationToken cancellationToken) in /_/src/MassTransit/Agents/PipeContextSupervisor.cs:line 61
   at MassTransit.Agents.PipeContextSupervisor`1.Send(IPipe`1 pipe, CancellationToken cancellationToken) in /_/src/MassTransit/Agents/PipeContextSupervisor.cs:line 67
   at MassTransit.Transports.HostConfigurationRetryExtensions.Retry(IHostConfiguration hostConfiguration, Func`1 factory, CancellationToken cancellationToken, CancellationToken stoppingToken) in /_/src/MassTransit/Transports/HostConfigurationRetryExtensions.cs:line 39
   at capygram.Auth.Services.UserServices.UpdateAvatar(List`1 fileToUpload, Guid userId) in C:\coode\Hit_Product\capygram-be\src\Services\capygram.Auth\Services\UserServices.cs:line 233
   at capygram.Auth.Controllers.UsersController.UpdateAvatar(List`1 fileToUpload, Guid userId) in C:\coode\Hit_Product\capygram-be\src\Services\capygram.Auth\Controllers\UsersController.cs:line 72
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at capygram.Common.Middlewares.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in C:\coode\Hit_Product\capygram-be\src\Services\capygram.Common\Middlewares\ExceptionHandlingMiddleware.cs:line 19
2024-07-03 00:57:32.114 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7284/api/Users/upload-avatar - 500 null application/json 9386.7243ms
2024-07-03 00:59:15.259 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-07-03 00:59:15.847 +07:00 [DBG] Hosting starting
2024-07-03 00:59:15.906 +07:00 [INF] User profile is available. Using 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-07-03 00:59:16.215 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-86acdddc-5ebb-46d0-8da9-a5d2c38b8b42.xml'.
2024-07-03 00:59:16.223 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-97575500-6a39-4aec-a5f7-bc1ac2a50231.xml'.
2024-07-03 00:59:16.223 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-c1d10d47-675a-4953-a6d0-6a670993d84e.xml'.
2024-07-03 00:59:16.224 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-cd53a739-4711-4aeb-9f47-0d2c26453423.xml'.
2024-07-03 00:59:16.229 +07:00 [DBG] Found key {86acdddc-5ebb-46d0-8da9-a5d2c38b8b42}.
2024-07-03 00:59:16.235 +07:00 [DBG] Found key {97575500-6a39-4aec-a5f7-bc1ac2a50231}.
2024-07-03 00:59:16.236 +07:00 [DBG] Found key {c1d10d47-675a-4953-a6d0-6a670993d84e}.
2024-07-03 00:59:16.237 +07:00 [DBG] Found key {cd53a739-4711-4aeb-9f47-0d2c26453423}.
2024-07-03 00:59:16.244 +07:00 [DBG] Considering key {97575500-6a39-4aec-a5f7-bc1ac2a50231} with expiration date 2024-09-23 17:58:26Z as default key.
2024-07-03 00:59:16.248 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-07-03 00:59:16.250 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-07-03 00:59:16.252 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-07-03 00:59:16.255 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-07-03 00:59:16.257 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-07-03 00:59:16.259 +07:00 [DBG] Using key {97575500-6a39-4aec-a5f7-bc1ac2a50231} as the default key.
2024-07-03 00:59:16.260 +07:00 [DBG] Key ring with default key {97575500-6a39-4aec-a5f7-bc1ac2a50231} was loaded during application startup.
2024-07-03 00:59:16.261 +07:00 [DBG] Starting bus instances: IBus
2024-07-03 00:59:16.265 +07:00 [DBG] Starting bus: "rabbitmq://localhost/capygram"
2024-07-03 00:59:16.312 +07:00 [DBG] Connect: guest@localhost:5672/capygram
2024-07-03 00:59:16.457 +07:00 [DBG] Connected: guest@localhost:5672/capygram (address: amqp://localhost:5672, local: 55977)
2024-07-03 00:59:16.476 +07:00 [INF] Now listening on: https://localhost:7284
2024-07-03 00:59:16.476 +07:00 [INF] Now listening on: http://localhost:5090
2024-07-03 00:59:16.477 +07:00 [DBG] Loaded hosting startup assembly capygram.Auth
2024-07-03 00:59:16.477 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-07-03 00:59:16.477 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-07-03 00:59:16.478 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-07-03 00:59:16.478 +07:00 [INF] Hosting environment: Development
2024-07-03 00:59:16.478 +07:00 [INF] Content root path: C:\coode\Hit_Product\capygram-be\src\Services\capygram.Auth
2024-07-03 00:59:16.479 +07:00 [DBG] Hosting started
2024-07-03 00:59:16.488 +07:00 [DBG] Endpoint Ready: "rabbitmq://localhost/capygram/DESKTOPO1721LD_capygramAuth_bus_ebcoyyysrsen75eqbdqjiofonb?temporary=true"
2024-07-03 00:59:16.491 +07:00 [INF] Bus started: "rabbitmq://localhost/capygram"
2024-07-03 00:59:16.529 +07:00 [DBG] Connection id "0HN4QO2O7UBBR" accepted.
2024-07-03 00:59:16.529 +07:00 [DBG] Connection id "0HN4QO2O7UBBS" accepted.
2024-07-03 00:59:16.530 +07:00 [DBG] Connection id "0HN4QO2O7UBBR" started.
2024-07-03 00:59:16.530 +07:00 [DBG] Connection id "0HN4QO2O7UBBS" started.
2024-07-03 00:59:16.538 +07:00 [DBG] Connection id "0HN4QO2O7UBBS" received FIN.
2024-07-03 00:59:16.538 +07:00 [DBG] Connection id "0HN4QO2O7UBBR" received FIN.
2024-07-03 00:59:16.550 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-07-03 00:59:16.550 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-07-03 00:59:16.569 +07:00 [DBG] Connection id "0HN4QO2O7UBBR" stopped.
2024-07-03 00:59:16.569 +07:00 [DBG] Connection id "0HN4QO2O7UBBS" stopped.
2024-07-03 00:59:16.572 +07:00 [DBG] Connection id "0HN4QO2O7UBBS" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-07-03 00:59:16.572 +07:00 [DBG] Connection id "0HN4QO2O7UBBR" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-07-03 00:59:17.291 +07:00 [DBG] Connection id "0HN4QO2O7UBBT" accepted.
2024-07-03 00:59:17.293 +07:00 [DBG] Connection id "0HN4QO2O7UBBT" started.
2024-07-03 00:59:17.372 +07:00 [DBG] Connection 0HN4QO2O7UBBT established using the following protocol: "Tls13"
2024-07-03 00:59:17.463 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7284/swagger/index.html - null null
2024-07-03 00:59:17.609 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-07-03 00:59:17.648 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-07-03 00:59:17.649 +07:00 [DBG] Request did not match any endpoints
2024-07-03 00:59:17.779 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-07-03 00:59:17.783 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-07-03 00:59:17.855 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-07-03 00:59:17.858 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-07-03 00:59:17.872 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7284/swagger/index.html - 200 null text/html;charset=utf-8 417.9043ms
2024-07-03 00:59:17.983 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7284/_vs/browserLink - null null
2024-07-03 00:59:17.983 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7284/_framework/aspnetcore-browser-refresh.js - null null
2024-07-03 00:59:17.990 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7284/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 7.719ms
2024-07-03 00:59:18.076 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7284/_vs/browserLink - 200 null text/javascript; charset=UTF-8 93.1407ms
2024-07-03 00:59:18.676 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7284/swagger/v1/swagger.json - null null
2024-07-03 00:59:18.678 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-07-03 00:59:18.678 +07:00 [DBG] Request did not match any endpoints
2024-07-03 00:59:18.904 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7284/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 228.2632ms
2024-07-03 00:59:54.562 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7284/api/Users/upload-avatar - multipart/form-data; boundary=----WebKitFormBoundaryB61BASfJr8t88K30 39812
2024-07-03 00:59:54.571 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Users/upload-avatar'
2024-07-03 00:59:54.574 +07:00 [DBG] Endpoint 'capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth)' with route pattern 'api/Users/upload-avatar' is valid for the request path '/api/Users/upload-avatar'
2024-07-03 00:59:54.575 +07:00 [DBG] Request matched endpoint 'capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth)'
2024-07-03 00:59:54.577 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-03 00:59:54.578 +07:00 [INF] Start request......!
2024-07-03 00:59:54.647 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-07-03 00:59:54.649 +07:00 [INF] Executing endpoint 'capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth)'
2024-07-03 00:59:54.675 +07:00 [INF] Route matched with {action = "UpdateAvatar", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateAvatar(System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile], System.Guid) on controller capygram.Auth.Controllers.UsersController (capygram.Auth).
2024-07-03 00:59:54.677 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-03 00:59:54.678 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-03 00:59:54.678 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-03 00:59:54.678 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-03 00:59:54.679 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-03 00:59:54.681 +07:00 [DBG] Executing controller factory for controller capygram.Auth.Controllers.UsersController (capygram.Auth)
2024-07-03 00:59:54.689 +07:00 [DBG] Executed controller factory for controller capygram.Auth.Controllers.UsersController (capygram.Auth)
2024-07-03 00:59:54.696 +07:00 [DBG] Connection id "0HN4QO2O7UBBT", Request id "0HN4QO2O7UBBT:00000009": started reading request body.
2024-07-03 00:59:54.696 +07:00 [DBG] Connection id "0HN4QO2O7UBBT", Request id "0HN4QO2O7UBBT:00000009": done reading request body.
2024-07-03 00:59:54.706 +07:00 [DBG] Attempting to bind parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]' ...
2024-07-03 00:59:54.710 +07:00 [DBG] Attempting to bind parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]' using the name '' in request data ...
2024-07-03 00:59:54.712 +07:00 [DBG] Done attempting to bind parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]'.
2024-07-03 00:59:54.713 +07:00 [DBG] Done attempting to bind parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]'.
2024-07-03 00:59:54.713 +07:00 [DBG] Attempting to validate the bound parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]' ...
2024-07-03 00:59:54.725 +07:00 [DBG] Done attempting to validate the bound parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]'.
2024-07-03 00:59:54.726 +07:00 [DBG] Attempting to bind parameter 'userId' of type 'System.Guid' ...
2024-07-03 00:59:54.726 +07:00 [DBG] Attempting to bind parameter 'userId' of type 'System.Guid' using the name 'userId' in request data ...
2024-07-03 00:59:54.727 +07:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.Guid'.
2024-07-03 00:59:54.727 +07:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.Guid'.
2024-07-03 00:59:54.728 +07:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.Guid' ...
2024-07-03 00:59:54.728 +07:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.Guid'.
2024-07-03 01:00:00.680 +07:00 [DBG] Declare exchange: name: image-upload-notification, type: fanout, durable
2024-07-03 01:00:00.752 +07:00 [ERR] S-FAULT "rabbitmq://localhost/capygram/image-upload-notification" "40590000-1625-902e-5b0d-08dc9ac0cacb" capygram.Common.MessageBus.Events.ImageUploadNotification
System.Runtime.Serialization.SerializationException: Failed to serialize message
 ---> System.InvalidOperationException: Timeouts are not supported on this stream.
   at System.IO.Stream.get_ReadTimeout()
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWriteAsObject(Utf8JsonWriter writer, Object value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.Serialize(Utf8JsonWriter writer, T& rootValue, Object rootValueBoxed)
   at System.Text.Json.JsonSerializer.Serialize[TValue](Utf8JsonWriter writer, TValue value, JsonSerializerOptions options)
   at MassTransit.Serialization.JsonConverters.TypeMappingJsonConverter`2.Write(Utf8JsonWriter writer, TType value, JsonSerializerOptions options) in /_/src/MassTransit/Serialization/JsonConverters/TypeMappingJsonConverter.cs:line 20
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.Serialize(Utf8JsonWriter writer, T& rootValue, Object rootValueBoxed)
   at System.Text.Json.JsonSerializer.WriteBytes[TValue](TValue& value, JsonTypeInfo`1 jsonTypeInfo)
   at System.Text.Json.JsonSerializer.SerializeToUtf8Bytes[TValue](TValue value, JsonSerializerOptions options)
   at MassTransit.Serialization.SystemTextJsonMessageBody`1.GetBytes() in /_/src/MassTransit/Serialization/SystemTextJsonMessageBody.cs:line 50
   --- End of inner exception stack trace ---
   at MassTransit.Serialization.SystemTextJsonMessageBody`1.GetBytes() in /_/src/MassTransit/Serialization/SystemTextJsonMessageBody.cs:line 56
   at MassTransit.RabbitMqTransport.RabbitMqSendTransportContext.Send[T](ModelContext transportContext, SendContext`1 sendContext) in /_/src/Transports/MassTransit.RabbitMqTransport/RabbitMqTransport/RabbitMqSendTransportContext.cs:line 116
   at MassTransit.Transports.SendTransport`1.SendPipe`1.Send(TContext context) in /_/src/MassTransit/Transports/SendTransport.cs:line 93
2024-07-03 01:00:00.856 +07:00 [INF] Executed action capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth) in 6175.1669ms
2024-07-03 01:00:00.861 +07:00 [INF] Executed endpoint 'capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth)'
2024-07-03 01:00:12.952 +07:00 [ERR] Failed to serialize message
System.Runtime.Serialization.SerializationException: Failed to serialize message
 ---> System.InvalidOperationException: Timeouts are not supported on this stream.
   at System.IO.Stream.get_ReadTimeout()
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWriteAsObject(Utf8JsonWriter writer, Object value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.Serialize(Utf8JsonWriter writer, T& rootValue, Object rootValueBoxed)
   at System.Text.Json.JsonSerializer.Serialize[TValue](Utf8JsonWriter writer, TValue value, JsonSerializerOptions options)
   at MassTransit.Serialization.JsonConverters.TypeMappingJsonConverter`2.Write(Utf8JsonWriter writer, TType value, JsonSerializerOptions options) in /_/src/MassTransit/Serialization/JsonConverters/TypeMappingJsonConverter.cs:line 20
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.Serialize(Utf8JsonWriter writer, T& rootValue, Object rootValueBoxed)
   at System.Text.Json.JsonSerializer.WriteBytes[TValue](TValue& value, JsonTypeInfo`1 jsonTypeInfo)
   at System.Text.Json.JsonSerializer.SerializeToUtf8Bytes[TValue](TValue value, JsonSerializerOptions options)
   at MassTransit.Serialization.SystemTextJsonMessageBody`1.GetBytes() in /_/src/MassTransit/Serialization/SystemTextJsonMessageBody.cs:line 50
   --- End of inner exception stack trace ---
   at MassTransit.Serialization.SystemTextJsonMessageBody`1.GetBytes() in /_/src/MassTransit/Serialization/SystemTextJsonMessageBody.cs:line 56
   at MassTransit.RabbitMqTransport.RabbitMqSendTransportContext.Send[T](ModelContext transportContext, SendContext`1 sendContext) in /_/src/Transports/MassTransit.RabbitMqTransport/RabbitMqTransport/RabbitMqSendTransportContext.cs:line 116
   at MassTransit.Transports.SendTransport`1.SendPipe`1.Send(TContext context) in /_/src/MassTransit/Transports/SendTransport.cs:line 93
   at MassTransit.Transports.SendTransport`1.SendPipe`1.Send(TContext context) in /_/src/MassTransit/Transports/SendTransport.cs:line 111
   at MassTransit.Agents.PipeContextSupervisor`1.Send(IPipe`1 pipe, CancellationToken cancellationToken) in /_/src/MassTransit/Agents/PipeContextSupervisor.cs:line 55
   at MassTransit.Agents.PipeContextSupervisor`1.Send(IPipe`1 pipe, CancellationToken cancellationToken) in /_/src/MassTransit/Agents/PipeContextSupervisor.cs:line 61
   at MassTransit.Agents.PipeContextSupervisor`1.Send(IPipe`1 pipe, CancellationToken cancellationToken) in /_/src/MassTransit/Agents/PipeContextSupervisor.cs:line 67
   at MassTransit.Transports.HostConfigurationRetryExtensions.Retry(IHostConfiguration hostConfiguration, Func`1 factory, CancellationToken cancellationToken, CancellationToken stoppingToken) in /_/src/MassTransit/Transports/HostConfigurationRetryExtensions.cs:line 39
   at capygram.Auth.Services.UserServices.UpdateAvatar(List`1 fileToUpload, Guid userId) in C:\coode\Hit_Product\capygram-be\src\Services\capygram.Auth\Services\UserServices.cs:line 243
   at capygram.Auth.Controllers.UsersController.UpdateAvatar(List`1 fileToUpload, Guid userId) in C:\coode\Hit_Product\capygram-be\src\Services\capygram.Auth\Controllers\UsersController.cs:line 72
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at capygram.Common.Middlewares.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in C:\coode\Hit_Product\capygram-be\src\Services\capygram.Common\Middlewares\ExceptionHandlingMiddleware.cs:line 19
2024-07-03 01:00:12.973 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7284/api/Users/upload-avatar - 500 null application/json 18411.1265ms
2024-07-03 01:04:34.041 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-07-03 01:04:34.545 +07:00 [DBG] Hosting starting
2024-07-03 01:04:34.581 +07:00 [INF] User profile is available. Using 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-07-03 01:04:34.888 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-86acdddc-5ebb-46d0-8da9-a5d2c38b8b42.xml'.
2024-07-03 01:04:34.894 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-97575500-6a39-4aec-a5f7-bc1ac2a50231.xml'.
2024-07-03 01:04:34.895 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-c1d10d47-675a-4953-a6d0-6a670993d84e.xml'.
2024-07-03 01:04:34.895 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-cd53a739-4711-4aeb-9f47-0d2c26453423.xml'.
2024-07-03 01:04:34.900 +07:00 [DBG] Found key {86acdddc-5ebb-46d0-8da9-a5d2c38b8b42}.
2024-07-03 01:04:34.903 +07:00 [DBG] Found key {97575500-6a39-4aec-a5f7-bc1ac2a50231}.
2024-07-03 01:04:34.904 +07:00 [DBG] Found key {c1d10d47-675a-4953-a6d0-6a670993d84e}.
2024-07-03 01:04:34.904 +07:00 [DBG] Found key {cd53a739-4711-4aeb-9f47-0d2c26453423}.
2024-07-03 01:04:34.913 +07:00 [DBG] Considering key {97575500-6a39-4aec-a5f7-bc1ac2a50231} with expiration date 2024-09-23 17:58:26Z as default key.
2024-07-03 01:04:34.922 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-07-03 01:04:34.928 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-07-03 01:04:34.933 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-07-03 01:04:34.937 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-07-03 01:04:34.942 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-07-03 01:04:34.945 +07:00 [DBG] Using key {97575500-6a39-4aec-a5f7-bc1ac2a50231} as the default key.
2024-07-03 01:04:34.947 +07:00 [DBG] Key ring with default key {97575500-6a39-4aec-a5f7-bc1ac2a50231} was loaded during application startup.
2024-07-03 01:04:34.949 +07:00 [DBG] Starting bus instances: IBus
2024-07-03 01:04:34.956 +07:00 [DBG] Starting bus: "rabbitmq://localhost/capygram"
2024-07-03 01:04:35.009 +07:00 [DBG] Connect: guest@localhost:5672/capygram
2024-07-03 01:04:35.187 +07:00 [DBG] Connected: guest@localhost:5672/capygram (address: amqp://localhost:5672, local: 56236)
2024-07-03 01:04:35.215 +07:00 [INF] Now listening on: https://localhost:7284
2024-07-03 01:04:35.215 +07:00 [INF] Now listening on: http://localhost:5090
2024-07-03 01:04:35.215 +07:00 [DBG] Loaded hosting startup assembly capygram.Auth
2024-07-03 01:04:35.216 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-07-03 01:04:35.216 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-07-03 01:04:35.216 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-07-03 01:04:35.216 +07:00 [INF] Hosting environment: Development
2024-07-03 01:04:35.217 +07:00 [INF] Content root path: C:\coode\Hit_Product\capygram-be\src\Services\capygram.Auth
2024-07-03 01:04:35.217 +07:00 [DBG] Hosting started
2024-07-03 01:04:35.224 +07:00 [DBG] Endpoint Ready: "rabbitmq://localhost/capygram/DESKTOPO1721LD_capygramAuth_bus_st4yyyysrsen7h3wbdqjiomqbo?temporary=true"
2024-07-03 01:04:35.228 +07:00 [INF] Bus started: "rabbitmq://localhost/capygram"
2024-07-03 01:04:35.321 +07:00 [DBG] Connection id "0HN4QO5N85OFH" accepted.
2024-07-03 01:04:35.321 +07:00 [DBG] Connection id "0HN4QO5N85OFG" accepted.
2024-07-03 01:04:35.323 +07:00 [DBG] Connection id "0HN4QO5N85OFH" started.
2024-07-03 01:04:35.323 +07:00 [DBG] Connection id "0HN4QO5N85OFG" started.
2024-07-03 01:04:35.335 +07:00 [DBG] Connection id "0HN4QO5N85OFG" received FIN.
2024-07-03 01:04:35.335 +07:00 [DBG] Connection id "0HN4QO5N85OFH" received FIN.
2024-07-03 01:04:35.347 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-07-03 01:04:35.347 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-07-03 01:04:35.369 +07:00 [DBG] Connection id "0HN4QO5N85OFG" stopped.
2024-07-03 01:04:35.369 +07:00 [DBG] Connection id "0HN4QO5N85OFH" stopped.
2024-07-03 01:04:35.373 +07:00 [DBG] Connection id "0HN4QO5N85OFG" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-07-03 01:04:35.373 +07:00 [DBG] Connection id "0HN4QO5N85OFH" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-07-03 01:04:35.782 +07:00 [DBG] Connection id "0HN4QO5N85OFI" accepted.
2024-07-03 01:04:35.783 +07:00 [DBG] Connection id "0HN4QO5N85OFI" started.
2024-07-03 01:04:35.822 +07:00 [DBG] Connection 0HN4QO5N85OFI established using the following protocol: "Tls13"
2024-07-03 01:04:35.914 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7284/swagger/index.html - null null
2024-07-03 01:04:36.061 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-07-03 01:04:36.096 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-07-03 01:04:36.097 +07:00 [DBG] Request did not match any endpoints
2024-07-03 01:04:36.234 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-07-03 01:04:36.237 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-07-03 01:04:36.277 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-07-03 01:04:36.287 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-07-03 01:04:36.303 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7284/swagger/index.html - 200 null text/html;charset=utf-8 396.4925ms
2024-07-03 01:04:36.431 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7284/_vs/browserLink - null null
2024-07-03 01:04:36.438 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7284/_framework/aspnetcore-browser-refresh.js - null null
2024-07-03 01:04:36.450 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7284/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 12.214ms
2024-07-03 01:04:36.492 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7284/_vs/browserLink - 200 null text/javascript; charset=UTF-8 60.6222ms
2024-07-03 01:04:37.142 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7284/swagger/v1/swagger.json - null null
2024-07-03 01:04:37.143 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-07-03 01:04:37.144 +07:00 [DBG] Request did not match any endpoints
2024-07-03 01:04:37.397 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7284/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 255.4433ms
2024-07-03 01:04:56.619 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7284/api/Users/upload-avatar - multipart/form-data; boundary=----WebKitFormBoundaryE4UIutEGwyuBr3Ko 20867
2024-07-03 01:04:56.623 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Users/upload-avatar'
2024-07-03 01:04:56.625 +07:00 [DBG] Endpoint 'capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth)' with route pattern 'api/Users/upload-avatar' is valid for the request path '/api/Users/upload-avatar'
2024-07-03 01:04:56.626 +07:00 [DBG] Request matched endpoint 'capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth)'
2024-07-03 01:04:56.628 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-03 01:04:56.630 +07:00 [INF] Start request......!
2024-07-03 01:04:56.699 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-07-03 01:04:56.702 +07:00 [INF] Executing endpoint 'capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth)'
2024-07-03 01:04:56.725 +07:00 [INF] Route matched with {action = "UpdateAvatar", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateAvatar(System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile], System.Guid) on controller capygram.Auth.Controllers.UsersController (capygram.Auth).
2024-07-03 01:04:56.727 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-03 01:04:56.727 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-03 01:04:56.727 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-03 01:04:56.728 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-03 01:04:56.728 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-03 01:04:56.729 +07:00 [DBG] Executing controller factory for controller capygram.Auth.Controllers.UsersController (capygram.Auth)
2024-07-03 01:04:56.736 +07:00 [DBG] Executed controller factory for controller capygram.Auth.Controllers.UsersController (capygram.Auth)
2024-07-03 01:04:56.744 +07:00 [DBG] Connection id "0HN4QO5N85OFI", Request id "0HN4QO5N85OFI:00000009": started reading request body.
2024-07-03 01:04:56.744 +07:00 [DBG] Connection id "0HN4QO5N85OFI", Request id "0HN4QO5N85OFI:00000009": done reading request body.
2024-07-03 01:04:56.755 +07:00 [DBG] Attempting to bind parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]' ...
2024-07-03 01:04:56.759 +07:00 [DBG] Attempting to bind parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]' using the name '' in request data ...
2024-07-03 01:04:56.760 +07:00 [DBG] Done attempting to bind parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]'.
2024-07-03 01:04:56.761 +07:00 [DBG] Done attempting to bind parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]'.
2024-07-03 01:04:56.761 +07:00 [DBG] Attempting to validate the bound parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]' ...
2024-07-03 01:04:56.771 +07:00 [DBG] Done attempting to validate the bound parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]'.
2024-07-03 01:04:56.773 +07:00 [DBG] Attempting to bind parameter 'userId' of type 'System.Guid' ...
2024-07-03 01:04:56.774 +07:00 [DBG] Attempting to bind parameter 'userId' of type 'System.Guid' using the name 'userId' in request data ...
2024-07-03 01:04:56.775 +07:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.Guid'.
2024-07-03 01:04:56.775 +07:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.Guid'.
2024-07-03 01:04:56.775 +07:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.Guid' ...
2024-07-03 01:04:56.776 +07:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.Guid'.
2024-07-03 01:04:59.593 +07:00 [DBG] Declare exchange: name: image-upload-notification, type: fanout, durable
2024-07-03 01:04:59.756 +07:00 [DBG] SEND "rabbitmq://localhost/capygram/image-upload-notification" "b4740000-1625-902e-e4ab-08dc9ac17cf4" capygram.Common.MessageBus.Events.ImageUploadNotification
2024-07-03 01:05:15.293 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-07-03 01:05:15.294 +07:00 [DBG] No information found on request to perform content negotiation.
2024-07-03 01:05:15.295 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-07-03 01:05:15.295 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-07-03 01:05:15.295 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-07-03 01:05:15.296 +07:00 [INF] Executing OkObjectResult, writing value of type 'capygram.Common.Shared.Result`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-07-03 01:05:25.945 +07:00 [INF] Executed action capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth) in 29213.6379ms
2024-07-03 01:05:25.946 +07:00 [INF] Executed endpoint 'capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth)'
2024-07-03 01:05:25.948 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7284/api/Users/upload-avatar - 200 null application/json; charset=utf-8 29329.228ms
2024-07-03 02:30:27.667 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-07-03 02:31:43.887 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-07-03 02:31:44.419 +07:00 [DBG] Hosting starting
2024-07-03 02:31:44.463 +07:00 [INF] User profile is available. Using 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-07-03 02:31:44.924 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-86acdddc-5ebb-46d0-8da9-a5d2c38b8b42.xml'.
2024-07-03 02:31:44.931 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-97575500-6a39-4aec-a5f7-bc1ac2a50231.xml'.
2024-07-03 02:31:44.932 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-c1d10d47-675a-4953-a6d0-6a670993d84e.xml'.
2024-07-03 02:31:44.933 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-cd53a739-4711-4aeb-9f47-0d2c26453423.xml'.
2024-07-03 02:31:44.940 +07:00 [DBG] Found key {86acdddc-5ebb-46d0-8da9-a5d2c38b8b42}.
2024-07-03 02:31:44.946 +07:00 [DBG] Found key {97575500-6a39-4aec-a5f7-bc1ac2a50231}.
2024-07-03 02:31:44.947 +07:00 [DBG] Found key {c1d10d47-675a-4953-a6d0-6a670993d84e}.
2024-07-03 02:31:44.948 +07:00 [DBG] Found key {cd53a739-4711-4aeb-9f47-0d2c26453423}.
2024-07-03 02:31:44.956 +07:00 [DBG] Considering key {97575500-6a39-4aec-a5f7-bc1ac2a50231} with expiration date 2024-09-23 17:58:26Z as default key.
2024-07-03 02:31:44.961 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-07-03 02:31:44.964 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-07-03 02:31:44.966 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-07-03 02:31:44.970 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-07-03 02:31:44.972 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-07-03 02:31:44.974 +07:00 [DBG] Using key {97575500-6a39-4aec-a5f7-bc1ac2a50231} as the default key.
2024-07-03 02:31:44.977 +07:00 [DBG] Key ring with default key {97575500-6a39-4aec-a5f7-bc1ac2a50231} was loaded during application startup.
2024-07-03 02:31:44.979 +07:00 [DBG] Starting bus instances: IBus
2024-07-03 02:31:44.986 +07:00 [DBG] Starting bus: "rabbitmq://localhost/capygram"
2024-07-03 02:31:45.084 +07:00 [DBG] Connect: guest@localhost:5672/capygram
2024-07-03 02:31:45.345 +07:00 [DBG] Connected: guest@localhost:5672/capygram (address: amqp://localhost:5672, local: 49430)
2024-07-03 02:31:45.375 +07:00 [INF] Now listening on: https://localhost:7284
2024-07-03 02:31:45.375 +07:00 [INF] Now listening on: http://localhost:5090
2024-07-03 02:31:45.376 +07:00 [DBG] Loaded hosting startup assembly capygram.Auth
2024-07-03 02:31:45.376 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-07-03 02:31:45.376 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-07-03 02:31:45.376 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-07-03 02:31:45.377 +07:00 [INF] Hosting environment: Development
2024-07-03 02:31:45.377 +07:00 [INF] Content root path: C:\coode\Hit_Product\capygram-be\src\Services\capygram.Auth
2024-07-03 02:31:45.377 +07:00 [DBG] Hosting started
2024-07-03 02:31:45.399 +07:00 [DBG] Endpoint Ready: "rabbitmq://localhost/capygram/DESKTOPO1721LD_capygramAuth_bus_ztdoyyysrsenhtkkbdqjiuc5d9?temporary=true"
2024-07-03 02:31:45.413 +07:00 [INF] Bus started: "rabbitmq://localhost/capygram"
2024-07-03 02:31:45.670 +07:00 [DBG] Connection id "0HN4QPME0LOQ4" received FIN.
2024-07-03 02:31:45.677 +07:00 [DBG] Connection id "0HN4QPME0LOQ4" accepted.
2024-07-03 02:31:45.680 +07:00 [DBG] Connection id "0HN4QPME0LOQ4" started.
2024-07-03 02:31:45.700 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-07-03 02:31:45.741 +07:00 [DBG] Connection id "0HN4QPME0LOQ4" stopped.
2024-07-03 02:31:45.747 +07:00 [DBG] Connection id "0HN4QPME0LOQ4" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-07-03 02:31:46.124 +07:00 [DBG] Connection id "0HN4QPME0LOQ5" accepted.
2024-07-03 02:31:46.125 +07:00 [DBG] Connection id "0HN4QPME0LOQ5" started.
2024-07-03 02:31:46.179 +07:00 [DBG] Connection 0HN4QPME0LOQ5 established using the following protocol: "Tls13"
2024-07-03 02:31:46.274 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7284/swagger/index.html - null null
2024-07-03 02:31:46.406 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-07-03 02:31:46.443 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-07-03 02:31:46.445 +07:00 [DBG] Request did not match any endpoints
2024-07-03 02:31:46.564 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-07-03 02:31:46.566 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-07-03 02:31:46.586 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-07-03 02:31:46.587 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-07-03 02:31:46.591 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7284/swagger/index.html - 200 null text/html;charset=utf-8 323.4107ms
2024-07-03 02:31:46.609 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7284/_framework/aspnetcore-browser-refresh.js - null null
2024-07-03 02:31:46.615 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7284/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 6.6919ms
2024-07-03 02:31:46.655 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7284/_vs/browserLink - null null
2024-07-03 02:31:46.740 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7284/_vs/browserLink - 200 null text/javascript; charset=UTF-8 86.2014ms
2024-07-03 02:31:47.088 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7284/swagger/v1/swagger.json - null null
2024-07-03 02:31:47.089 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-07-03 02:31:47.089 +07:00 [DBG] Request did not match any endpoints
2024-07-03 02:31:47.274 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7284/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 186.6685ms
2024-07-03 02:32:42.013 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7284/api/Users/upload-avatar - multipart/form-data; boundary=----WebKitFormBoundary1KJELES858ox2W85 20867
2024-07-03 02:32:42.018 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Users/upload-avatar'
2024-07-03 02:32:42.020 +07:00 [DBG] Endpoint 'capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth)' with route pattern 'api/Users/upload-avatar' is valid for the request path '/api/Users/upload-avatar'
2024-07-03 02:32:42.021 +07:00 [DBG] Request matched endpoint 'capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth)'
2024-07-03 02:32:42.022 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-03 02:32:42.024 +07:00 [INF] Start request......!
2024-07-03 02:32:42.083 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-07-03 02:32:42.085 +07:00 [INF] Executing endpoint 'capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth)'
2024-07-03 02:32:42.105 +07:00 [INF] Route matched with {action = "UpdateAvatar", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateAvatar(System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile], System.Guid) on controller capygram.Auth.Controllers.UsersController (capygram.Auth).
2024-07-03 02:32:42.107 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-03 02:32:42.107 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-03 02:32:42.108 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-03 02:32:42.108 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-03 02:32:42.108 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-03 02:32:42.110 +07:00 [DBG] Executing controller factory for controller capygram.Auth.Controllers.UsersController (capygram.Auth)
2024-07-03 02:32:42.117 +07:00 [DBG] Executed controller factory for controller capygram.Auth.Controllers.UsersController (capygram.Auth)
2024-07-03 02:32:42.123 +07:00 [DBG] Connection id "0HN4QPME0LOQ5", Request id "0HN4QPME0LOQ5:00000009": started reading request body.
2024-07-03 02:32:42.123 +07:00 [DBG] Connection id "0HN4QPME0LOQ5", Request id "0HN4QPME0LOQ5:00000009": done reading request body.
2024-07-03 02:32:42.130 +07:00 [DBG] Attempting to bind parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]' ...
2024-07-03 02:32:42.133 +07:00 [DBG] Attempting to bind parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]' using the name '' in request data ...
2024-07-03 02:32:42.135 +07:00 [DBG] Done attempting to bind parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]'.
2024-07-03 02:32:42.135 +07:00 [DBG] Done attempting to bind parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]'.
2024-07-03 02:32:42.135 +07:00 [DBG] Attempting to validate the bound parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]' ...
2024-07-03 02:32:42.144 +07:00 [DBG] Done attempting to validate the bound parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]'.
2024-07-03 02:32:42.145 +07:00 [DBG] Attempting to bind parameter 'userId' of type 'System.Guid' ...
2024-07-03 02:32:42.146 +07:00 [DBG] Attempting to bind parameter 'userId' of type 'System.Guid' using the name 'userId' in request data ...
2024-07-03 02:32:42.147 +07:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.Guid'.
2024-07-03 02:32:42.147 +07:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.Guid'.
2024-07-03 02:32:42.147 +07:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.Guid' ...
2024-07-03 02:32:42.148 +07:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.Guid'.
2024-07-03 02:32:45.022 +07:00 [DBG] Declare exchange: name: image-upload-notification, type: fanout, durable
2024-07-03 02:32:45.171 +07:00 [DBG] SEND "rabbitmq://localhost/capygram/image-upload-notification" "bc470000-1625-902e-5412-08dc9acdbf66" capygram.Common.MessageBus.Events.ImageUploadNotification
2024-07-03 02:32:55.721 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-07-03 02:32:55.723 +07:00 [DBG] No information found on request to perform content negotiation.
2024-07-03 02:32:55.723 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-07-03 02:32:55.723 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-07-03 02:32:55.724 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-07-03 02:32:55.724 +07:00 [INF] Executing OkObjectResult, writing value of type 'capygram.Common.Shared.Result`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-07-03 02:33:25.738 +07:00 [INF] Executed action capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth) in 43625.8066ms
2024-07-03 02:33:25.738 +07:00 [INF] Executed endpoint 'capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth)'
2024-07-03 02:33:25.741 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7284/api/Users/upload-avatar - 200 null application/json; charset=utf-8 43727.4879ms
2024-07-03 02:54:21.937 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-07-03 02:54:22.439 +07:00 [DBG] Hosting starting
2024-07-03 02:54:22.522 +07:00 [INF] User profile is available. Using 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-07-03 02:54:22.931 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-86acdddc-5ebb-46d0-8da9-a5d2c38b8b42.xml'.
2024-07-03 02:54:22.943 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-97575500-6a39-4aec-a5f7-bc1ac2a50231.xml'.
2024-07-03 02:54:22.945 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-c1d10d47-675a-4953-a6d0-6a670993d84e.xml'.
2024-07-03 02:54:22.945 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-cd53a739-4711-4aeb-9f47-0d2c26453423.xml'.
2024-07-03 02:54:22.951 +07:00 [DBG] Found key {86acdddc-5ebb-46d0-8da9-a5d2c38b8b42}.
2024-07-03 02:54:22.956 +07:00 [DBG] Found key {97575500-6a39-4aec-a5f7-bc1ac2a50231}.
2024-07-03 02:54:22.956 +07:00 [DBG] Found key {c1d10d47-675a-4953-a6d0-6a670993d84e}.
2024-07-03 02:54:22.957 +07:00 [DBG] Found key {cd53a739-4711-4aeb-9f47-0d2c26453423}.
2024-07-03 02:54:22.962 +07:00 [DBG] Considering key {97575500-6a39-4aec-a5f7-bc1ac2a50231} with expiration date 2024-09-23 17:58:26Z as default key.
2024-07-03 02:54:22.966 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-07-03 02:54:22.970 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-07-03 02:54:22.974 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-07-03 02:54:22.977 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-07-03 02:54:22.979 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-07-03 02:54:22.981 +07:00 [DBG] Using key {97575500-6a39-4aec-a5f7-bc1ac2a50231} as the default key.
2024-07-03 02:54:22.981 +07:00 [DBG] Key ring with default key {97575500-6a39-4aec-a5f7-bc1ac2a50231} was loaded during application startup.
2024-07-03 02:54:22.983 +07:00 [DBG] Starting bus instances: IBus
2024-07-03 02:54:22.987 +07:00 [DBG] Starting bus: "rabbitmq://localhost/capygram"
2024-07-03 02:54:23.055 +07:00 [DBG] Connect: guest@localhost:5672/capygram
2024-07-03 02:54:23.245 +07:00 [DBG] Connected: guest@localhost:5672/capygram (address: amqp://localhost:5672, local: 50428)
2024-07-03 02:54:23.298 +07:00 [INF] Now listening on: https://localhost:7284
2024-07-03 02:54:23.299 +07:00 [INF] Now listening on: http://localhost:5090
2024-07-03 02:54:23.299 +07:00 [DBG] Loaded hosting startup assembly capygram.Auth
2024-07-03 02:54:23.299 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-07-03 02:54:23.299 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-07-03 02:54:23.299 +07:00 [DBG] Endpoint Ready: "rabbitmq://localhost/capygram/DESKTOPO1721LD_capygramAuth_bus_tbqoyyysrsenh614bdqjiwgr8t?temporary=true"
2024-07-03 02:54:23.299 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-07-03 02:54:23.300 +07:00 [INF] Hosting environment: Development
2024-07-03 02:54:23.300 +07:00 [INF] Content root path: C:\coode\Hit_Product\capygram-be\src\Services\capygram.Auth
2024-07-03 02:54:23.300 +07:00 [DBG] Hosting started
2024-07-03 02:54:23.304 +07:00 [INF] Bus started: "rabbitmq://localhost/capygram"
2024-07-03 02:54:23.380 +07:00 [DBG] Connection id "0HN4QQ32KQ59N" received FIN.
2024-07-03 02:54:23.380 +07:00 [DBG] Connection id "0HN4QQ32KQ59M" received FIN.
2024-07-03 02:54:23.387 +07:00 [DBG] Connection id "0HN4QQ32KQ59N" accepted.
2024-07-03 02:54:23.387 +07:00 [DBG] Connection id "0HN4QQ32KQ59M" accepted.
2024-07-03 02:54:23.388 +07:00 [DBG] Connection id "0HN4QQ32KQ59N" started.
2024-07-03 02:54:23.388 +07:00 [DBG] Connection id "0HN4QQ32KQ59M" started.
2024-07-03 02:54:23.402 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-07-03 02:54:23.402 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-07-03 02:54:23.432 +07:00 [DBG] Connection id "0HN4QQ32KQ59N" stopped.
2024-07-03 02:54:23.432 +07:00 [DBG] Connection id "0HN4QQ32KQ59M" stopped.
2024-07-03 02:54:23.438 +07:00 [DBG] Connection id "0HN4QQ32KQ59N" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-07-03 02:54:23.438 +07:00 [DBG] Connection id "0HN4QQ32KQ59M" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-07-03 02:54:23.685 +07:00 [DBG] Connection id "0HN4QQ32KQ59O" accepted.
2024-07-03 02:54:23.685 +07:00 [DBG] Connection id "0HN4QQ32KQ59O" started.
2024-07-03 02:54:23.733 +07:00 [DBG] Connection 0HN4QQ32KQ59O established using the following protocol: "Tls13"
2024-07-03 02:54:23.809 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7284/swagger/index.html - null null
2024-07-03 02:54:23.930 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-07-03 02:54:23.957 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-07-03 02:54:23.958 +07:00 [DBG] Request did not match any endpoints
2024-07-03 02:54:24.055 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-07-03 02:54:24.058 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-07-03 02:54:24.082 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-07-03 02:54:24.082 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-07-03 02:54:24.087 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7284/swagger/index.html - 200 null text/html;charset=utf-8 283.4439ms
2024-07-03 02:54:24.121 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7284/_framework/aspnetcore-browser-refresh.js - null null
2024-07-03 02:54:24.131 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7284/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 9.7699ms
2024-07-03 02:54:24.161 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7284/_vs/browserLink - null null
2024-07-03 02:54:24.240 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7284/_vs/browserLink - 200 null text/javascript; charset=UTF-8 79.3926ms
2024-07-03 02:54:24.359 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7284/swagger/v1/swagger.json - null null
2024-07-03 02:54:24.360 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-07-03 02:54:24.360 +07:00 [DBG] Request did not match any endpoints
2024-07-03 02:54:24.519 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7284/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 161.1808ms
2024-07-03 02:56:40.632 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7284/api/Users/upload-avatar - multipart/form-data; boundary=----WebKitFormBoundaryJcc9OAb4utM0X264 4079003
2024-07-03 02:56:40.642 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Users/upload-avatar'
2024-07-03 02:56:40.645 +07:00 [DBG] Endpoint 'capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth)' with route pattern 'api/Users/upload-avatar' is valid for the request path '/api/Users/upload-avatar'
2024-07-03 02:56:40.645 +07:00 [DBG] Request matched endpoint 'capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth)'
2024-07-03 02:56:40.648 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-03 02:56:40.650 +07:00 [INF] Start request......!
2024-07-03 02:56:40.711 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-07-03 02:56:40.713 +07:00 [INF] Executing endpoint 'capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth)'
2024-07-03 02:56:40.734 +07:00 [INF] Route matched with {action = "UpdateAvatar", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateAvatar(System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile], System.Guid) on controller capygram.Auth.Controllers.UsersController (capygram.Auth).
2024-07-03 02:56:40.736 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-03 02:56:40.736 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-03 02:56:40.736 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-03 02:56:40.737 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-03 02:56:40.737 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-03 02:56:40.738 +07:00 [DBG] Executing controller factory for controller capygram.Auth.Controllers.UsersController (capygram.Auth)
2024-07-03 02:56:40.747 +07:00 [DBG] Executed controller factory for controller capygram.Auth.Controllers.UsersController (capygram.Auth)
2024-07-03 02:56:40.752 +07:00 [DBG] Connection id "0HN4QQ32KQ59O", Request id "0HN4QQ32KQ59O:00000009": started reading request body.
2024-07-03 02:56:40.866 +07:00 [DBG] Connection id "0HN4QQ32KQ59O", Request id "0HN4QQ32KQ59O:00000009": done reading request body.
2024-07-03 02:56:40.883 +07:00 [DBG] Attempting to bind parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]' ...
2024-07-03 02:56:40.887 +07:00 [DBG] Attempting to bind parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]' using the name '' in request data ...
2024-07-03 02:56:40.889 +07:00 [DBG] Done attempting to bind parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]'.
2024-07-03 02:56:40.890 +07:00 [DBG] Done attempting to bind parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]'.
2024-07-03 02:56:40.890 +07:00 [DBG] Attempting to validate the bound parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]' ...
2024-07-03 02:56:40.901 +07:00 [DBG] Done attempting to validate the bound parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]'.
2024-07-03 02:56:40.902 +07:00 [DBG] Attempting to bind parameter 'userId' of type 'System.Guid' ...
2024-07-03 02:56:40.903 +07:00 [DBG] Attempting to bind parameter 'userId' of type 'System.Guid' using the name 'userId' in request data ...
2024-07-03 02:56:40.904 +07:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.Guid'.
2024-07-03 02:56:40.904 +07:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.Guid'.
2024-07-03 02:56:40.905 +07:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.Guid' ...
2024-07-03 02:56:40.905 +07:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.Guid'.
2024-07-03 02:56:46.512 +07:00 [DBG] Declare exchange: name: image-upload-notification, type: fanout, durable
2024-07-03 02:56:46.516 +07:00 [DBG] Declare exchange: name: inotification, type: fanout, durable
2024-07-03 02:56:46.524 +07:00 [DBG] Bind exchange: source: image-upload-notification, destination: inotification
2024-07-03 02:56:46.762 +07:00 [DBG] SEND "rabbitmq://localhost/capygram/image-upload-notification" "885d0000-1625-902e-8202-08dc9ad11a98" capygram.Common.MessageBus.Events.ImageUploadNotification
2024-07-03 02:56:46.776 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-07-03 02:56:46.778 +07:00 [DBG] No information found on request to perform content negotiation.
2024-07-03 02:56:46.778 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-07-03 02:56:46.778 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-07-03 02:56:46.780 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-07-03 02:56:46.780 +07:00 [INF] Executing OkObjectResult, writing value of type 'capygram.Common.Shared.Result`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-07-03 02:56:46.790 +07:00 [INF] Executed action capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth) in 6049.7885ms
2024-07-03 02:56:46.791 +07:00 [INF] Executed endpoint 'capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth)'
2024-07-03 02:56:46.794 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7284/api/Users/upload-avatar - 200 null application/json; charset=utf-8 6162.9364ms
2024-07-03 02:59:43.453 +07:00 [DBG] Connection id "0HN4QQ32KQ59O" received FIN.
2024-07-03 02:59:43.456 +07:00 [DBG] Connection id "0HN4QQ32KQ59O" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-07-03 02:59:43.467 +07:00 [DBG] Connection id "0HN4QQ32KQ59O" is closed. The last processed stream ID was 9.
2024-07-03 02:59:43.468 +07:00 [DBG] The connection queue processing loop for 0HN4QQ32KQ59O completed.
2024-07-03 02:59:43.469 +07:00 [DBG] Connection id "0HN4QQ32KQ59O" stopped.
2024-07-03 03:26:38.721 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-07-03 03:26:39.389 +07:00 [DBG] Hosting starting
2024-07-03 03:26:39.569 +07:00 [INF] User profile is available. Using 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-07-03 03:26:40.016 +07:00 [INF] Configured endpoint user-media-queue, Consumer: capygram.Auth.MessageBus.Event.UserMediaNotificationConsumer
2024-07-03 03:26:40.279 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-86acdddc-5ebb-46d0-8da9-a5d2c38b8b42.xml'.
2024-07-03 03:26:40.290 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-97575500-6a39-4aec-a5f7-bc1ac2a50231.xml'.
2024-07-03 03:26:40.291 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-c1d10d47-675a-4953-a6d0-6a670993d84e.xml'.
2024-07-03 03:26:40.292 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-cd53a739-4711-4aeb-9f47-0d2c26453423.xml'.
2024-07-03 03:26:40.300 +07:00 [DBG] Found key {86acdddc-5ebb-46d0-8da9-a5d2c38b8b42}.
2024-07-03 03:26:40.309 +07:00 [DBG] Found key {97575500-6a39-4aec-a5f7-bc1ac2a50231}.
2024-07-03 03:26:40.310 +07:00 [DBG] Found key {c1d10d47-675a-4953-a6d0-6a670993d84e}.
2024-07-03 03:26:40.312 +07:00 [DBG] Found key {cd53a739-4711-4aeb-9f47-0d2c26453423}.
2024-07-03 03:26:40.326 +07:00 [DBG] Considering key {97575500-6a39-4aec-a5f7-bc1ac2a50231} with expiration date 2024-09-23 17:58:26Z as default key.
2024-07-03 03:26:40.331 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-07-03 03:26:40.333 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-07-03 03:26:40.336 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-07-03 03:26:40.340 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-07-03 03:26:40.341 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-07-03 03:26:40.343 +07:00 [DBG] Using key {97575500-6a39-4aec-a5f7-bc1ac2a50231} as the default key.
2024-07-03 03:26:40.345 +07:00 [DBG] Key ring with default key {97575500-6a39-4aec-a5f7-bc1ac2a50231} was loaded during application startup.
2024-07-03 03:26:40.346 +07:00 [DBG] Starting bus instances: IBus
2024-07-03 03:26:40.354 +07:00 [DBG] Starting bus: "rabbitmq://localhost/capygram"
2024-07-03 03:26:40.436 +07:00 [DBG] Connect: guest@localhost:5672/capygram
2024-07-03 03:26:40.699 +07:00 [DBG] Connected: guest@localhost:5672/capygram (address: amqp://localhost:5672, local: 51889)
2024-07-03 03:26:40.754 +07:00 [INF] Now listening on: https://localhost:7284
2024-07-03 03:26:40.755 +07:00 [INF] Now listening on: http://localhost:5090
2024-07-03 03:26:40.756 +07:00 [DBG] Loaded hosting startup assembly capygram.Auth
2024-07-03 03:26:40.756 +07:00 [DBG] Endpoint Ready: "rabbitmq://localhost/capygram/DESKTOPO1721LD_capygramAuth_bus_bnjoyyysrsen797ubdqjiik8rx?temporary=true"
2024-07-03 03:26:40.756 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-07-03 03:26:40.756 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-07-03 03:26:40.757 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-07-03 03:26:40.757 +07:00 [INF] Hosting environment: Development
2024-07-03 03:26:40.757 +07:00 [INF] Content root path: C:\coode\Hit_Product\capygram-be\src\Services\capygram.Auth
2024-07-03 03:26:40.758 +07:00 [DBG] Hosting started
2024-07-03 03:26:40.795 +07:00 [DBG] Declare queue: name: user-media-queue, durable, consumer-count: 0 message-count: 0
2024-07-03 03:26:40.814 +07:00 [DBG] Declare exchange: name: user-media-queue, type: fanout, durable
2024-07-03 03:26:40.824 +07:00 [DBG] Declare exchange: name: send-notification-exchange, type: topic, durable
2024-07-03 03:26:40.842 +07:00 [DBG] Bind queue: source: user-media-queue, destination: user-media-queue
2024-07-03 03:26:40.887 +07:00 [DBG] Connection id "0HN4QQL429VVB" accepted.
2024-07-03 03:26:40.887 +07:00 [DBG] Connection id "0HN4QQL429VVC" accepted.
2024-07-03 03:26:40.899 +07:00 [DBG] Connection id "0HN4QQL429VVB" started.
2024-07-03 03:26:40.899 +07:00 [DBG] Connection id "0HN4QQL429VVC" started.
2024-07-03 03:26:40.900 +07:00 [DBG] Connection id "0HN4QQL429VVB" received FIN.
2024-07-03 03:26:40.900 +07:00 [DBG] Connection id "0HN4QQL429VVC" received FIN.
2024-07-03 03:26:40.909 +07:00 [DBG] Bind exchange: source: send-notification-exchange, destination: user-media-queue, routing-key: user
2024-07-03 03:26:40.945 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-07-03 03:26:40.945 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-07-03 03:26:40.995 +07:00 [DBG] Connection id "0HN4QQL429VVC" stopped.
2024-07-03 03:26:40.995 +07:00 [DBG] Connection id "0HN4QQL429VVB" stopped.
2024-07-03 03:26:41.002 +07:00 [DBG] Connection id "0HN4QQL429VVC" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-07-03 03:26:41.002 +07:00 [DBG] Connection id "0HN4QQL429VVB" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-07-03 03:26:41.017 +07:00 [DBG] Consumer Ok: "rabbitmq://localhost/capygram/user-media-queue" - amq.ctag-ny4IVTC88HqHhMyibZrcUQ
2024-07-03 03:26:41.019 +07:00 [DBG] Endpoint Ready: "rabbitmq://localhost/capygram/user-media-queue"
2024-07-03 03:26:41.023 +07:00 [INF] Bus started: "rabbitmq://localhost/capygram"
2024-07-03 03:26:41.348 +07:00 [DBG] Connection id "0HN4QQL429VVD" accepted.
2024-07-03 03:26:41.350 +07:00 [DBG] Connection id "0HN4QQL429VVD" started.
2024-07-03 03:26:41.432 +07:00 [DBG] Connection 0HN4QQL429VVD established using the following protocol: "Tls13"
2024-07-03 03:26:41.560 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7284/swagger/index.html - null null
2024-07-03 03:26:41.678 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-07-03 03:26:41.713 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-07-03 03:26:41.714 +07:00 [DBG] Request did not match any endpoints
2024-07-03 03:26:41.833 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-07-03 03:26:41.835 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-07-03 03:26:41.855 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-07-03 03:26:41.856 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-07-03 03:26:41.860 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7284/swagger/index.html - 200 null text/html;charset=utf-8 309.0215ms
2024-07-03 03:26:41.880 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7284/_framework/aspnetcore-browser-refresh.js - null null
2024-07-03 03:26:41.888 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7284/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 8.1766ms
2024-07-03 03:26:41.941 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7284/_vs/browserLink - null null
2024-07-03 03:26:42.008 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7284/_vs/browserLink - 200 null text/javascript; charset=UTF-8 67.244ms
2024-07-03 03:26:42.491 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7284/swagger/v1/swagger.json - null null
2024-07-03 03:26:42.493 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-07-03 03:26:42.494 +07:00 [DBG] Request did not match any endpoints
2024-07-03 03:26:42.695 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7284/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 204.4216ms
2024-07-03 03:33:53.122 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-07-03 03:33:53.620 +07:00 [DBG] Hosting starting
2024-07-03 03:33:53.659 +07:00 [INF] User profile is available. Using 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-07-03 03:33:54.027 +07:00 [INF] Configured endpoint user-media-queue, Consumer: capygram.Auth.MessageBus.Event.UserMediaNotificationConsumer
2024-07-03 03:33:54.186 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-86acdddc-5ebb-46d0-8da9-a5d2c38b8b42.xml'.
2024-07-03 03:33:54.195 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-97575500-6a39-4aec-a5f7-bc1ac2a50231.xml'.
2024-07-03 03:33:54.196 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-c1d10d47-675a-4953-a6d0-6a670993d84e.xml'.
2024-07-03 03:33:54.197 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-cd53a739-4711-4aeb-9f47-0d2c26453423.xml'.
2024-07-03 03:33:54.204 +07:00 [DBG] Found key {86acdddc-5ebb-46d0-8da9-a5d2c38b8b42}.
2024-07-03 03:33:54.210 +07:00 [DBG] Found key {97575500-6a39-4aec-a5f7-bc1ac2a50231}.
2024-07-03 03:33:54.210 +07:00 [DBG] Found key {c1d10d47-675a-4953-a6d0-6a670993d84e}.
2024-07-03 03:33:54.210 +07:00 [DBG] Found key {cd53a739-4711-4aeb-9f47-0d2c26453423}.
2024-07-03 03:33:54.217 +07:00 [DBG] Considering key {97575500-6a39-4aec-a5f7-bc1ac2a50231} with expiration date 2024-09-23 17:58:26Z as default key.
2024-07-03 03:33:54.222 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-07-03 03:33:54.225 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-07-03 03:33:54.228 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-07-03 03:33:54.232 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-07-03 03:33:54.235 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-07-03 03:33:54.237 +07:00 [DBG] Using key {97575500-6a39-4aec-a5f7-bc1ac2a50231} as the default key.
2024-07-03 03:33:54.238 +07:00 [DBG] Key ring with default key {97575500-6a39-4aec-a5f7-bc1ac2a50231} was loaded during application startup.
2024-07-03 03:33:54.240 +07:00 [DBG] Starting bus instances: IBus
2024-07-03 03:33:54.244 +07:00 [DBG] Starting bus: "rabbitmq://localhost/capygram"
2024-07-03 03:33:54.296 +07:00 [DBG] Connect: guest@localhost:5672/capygram
2024-07-03 03:33:54.499 +07:00 [DBG] Connected: guest@localhost:5672/capygram (address: amqp://localhost:5672, local: 52184)
2024-07-03 03:33:54.534 +07:00 [INF] Now listening on: https://localhost:7284
2024-07-03 03:33:54.534 +07:00 [INF] Now listening on: http://localhost:5090
2024-07-03 03:33:54.535 +07:00 [DBG] Loaded hosting startup assembly capygram.Auth
2024-07-03 03:33:54.535 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-07-03 03:33:54.535 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-07-03 03:33:54.536 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-07-03 03:33:54.536 +07:00 [INF] Hosting environment: Development
2024-07-03 03:33:54.536 +07:00 [INF] Content root path: C:\coode\Hit_Product\capygram-be\src\Services\capygram.Auth
2024-07-03 03:33:54.537 +07:00 [DBG] Hosting started
2024-07-03 03:33:54.554 +07:00 [DBG] Endpoint Ready: "rabbitmq://localhost/capygram/DESKTOPO1721LD_capygramAuth_bus_8bwyyyysrsenhtxobdqjii1knb?temporary=true"
2024-07-03 03:33:54.576 +07:00 [DBG] Declare queue: name: user-media-queue, durable, consumer-count: 0 message-count: 0
2024-07-03 03:33:54.593 +07:00 [DBG] Declare exchange: name: user-media-queue, type: fanout, durable
2024-07-03 03:33:54.599 +07:00 [DBG] Declare exchange: name: send-notification-media-exchange, type: topic, durable
2024-07-03 03:33:54.630 +07:00 [DBG] Bind queue: source: user-media-queue, destination: user-media-queue
2024-07-03 03:33:54.655 +07:00 [DBG] Bind exchange: source: send-notification-media-exchange, destination: user-media-queue, routing-key: user
2024-07-03 03:33:54.754 +07:00 [DBG] Consumer Ok: "rabbitmq://localhost/capygram/user-media-queue" - amq.ctag-R3o1wlP-qt4QUjGN6Cg8qQ
2024-07-03 03:33:54.755 +07:00 [DBG] Endpoint Ready: "rabbitmq://localhost/capygram/user-media-queue"
2024-07-03 03:33:54.760 +07:00 [INF] Bus started: "rabbitmq://localhost/capygram"
2024-07-03 03:33:54.900 +07:00 [DBG] Connection id "0HN4QQP5DCCB8" accepted.
2024-07-03 03:33:54.900 +07:00 [DBG] Connection id "0HN4QQP5DCCB7" accepted.
2024-07-03 03:33:54.901 +07:00 [DBG] Connection id "0HN4QQP5DCCB8" started.
2024-07-03 03:33:54.901 +07:00 [DBG] Connection id "0HN4QQP5DCCB7" started.
2024-07-03 03:33:54.913 +07:00 [DBG] Connection id "0HN4QQP5DCCB7" received FIN.
2024-07-03 03:33:54.913 +07:00 [DBG] Connection id "0HN4QQP5DCCB8" received FIN.
2024-07-03 03:33:54.934 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-07-03 03:33:54.934 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-07-03 03:33:54.961 +07:00 [DBG] Connection id "0HN4QQP5DCCB7" stopped.
2024-07-03 03:33:54.961 +07:00 [DBG] Connection id "0HN4QQP5DCCB8" stopped.
2024-07-03 03:33:54.964 +07:00 [DBG] Connection id "0HN4QQP5DCCB8" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-07-03 03:33:54.964 +07:00 [DBG] Connection id "0HN4QQP5DCCB7" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-07-03 03:33:55.409 +07:00 [DBG] Connection id "0HN4QQP5DCCB9" accepted.
2024-07-03 03:33:55.409 +07:00 [DBG] Connection id "0HN4QQP5DCCB9" started.
2024-07-03 03:33:55.455 +07:00 [DBG] Connection 0HN4QQP5DCCB9 established using the following protocol: "Tls13"
2024-07-03 03:33:55.552 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7284/swagger/index.html - null null
2024-07-03 03:33:55.670 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-07-03 03:33:55.715 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-07-03 03:33:55.716 +07:00 [DBG] Request did not match any endpoints
2024-07-03 03:33:55.833 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-07-03 03:33:55.835 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-07-03 03:33:55.892 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-07-03 03:33:55.893 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-07-03 03:33:55.895 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7284/swagger/index.html - 200 null text/html;charset=utf-8 351.1282ms
2024-07-03 03:33:56.199 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7284/_vs/browserLink - null null
2024-07-03 03:33:56.199 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7284/_framework/aspnetcore-browser-refresh.js - null null
2024-07-03 03:33:56.212 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7284/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 13.0991ms
2024-07-03 03:33:56.288 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7284/_vs/browserLink - 200 null text/javascript; charset=UTF-8 89.9135ms
2024-07-03 03:33:56.734 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7284/swagger/v1/swagger.json - null null
2024-07-03 03:33:56.736 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-07-03 03:33:56.737 +07:00 [DBG] Request did not match any endpoints
2024-07-03 03:33:56.985 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7284/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 251.7978ms
2024-07-03 03:37:52.004 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7284/api/Users/upload-avatar - multipart/form-data; boundary=----WebKitFormBoundaryY43mREAvtZecgrRY 522816
2024-07-03 03:37:52.013 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Users/upload-avatar'
2024-07-03 03:37:52.014 +07:00 [DBG] Endpoint 'capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth)' with route pattern 'api/Users/upload-avatar' is valid for the request path '/api/Users/upload-avatar'
2024-07-03 03:37:52.015 +07:00 [DBG] Request matched endpoint 'capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth)'
2024-07-03 03:37:52.017 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-03 03:37:52.018 +07:00 [INF] Start request......!
2024-07-03 03:37:52.086 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-07-03 03:37:52.088 +07:00 [INF] Executing endpoint 'capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth)'
2024-07-03 03:37:52.107 +07:00 [INF] Route matched with {action = "UpdateAvatar", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateAvatar(System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile], System.Guid) on controller capygram.Auth.Controllers.UsersController (capygram.Auth).
2024-07-03 03:37:52.108 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-03 03:37:52.108 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-03 03:37:52.109 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-03 03:37:52.109 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-03 03:37:52.109 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-03 03:37:52.110 +07:00 [DBG] Executing controller factory for controller capygram.Auth.Controllers.UsersController (capygram.Auth)
2024-07-03 03:37:52.117 +07:00 [DBG] Executed controller factory for controller capygram.Auth.Controllers.UsersController (capygram.Auth)
2024-07-03 03:37:52.122 +07:00 [DBG] Connection id "0HN4QQP5DCCB9", Request id "0HN4QQP5DCCB9:00000009": started reading request body.
2024-07-03 03:37:52.122 +07:00 [DBG] Connection id "0HN4QQP5DCCB9", Request id "0HN4QQP5DCCB9:00000009": done reading request body.
2024-07-03 03:37:52.149 +07:00 [DBG] Attempting to bind parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]' ...
2024-07-03 03:37:52.152 +07:00 [DBG] Attempting to bind parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]' using the name '' in request data ...
2024-07-03 03:37:52.153 +07:00 [DBG] Done attempting to bind parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]'.
2024-07-03 03:37:52.153 +07:00 [DBG] Done attempting to bind parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]'.
2024-07-03 03:37:52.154 +07:00 [DBG] Attempting to validate the bound parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]' ...
2024-07-03 03:37:52.165 +07:00 [DBG] Done attempting to validate the bound parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]'.
2024-07-03 03:37:52.166 +07:00 [DBG] Attempting to bind parameter 'userId' of type 'System.Guid' ...
2024-07-03 03:37:52.167 +07:00 [DBG] Attempting to bind parameter 'userId' of type 'System.Guid' using the name 'userId' in request data ...
2024-07-03 03:37:52.168 +07:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.Guid'.
2024-07-03 03:37:52.168 +07:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.Guid'.
2024-07-03 03:37:52.168 +07:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.Guid' ...
2024-07-03 03:37:52.169 +07:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.Guid'.
2024-07-03 03:38:07.106 +07:00 [DBG] Declare exchange: name: image-upload-notification, type: fanout, durable
2024-07-03 03:38:07.107 +07:00 [DBG] Declare exchange: name: inotification, type: fanout, durable
2024-07-03 03:38:07.121 +07:00 [DBG] Bind exchange: source: image-upload-notification, destination: inotification
2024-07-03 03:38:07.287 +07:00 [DBG] SEND "rabbitmq://localhost/capygram/image-upload-notification" "38680000-1625-902e-20c9-08dc9ad6e126" capygram.Common.MessageBus.Events.ImageUploadNotification
2024-07-03 03:38:09.524 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-07-03 03:38:09.526 +07:00 [DBG] No information found on request to perform content negotiation.
2024-07-03 03:38:09.526 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-07-03 03:38:09.526 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-07-03 03:38:09.527 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-07-03 03:38:09.527 +07:00 [INF] Executing OkObjectResult, writing value of type 'capygram.Common.Shared.Result`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-07-03 03:38:26.095 +07:00 [INF] Executed action capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth) in 33982.8553ms
2024-07-03 03:38:26.095 +07:00 [INF] Executed endpoint 'capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth)'
2024-07-03 03:38:32.592 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7284/api/Users/upload-avatar - 200 null application/json; charset=utf-8 40590.9158ms
2024-07-03 03:38:38.993 +07:00 [DBG] RECEIVE "rabbitmq://localhost/capygram/user-media-queue" "f05e0000-1625-902e-e9c7-08dc9ad6f068" capygram.Common.MessageBus.Events.ImageUploadedNotification capygram.Auth.MessageBus.Event.UserMediaNotificationConsumer("00:00:06.1587426")
2024-07-03 04:12:39.828 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-07-03 04:12:40.389 +07:00 [DBG] Hosting starting
2024-07-03 04:12:40.474 +07:00 [INF] User profile is available. Using 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-07-03 04:12:40.817 +07:00 [INF] Configured endpoint user-media-queue, Consumer: capygram.Auth.MessageBus.Event.UserMediaNotificationConsumer
2024-07-03 04:12:40.964 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-86acdddc-5ebb-46d0-8da9-a5d2c38b8b42.xml'.
2024-07-03 04:12:40.972 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-97575500-6a39-4aec-a5f7-bc1ac2a50231.xml'.
2024-07-03 04:12:40.973 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-c1d10d47-675a-4953-a6d0-6a670993d84e.xml'.
2024-07-03 04:12:40.974 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-cd53a739-4711-4aeb-9f47-0d2c26453423.xml'.
2024-07-03 04:12:40.979 +07:00 [DBG] Found key {86acdddc-5ebb-46d0-8da9-a5d2c38b8b42}.
2024-07-03 04:12:40.985 +07:00 [DBG] Found key {97575500-6a39-4aec-a5f7-bc1ac2a50231}.
2024-07-03 04:12:40.986 +07:00 [DBG] Found key {c1d10d47-675a-4953-a6d0-6a670993d84e}.
2024-07-03 04:12:40.986 +07:00 [DBG] Found key {cd53a739-4711-4aeb-9f47-0d2c26453423}.
2024-07-03 04:12:40.994 +07:00 [DBG] Considering key {97575500-6a39-4aec-a5f7-bc1ac2a50231} with expiration date 2024-09-23 17:58:26Z as default key.
2024-07-03 04:12:41.000 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-07-03 04:12:41.002 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-07-03 04:12:41.004 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-07-03 04:12:41.007 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-07-03 04:12:41.009 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-07-03 04:12:41.012 +07:00 [DBG] Using key {97575500-6a39-4aec-a5f7-bc1ac2a50231} as the default key.
2024-07-03 04:12:41.013 +07:00 [DBG] Key ring with default key {97575500-6a39-4aec-a5f7-bc1ac2a50231} was loaded during application startup.
2024-07-03 04:12:41.014 +07:00 [DBG] Starting bus instances: IBus
2024-07-03 04:12:41.020 +07:00 [DBG] Starting bus: "rabbitmq://localhost/capygram"
2024-07-03 04:12:41.089 +07:00 [DBG] Connect: guest@localhost:5672/capygram
2024-07-03 04:12:41.371 +07:00 [DBG] Connected: guest@localhost:5672/capygram (address: amqp://localhost:5672, local: 54586)
2024-07-03 04:12:41.396 +07:00 [INF] Now listening on: https://localhost:7284
2024-07-03 04:12:41.397 +07:00 [INF] Now listening on: http://localhost:5090
2024-07-03 04:12:41.397 +07:00 [DBG] Loaded hosting startup assembly capygram.Auth
2024-07-03 04:12:41.397 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-07-03 04:12:41.398 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-07-03 04:12:41.398 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-07-03 04:12:41.399 +07:00 [INF] Hosting environment: Development
2024-07-03 04:12:41.399 +07:00 [INF] Content root path: C:\coode\Hit_Product\capygram-be\src\Services\capygram.Auth
2024-07-03 04:12:41.399 +07:00 [DBG] Hosting started
2024-07-03 04:12:41.430 +07:00 [DBG] Endpoint Ready: "rabbitmq://localhost/capygram/DESKTOPO1721LD_capygramAuth_bus_gt9oyyysrsen7w36bdqjis7ibg?temporary=true"
2024-07-03 04:12:41.443 +07:00 [DBG] Declare queue: name: user-media-queue, durable, consumer-count: 0 message-count: 0
2024-07-03 04:12:41.460 +07:00 [DBG] Declare exchange: name: user-media-queue, type: fanout, durable
2024-07-03 04:12:41.465 +07:00 [DBG] Declare exchange: name: send-notification-media-exchange, type: topic, durable
2024-07-03 04:12:41.469 +07:00 [DBG] Bind queue: source: user-media-queue, destination: user-media-queue
2024-07-03 04:12:41.492 +07:00 [DBG] Bind exchange: source: send-notification-media-exchange, destination: user-media-queue, routing-key: user
2024-07-03 04:12:41.587 +07:00 [DBG] Consumer Ok: "rabbitmq://localhost/capygram/user-media-queue" - amq.ctag-1OwGfpAglRBb0f9kpfr26g
2024-07-03 04:12:41.588 +07:00 [DBG] Endpoint Ready: "rabbitmq://localhost/capygram/user-media-queue"
2024-07-03 04:12:41.592 +07:00 [INF] Bus started: "rabbitmq://localhost/capygram"
2024-07-03 04:12:41.759 +07:00 [DBG] Connection id "0HN4QREQS1FPB" accepted.
2024-07-03 04:12:41.759 +07:00 [DBG] Connection id "0HN4QREQS1FPA" accepted.
2024-07-03 04:12:41.762 +07:00 [DBG] Connection id "0HN4QREQS1FPA" started.
2024-07-03 04:12:41.762 +07:00 [DBG] Connection id "0HN4QREQS1FPB" started.
2024-07-03 04:12:41.762 +07:00 [DBG] Connection id "0HN4QREQS1FPB" received FIN.
2024-07-03 04:12:41.762 +07:00 [DBG] Connection id "0HN4QREQS1FPA" received FIN.
2024-07-03 04:12:41.778 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-07-03 04:12:41.778 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-07-03 04:12:41.812 +07:00 [DBG] Connection id "0HN4QREQS1FPB" stopped.
2024-07-03 04:12:41.812 +07:00 [DBG] Connection id "0HN4QREQS1FPA" stopped.
2024-07-03 04:12:41.816 +07:00 [DBG] Connection id "0HN4QREQS1FPB" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-07-03 04:12:41.816 +07:00 [DBG] Connection id "0HN4QREQS1FPA" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-07-03 04:12:42.086 +07:00 [DBG] Connection id "0HN4QREQS1FPC" accepted.
2024-07-03 04:12:42.090 +07:00 [DBG] Connection id "0HN4QREQS1FPC" started.
2024-07-03 04:12:42.168 +07:00 [DBG] Connection 0HN4QREQS1FPC established using the following protocol: "Tls13"
2024-07-03 04:12:42.275 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7284/swagger/index.html - null null
2024-07-03 04:12:42.407 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-07-03 04:12:42.449 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-07-03 04:12:42.450 +07:00 [DBG] Request did not match any endpoints
2024-07-03 04:12:42.549 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-07-03 04:12:42.551 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-07-03 04:12:42.573 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-07-03 04:12:42.574 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-07-03 04:12:42.578 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7284/swagger/index.html - 200 null text/html;charset=utf-8 311.3188ms
2024-07-03 04:12:42.881 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7284/_vs/browserLink - null null
2024-07-03 04:12:42.884 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7284/_framework/aspnetcore-browser-refresh.js - null null
2024-07-03 04:12:42.898 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7284/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 13.6683ms
2024-07-03 04:12:42.954 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7284/_vs/browserLink - 200 null text/javascript; charset=UTF-8 77.5254ms
2024-07-03 04:12:43.274 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7284/swagger/v1/swagger.json - null null
2024-07-03 04:12:43.275 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-07-03 04:12:43.276 +07:00 [DBG] Request did not match any endpoints
2024-07-03 04:12:43.470 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7284/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 195.504ms
2024-07-03 04:14:27.804 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7284/api/Users/upload-avatar - multipart/form-data; boundary=----WebKitFormBoundaryHLkVsUIO3IRw2soG 89860
2024-07-03 04:14:27.812 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Users/upload-avatar'
2024-07-03 04:14:27.814 +07:00 [DBG] Endpoint 'capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth)' with route pattern 'api/Users/upload-avatar' is valid for the request path '/api/Users/upload-avatar'
2024-07-03 04:14:27.815 +07:00 [DBG] Request matched endpoint 'capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth)'
2024-07-03 04:14:27.817 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-03 04:14:27.818 +07:00 [INF] Start request......!
2024-07-03 04:14:27.883 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-07-03 04:14:27.885 +07:00 [INF] Executing endpoint 'capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth)'
2024-07-03 04:14:27.908 +07:00 [INF] Route matched with {action = "UpdateAvatar", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateAvatar(System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile], System.Guid) on controller capygram.Auth.Controllers.UsersController (capygram.Auth).
2024-07-03 04:14:27.909 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-03 04:14:27.909 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-03 04:14:27.910 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-03 04:14:27.910 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-03 04:14:27.910 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-03 04:14:27.912 +07:00 [DBG] Executing controller factory for controller capygram.Auth.Controllers.UsersController (capygram.Auth)
2024-07-03 04:14:27.919 +07:00 [DBG] Executed controller factory for controller capygram.Auth.Controllers.UsersController (capygram.Auth)
2024-07-03 04:14:27.924 +07:00 [DBG] Connection id "0HN4QREQS1FPC", Request id "0HN4QREQS1FPC:00000009": started reading request body.
2024-07-03 04:14:27.925 +07:00 [DBG] Connection id "0HN4QREQS1FPC", Request id "0HN4QREQS1FPC:00000009": done reading request body.
2024-07-03 04:14:27.943 +07:00 [DBG] Attempting to bind parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]' ...
2024-07-03 04:14:27.949 +07:00 [DBG] Attempting to bind parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]' using the name '' in request data ...
2024-07-03 04:14:27.951 +07:00 [DBG] Done attempting to bind parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]'.
2024-07-03 04:14:27.951 +07:00 [DBG] Done attempting to bind parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]'.
2024-07-03 04:14:27.951 +07:00 [DBG] Attempting to validate the bound parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]' ...
2024-07-03 04:14:27.962 +07:00 [DBG] Done attempting to validate the bound parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]'.
2024-07-03 04:14:27.963 +07:00 [DBG] Attempting to bind parameter 'userId' of type 'System.Guid' ...
2024-07-03 04:14:27.964 +07:00 [DBG] Attempting to bind parameter 'userId' of type 'System.Guid' using the name 'userId' in request data ...
2024-07-03 04:14:27.965 +07:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.Guid'.
2024-07-03 04:14:27.965 +07:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.Guid'.
2024-07-03 04:14:27.966 +07:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.Guid' ...
2024-07-03 04:14:27.966 +07:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.Guid'.
2024-07-03 04:14:49.563 +07:00 [DBG] Declare exchange: name: image-upload-notification, type: fanout, durable
2024-07-03 04:14:49.564 +07:00 [DBG] Declare exchange: name: inotification, type: fanout, durable
2024-07-03 04:14:49.566 +07:00 [DBG] Bind exchange: source: image-upload-notification, destination: inotification
2024-07-03 04:14:49.667 +07:00 [DBG] SEND "rabbitmq://localhost/capygram/image-upload-notification" "347f0000-1625-902e-72a2-08dc9adc01ea" capygram.Common.MessageBus.Events.ImageUploadNotification
2024-07-03 04:14:52.073 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-07-03 04:14:52.075 +07:00 [DBG] No information found on request to perform content negotiation.
2024-07-03 04:14:52.075 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-07-03 04:14:52.076 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-07-03 04:14:52.077 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-07-03 04:14:52.077 +07:00 [INF] Executing OkObjectResult, writing value of type 'capygram.Common.Shared.Result`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-07-03 04:14:56.428 +07:00 [INF] Executed action capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth) in 28514.6336ms
2024-07-03 04:14:56.429 +07:00 [INF] Executed endpoint 'capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth)'
2024-07-03 04:14:58.654 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7284/api/Users/upload-avatar - 200 null application/json; charset=utf-8 30850.1559ms
2024-07-03 04:15:59.803 +07:00 [DBG] Declare exchange: name: fault`1, type: fanout, durable
2024-07-03 04:15:59.804 +07:00 [DBG] Declare exchange: name: fault, type: fanout, durable
2024-07-03 04:15:59.815 +07:00 [DBG] Bind exchange: source: fault`1, destination: fault`1
2024-07-03 04:15:59.816 +07:00 [DBG] Bind exchange: source: fault`1, destination: fault
2024-07-03 04:15:59.866 +07:00 [DBG] SEND "rabbitmq://localhost/capygram/fault`1" "347f0000-1625-902e-2da6-08dc9adc2bc9" MassTransit.Fault<capygram.Common.MessageBus.Events.ImageUploadedNotification>
2024-07-03 04:15:59.872 +07:00 [ERR] R-FAULT "rabbitmq://localhost/capygram/user-media-queue" "34bf0000-1625-902e-9e6b-08dc9adc0762" capygram.Common.MessageBus.Events.ImageUploadedNotification capygram.Auth.MessageBus.Event.UserMediaNotificationConsumer("00:01:00.8638441")
System.NullReferenceException: Object reference not set to an instance of an object.
   at capygram.Auth.UseCases.Events.UserMediaNotificationConsumerHandler.Handle(ImageUploadedNotification request, CancellationToken cancellationToken) in C:\coode\Hit_Product\capygram-be\src\Services\capygram.Auth\UseCases\Events\UserMediaNotificationConsumerHandler.cs:line 21
   at MediatR.Wrappers.RequestHandlerWrapperImpl`1.<>c__DisplayClass1_0.<<Handle>g__Handler|0>d.MoveNext()
--- End of stack trace from previous location ---
   at capygram.Common.Abstraction.Consumer`1.Consume(ConsumeContext`1 context) in C:\coode\Hit_Product\capygram-be\src\Services\capygram.Common\Abstraction\Consumer.cs:line 17
   at MassTransit.DependencyInjection.ScopeConsumerFactory`1.Send[TMessage](ConsumeContext`1 context, IPipe`1 next) in /_/src/MassTransit/DependencyInjection/DependencyInjection/ScopeConsumerFactory.cs:line 22
   at MassTransit.DependencyInjection.ScopeConsumerFactory`1.Send[TMessage](ConsumeContext`1 context, IPipe`1 next) in /_/src/MassTransit/DependencyInjection/DependencyInjection/ScopeConsumerFactory.cs:line 22
   at MassTransit.Middleware.ConsumerMessageFilter`2.MassTransit.IFilter<MassTransit.ConsumeContext<TMessage>>.Send(ConsumeContext`1 context, IPipe`1 next) in /_/src/MassTransit/Middleware/ConsumerMessageFilter.cs:line 48
2024-07-03 04:15:59.897 +07:00 [DBG] Declare queue: name: user-media-queue_error, durable, consumer-count: 0 message-count: 0
2024-07-03 04:15:59.922 +07:00 [DBG] Declare exchange: name: user-media-queue_error, type: fanout, durable
2024-07-03 04:15:59.927 +07:00 [DBG] Bind queue: source: user-media-queue_error, destination: user-media-queue_error
2024-07-03 04:18:25.953 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-07-03 04:18:26.432 +07:00 [DBG] Hosting starting
2024-07-03 04:18:26.478 +07:00 [INF] User profile is available. Using 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-07-03 04:18:26.846 +07:00 [INF] Configured endpoint user-media-queue, Consumer: capygram.Auth.MessageBus.Event.UserMediaNotificationConsumer
2024-07-03 04:18:27.069 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-86acdddc-5ebb-46d0-8da9-a5d2c38b8b42.xml'.
2024-07-03 04:18:27.077 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-97575500-6a39-4aec-a5f7-bc1ac2a50231.xml'.
2024-07-03 04:18:27.077 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-c1d10d47-675a-4953-a6d0-6a670993d84e.xml'.
2024-07-03 04:18:27.078 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-cd53a739-4711-4aeb-9f47-0d2c26453423.xml'.
2024-07-03 04:18:27.084 +07:00 [DBG] Found key {86acdddc-5ebb-46d0-8da9-a5d2c38b8b42}.
2024-07-03 04:18:27.092 +07:00 [DBG] Found key {97575500-6a39-4aec-a5f7-bc1ac2a50231}.
2024-07-03 04:18:27.093 +07:00 [DBG] Found key {c1d10d47-675a-4953-a6d0-6a670993d84e}.
2024-07-03 04:18:27.093 +07:00 [DBG] Found key {cd53a739-4711-4aeb-9f47-0d2c26453423}.
2024-07-03 04:18:27.100 +07:00 [DBG] Considering key {97575500-6a39-4aec-a5f7-bc1ac2a50231} with expiration date 2024-09-23 17:58:26Z as default key.
2024-07-03 04:18:27.104 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-07-03 04:18:27.106 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-07-03 04:18:27.109 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-07-03 04:18:27.114 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-07-03 04:18:27.118 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-07-03 04:18:27.120 +07:00 [DBG] Using key {97575500-6a39-4aec-a5f7-bc1ac2a50231} as the default key.
2024-07-03 04:18:27.121 +07:00 [DBG] Key ring with default key {97575500-6a39-4aec-a5f7-bc1ac2a50231} was loaded during application startup.
2024-07-03 04:18:27.123 +07:00 [DBG] Starting bus instances: IBus
2024-07-03 04:18:27.129 +07:00 [DBG] Starting bus: "rabbitmq://localhost/capygram"
2024-07-03 04:18:27.199 +07:00 [DBG] Connect: guest@localhost:5672/capygram
2024-07-03 04:18:27.440 +07:00 [DBG] Connected: guest@localhost:5672/capygram (address: amqp://localhost:5672, local: 54923)
2024-07-03 04:18:27.456 +07:00 [INF] Now listening on: https://localhost:7284
2024-07-03 04:18:27.456 +07:00 [INF] Now listening on: http://localhost:5090
2024-07-03 04:18:27.457 +07:00 [DBG] Loaded hosting startup assembly capygram.Auth
2024-07-03 04:18:27.457 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-07-03 04:18:27.457 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-07-03 04:18:27.458 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-07-03 04:18:27.458 +07:00 [INF] Hosting environment: Development
2024-07-03 04:18:27.458 +07:00 [INF] Content root path: C:\coode\Hit_Product\capygram-be\src\Services\capygram.Auth
2024-07-03 04:18:27.459 +07:00 [DBG] Hosting started
2024-07-03 04:18:27.492 +07:00 [DBG] Endpoint Ready: "rabbitmq://localhost/capygram/DESKTOPO1721LD_capygramAuth_bus_xbhoyyysrsen7t1ybdqjizrddf?temporary=true"
2024-07-03 04:18:27.516 +07:00 [DBG] Declare queue: name: user-media-queue, durable, consumer-count: 0 message-count: 0
2024-07-03 04:18:27.535 +07:00 [DBG] Declare exchange: name: user-media-queue, type: fanout, durable
2024-07-03 04:18:27.544 +07:00 [DBG] Declare exchange: name: send-notification-media-exchange, type: topic, durable
2024-07-03 04:18:27.554 +07:00 [DBG] Bind queue: source: user-media-queue, destination: user-media-queue
2024-07-03 04:18:27.584 +07:00 [DBG] Bind exchange: source: send-notification-media-exchange, destination: user-media-queue, routing-key: user
2024-07-03 04:18:27.619 +07:00 [DBG] Connection id "0HN4QRI1UDFG6" received FIN.
2024-07-03 04:18:27.619 +07:00 [DBG] Connection id "0HN4QRI1UDFG7" received FIN.
2024-07-03 04:18:27.627 +07:00 [DBG] Connection id "0HN4QRI1UDFG7" accepted.
2024-07-03 04:18:27.627 +07:00 [DBG] Connection id "0HN4QRI1UDFG6" accepted.
2024-07-03 04:18:27.629 +07:00 [DBG] Connection id "0HN4QRI1UDFG6" started.
2024-07-03 04:18:27.629 +07:00 [DBG] Connection id "0HN4QRI1UDFG7" started.
2024-07-03 04:18:27.649 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-07-03 04:18:27.649 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-07-03 04:18:27.684 +07:00 [DBG] Connection id "0HN4QRI1UDFG7" stopped.
2024-07-03 04:18:27.684 +07:00 [DBG] Connection id "0HN4QRI1UDFG6" stopped.
2024-07-03 04:18:27.691 +07:00 [DBG] Connection id "0HN4QRI1UDFG6" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-07-03 04:18:27.691 +07:00 [DBG] Connection id "0HN4QRI1UDFG7" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-07-03 04:18:27.709 +07:00 [DBG] Consumer Ok: "rabbitmq://localhost/capygram/user-media-queue" - amq.ctag-BUfTbiVg7eLJ8t80paeu4A
2024-07-03 04:18:27.711 +07:00 [DBG] Endpoint Ready: "rabbitmq://localhost/capygram/user-media-queue"
2024-07-03 04:18:27.718 +07:00 [INF] Bus started: "rabbitmq://localhost/capygram"
2024-07-03 04:18:28.065 +07:00 [DBG] Connection id "0HN4QRI1UDFG8" accepted.
2024-07-03 04:18:28.066 +07:00 [DBG] Connection id "0HN4QRI1UDFG8" started.
2024-07-03 04:18:28.116 +07:00 [DBG] Connection 0HN4QRI1UDFG8 established using the following protocol: "Tls13"
2024-07-03 04:18:28.199 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7284/swagger/index.html - null null
2024-07-03 04:18:28.308 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-07-03 04:18:28.349 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-07-03 04:18:28.350 +07:00 [DBG] Request did not match any endpoints
2024-07-03 04:18:28.463 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-07-03 04:18:28.465 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-07-03 04:18:28.498 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-07-03 04:18:28.499 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-07-03 04:18:28.504 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7284/swagger/index.html - 200 null text/html;charset=utf-8 311.4245ms
2024-07-03 04:18:28.667 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7284/_framework/aspnetcore-browser-refresh.js - null null
2024-07-03 04:18:28.679 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7284/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 12.2367ms
2024-07-03 04:18:28.748 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7284/_vs/browserLink - null null
2024-07-03 04:18:28.811 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7284/_vs/browserLink - 200 null text/javascript; charset=UTF-8 62.718ms
2024-07-03 04:18:29.119 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7284/swagger/v1/swagger.json - null null
2024-07-03 04:18:29.121 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-07-03 04:18:29.121 +07:00 [DBG] Request did not match any endpoints
2024-07-03 04:18:29.325 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7284/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 206.0601ms
2024-07-03 04:19:54.057 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7284/api/Users/upload-avatar - multipart/form-data; boundary=----WebKitFormBoundarydA8osMnJxH7HOCe4 89860
2024-07-03 04:19:54.061 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Users/upload-avatar'
2024-07-03 04:19:54.063 +07:00 [DBG] Endpoint 'capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth)' with route pattern 'api/Users/upload-avatar' is valid for the request path '/api/Users/upload-avatar'
2024-07-03 04:19:54.064 +07:00 [DBG] Request matched endpoint 'capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth)'
2024-07-03 04:19:54.066 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-03 04:19:54.068 +07:00 [INF] Start request......!
2024-07-03 04:19:54.138 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-07-03 04:19:54.141 +07:00 [INF] Executing endpoint 'capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth)'
2024-07-03 04:19:54.169 +07:00 [INF] Route matched with {action = "UpdateAvatar", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateAvatar(System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile], System.Guid) on controller capygram.Auth.Controllers.UsersController (capygram.Auth).
2024-07-03 04:19:54.171 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-03 04:19:54.171 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-03 04:19:54.172 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-03 04:19:54.172 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-03 04:19:54.172 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-03 04:19:54.174 +07:00 [DBG] Executing controller factory for controller capygram.Auth.Controllers.UsersController (capygram.Auth)
2024-07-03 04:19:54.183 +07:00 [DBG] Executed controller factory for controller capygram.Auth.Controllers.UsersController (capygram.Auth)
2024-07-03 04:19:54.190 +07:00 [DBG] Connection id "0HN4QRI1UDFG8", Request id "0HN4QRI1UDFG8:00000009": started reading request body.
2024-07-03 04:19:54.190 +07:00 [DBG] Connection id "0HN4QRI1UDFG8", Request id "0HN4QRI1UDFG8:00000009": done reading request body.
2024-07-03 04:19:54.213 +07:00 [DBG] Attempting to bind parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]' ...
2024-07-03 04:19:54.217 +07:00 [DBG] Attempting to bind parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]' using the name '' in request data ...
2024-07-03 04:19:54.219 +07:00 [DBG] Done attempting to bind parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]'.
2024-07-03 04:19:54.219 +07:00 [DBG] Done attempting to bind parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]'.
2024-07-03 04:19:54.219 +07:00 [DBG] Attempting to validate the bound parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]' ...
2024-07-03 04:19:54.231 +07:00 [DBG] Done attempting to validate the bound parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]'.
2024-07-03 04:19:54.232 +07:00 [DBG] Attempting to bind parameter 'userId' of type 'System.Guid' ...
2024-07-03 04:19:54.233 +07:00 [DBG] Attempting to bind parameter 'userId' of type 'System.Guid' using the name 'userId' in request data ...
2024-07-03 04:19:54.233 +07:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.Guid'.
2024-07-03 04:19:54.233 +07:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.Guid'.
2024-07-03 04:19:54.234 +07:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.Guid' ...
2024-07-03 04:19:54.234 +07:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.Guid'.
2024-07-03 04:19:58.422 +07:00 [DBG] Declare exchange: name: image-upload-notification, type: fanout, durable
2024-07-03 04:19:58.423 +07:00 [DBG] Declare exchange: name: inotification, type: fanout, durable
2024-07-03 04:19:58.426 +07:00 [DBG] Bind exchange: source: image-upload-notification, destination: inotification
2024-07-03 04:19:58.535 +07:00 [DBG] SEND "rabbitmq://localhost/capygram/image-upload-notification" "78790000-1625-902e-8ffc-08dc9adcba02" capygram.Common.MessageBus.Events.ImageUploadNotification
2024-07-03 04:20:21.701 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-07-03 04:20:21.703 +07:00 [DBG] No information found on request to perform content negotiation.
2024-07-03 04:20:21.703 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-07-03 04:20:21.703 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-07-03 04:20:21.704 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-07-03 04:20:21.705 +07:00 [INF] Executing OkObjectResult, writing value of type 'capygram.Common.Shared.Result`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-07-03 04:20:25.934 +07:00 [INF] Executed action capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth) in 31754.8308ms
2024-07-03 04:20:25.935 +07:00 [INF] Executed endpoint 'capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth)'
2024-07-03 04:20:33.155 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7284/api/Users/upload-avatar - 200 null application/json; charset=utf-8 39098.1757ms
2024-07-03 04:21:21.223 +07:00 [DBG] RECEIVE "rabbitmq://localhost/capygram/user-media-queue" "e03e0000-1625-902e-c556-08dc9adcceb3" capygram.Common.MessageBus.Events.ImageUploadedNotification capygram.Auth.MessageBus.Event.UserMediaNotificationConsumer("00:00:47.9742441")
2024-07-03 04:29:38.488 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-07-03 04:29:38.971 +07:00 [DBG] Hosting starting
2024-07-03 04:29:39.016 +07:00 [INF] User profile is available. Using 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-07-03 04:29:39.351 +07:00 [INF] Configured endpoint user-media-queue, Consumer: capygram.Auth.MessageBus.Event.UserMediaNotificationConsumer
2024-07-03 04:29:39.510 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-86acdddc-5ebb-46d0-8da9-a5d2c38b8b42.xml'.
2024-07-03 04:29:39.521 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-97575500-6a39-4aec-a5f7-bc1ac2a50231.xml'.
2024-07-03 04:29:39.523 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-c1d10d47-675a-4953-a6d0-6a670993d84e.xml'.
2024-07-03 04:29:39.523 +07:00 [DBG] Reading data from file 'C:\Users\ToilaHieu\AppData\Local\ASP.NET\DataProtection-Keys\key-cd53a739-4711-4aeb-9f47-0d2c26453423.xml'.
2024-07-03 04:29:39.530 +07:00 [DBG] Found key {86acdddc-5ebb-46d0-8da9-a5d2c38b8b42}.
2024-07-03 04:29:39.538 +07:00 [DBG] Found key {97575500-6a39-4aec-a5f7-bc1ac2a50231}.
2024-07-03 04:29:39.539 +07:00 [DBG] Found key {c1d10d47-675a-4953-a6d0-6a670993d84e}.
2024-07-03 04:29:39.541 +07:00 [DBG] Found key {cd53a739-4711-4aeb-9f47-0d2c26453423}.
2024-07-03 04:29:39.550 +07:00 [DBG] Considering key {97575500-6a39-4aec-a5f7-bc1ac2a50231} with expiration date 2024-09-23 17:58:26Z as default key.
2024-07-03 04:29:39.555 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-07-03 04:29:39.557 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-07-03 04:29:39.560 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-07-03 04:29:39.564 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-07-03 04:29:39.566 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-07-03 04:29:39.568 +07:00 [DBG] Using key {97575500-6a39-4aec-a5f7-bc1ac2a50231} as the default key.
2024-07-03 04:29:39.569 +07:00 [DBG] Key ring with default key {97575500-6a39-4aec-a5f7-bc1ac2a50231} was loaded during application startup.
2024-07-03 04:29:39.570 +07:00 [DBG] Starting bus instances: IBus
2024-07-03 04:29:39.577 +07:00 [DBG] Starting bus: "rabbitmq://localhost/capygram"
2024-07-03 04:29:39.652 +07:00 [DBG] Connect: guest@localhost:5672/capygram
2024-07-03 04:29:39.891 +07:00 [DBG] Connected: guest@localhost:5672/capygram (address: amqp://localhost:5672, local: 55403)
2024-07-03 04:29:39.892 +07:00 [INF] Now listening on: https://localhost:7284
2024-07-03 04:29:39.893 +07:00 [INF] Now listening on: http://localhost:5090
2024-07-03 04:29:39.893 +07:00 [DBG] Loaded hosting startup assembly capygram.Auth
2024-07-03 04:29:39.893 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-07-03 04:29:39.893 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-07-03 04:29:39.894 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-07-03 04:29:39.894 +07:00 [INF] Hosting environment: Development
2024-07-03 04:29:39.894 +07:00 [INF] Content root path: C:\coode\Hit_Product\capygram-be\src\Services\capygram.Auth
2024-07-03 04:29:39.895 +07:00 [DBG] Hosting started
2024-07-03 04:29:39.932 +07:00 [DBG] Endpoint Ready: "rabbitmq://localhost/capygram/DESKTOPO1721LD_capygramAuth_bus_j13oyyysrsenhmk4bdqjizowbh?temporary=true"
2024-07-03 04:29:39.952 +07:00 [DBG] Declare queue: name: user-media-queue, durable, consumer-count: 0 message-count: 0
2024-07-03 04:29:39.980 +07:00 [DBG] Declare exchange: name: user-media-queue, type: fanout, durable
2024-07-03 04:29:39.985 +07:00 [DBG] Declare exchange: name: send-notification-media-exchange, type: topic, durable
2024-07-03 04:29:39.991 +07:00 [DBG] Bind queue: source: user-media-queue, destination: user-media-queue
2024-07-03 04:29:40.024 +07:00 [DBG] Bind exchange: source: send-notification-media-exchange, destination: user-media-queue, routing-key: user
2024-07-03 04:29:40.114 +07:00 [DBG] Consumer Ok: "rabbitmq://localhost/capygram/user-media-queue" - amq.ctag-c6V3J2A4_GjTzmdGmGDT6w
2024-07-03 04:29:40.116 +07:00 [DBG] Endpoint Ready: "rabbitmq://localhost/capygram/user-media-queue"
2024-07-03 04:29:40.120 +07:00 [INF] Bus started: "rabbitmq://localhost/capygram"
2024-07-03 04:29:40.224 +07:00 [DBG] Connection id "0HN4QROACS5MV" accepted.
2024-07-03 04:29:40.224 +07:00 [DBG] Connection id "0HN4QROACS5MU" accepted.
2024-07-03 04:29:40.225 +07:00 [DBG] Connection id "0HN4QROACS5MU" started.
2024-07-03 04:29:40.225 +07:00 [DBG] Connection id "0HN4QROACS5MV" started.
2024-07-03 04:29:40.229 +07:00 [DBG] Connection id "0HN4QROACS5MU" received FIN.
2024-07-03 04:29:40.229 +07:00 [DBG] Connection id "0HN4QROACS5MV" received FIN.
2024-07-03 04:29:40.264 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-07-03 04:29:40.247 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-07-03 04:29:40.276 +07:00 [DBG] Connection id "0HN4QROACS5MU" stopped.
2024-07-03 04:29:40.276 +07:00 [DBG] Connection id "0HN4QROACS5MV" stopped.
2024-07-03 04:29:40.279 +07:00 [DBG] Connection id "0HN4QROACS5MV" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-07-03 04:29:40.280 +07:00 [DBG] Connection id "0HN4QROACS5MU" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-07-03 04:29:40.531 +07:00 [DBG] Connection id "0HN4QROACS5N0" accepted.
2024-07-03 04:29:40.532 +07:00 [DBG] Connection id "0HN4QROACS5N0" started.
2024-07-03 04:29:40.597 +07:00 [DBG] Connection 0HN4QROACS5N0 established using the following protocol: "Tls13"
2024-07-03 04:29:40.672 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7284/swagger/index.html - null null
2024-07-03 04:29:40.782 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-07-03 04:29:40.819 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-07-03 04:29:40.820 +07:00 [DBG] Request did not match any endpoints
2024-07-03 04:29:40.929 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-07-03 04:29:40.932 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-07-03 04:29:40.954 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-07-03 04:29:40.955 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-07-03 04:29:40.958 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7284/swagger/index.html - 200 null text/html;charset=utf-8 291.9241ms
2024-07-03 04:29:41.165 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7284/_framework/aspnetcore-browser-refresh.js - null null
2024-07-03 04:29:41.178 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7284/_vs/browserLink - null null
2024-07-03 04:29:41.179 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7284/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 14.4ms
2024-07-03 04:29:41.387 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7284/_vs/browserLink - 200 null text/javascript; charset=UTF-8 209.2471ms
2024-07-03 04:29:41.829 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7284/swagger/v1/swagger.json - null null
2024-07-03 04:29:41.830 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-07-03 04:29:41.830 +07:00 [DBG] Request did not match any endpoints
2024-07-03 04:29:42.026 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7284/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 197.6298ms
2024-07-03 04:31:08.378 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7284/api/Users/upload-avatar - multipart/form-data; boundary=----WebKitFormBoundary9Nv2DtCg7BNx3ckL 39812
2024-07-03 04:31:08.385 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Users/upload-avatar'
2024-07-03 04:31:08.390 +07:00 [DBG] Endpoint 'capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth)' with route pattern 'api/Users/upload-avatar' is valid for the request path '/api/Users/upload-avatar'
2024-07-03 04:31:08.391 +07:00 [DBG] Request matched endpoint 'capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth)'
2024-07-03 04:31:08.392 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-03 04:31:08.394 +07:00 [INF] Start request......!
2024-07-03 04:31:08.464 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-07-03 04:31:08.466 +07:00 [INF] Executing endpoint 'capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth)'
2024-07-03 04:31:08.488 +07:00 [INF] Route matched with {action = "UpdateAvatar", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateAvatar(System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile], System.Guid) on controller capygram.Auth.Controllers.UsersController (capygram.Auth).
2024-07-03 04:31:08.490 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-03 04:31:08.490 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-03 04:31:08.491 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-03 04:31:08.491 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-03 04:31:08.491 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-03 04:31:08.493 +07:00 [DBG] Executing controller factory for controller capygram.Auth.Controllers.UsersController (capygram.Auth)
2024-07-03 04:31:08.501 +07:00 [DBG] Executed controller factory for controller capygram.Auth.Controllers.UsersController (capygram.Auth)
2024-07-03 04:31:08.507 +07:00 [DBG] Connection id "0HN4QROACS5N0", Request id "0HN4QROACS5N0:00000009": started reading request body.
2024-07-03 04:31:08.507 +07:00 [DBG] Connection id "0HN4QROACS5N0", Request id "0HN4QROACS5N0:00000009": done reading request body.
2024-07-03 04:31:08.514 +07:00 [DBG] Attempting to bind parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]' ...
2024-07-03 04:31:08.518 +07:00 [DBG] Attempting to bind parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]' using the name '' in request data ...
2024-07-03 04:31:08.519 +07:00 [DBG] Done attempting to bind parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]'.
2024-07-03 04:31:08.519 +07:00 [DBG] Done attempting to bind parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]'.
2024-07-03 04:31:08.519 +07:00 [DBG] Attempting to validate the bound parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]' ...
2024-07-03 04:31:08.527 +07:00 [DBG] Done attempting to validate the bound parameter 'fileToUpload' of type 'System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]'.
2024-07-03 04:31:08.529 +07:00 [DBG] Attempting to bind parameter 'userId' of type 'System.Guid' ...
2024-07-03 04:31:08.529 +07:00 [DBG] Attempting to bind parameter 'userId' of type 'System.Guid' using the name 'userId' in request data ...
2024-07-03 04:31:08.530 +07:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.Guid'.
2024-07-03 04:31:08.530 +07:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.Guid'.
2024-07-03 04:31:08.530 +07:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.Guid' ...
2024-07-03 04:31:08.530 +07:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.Guid'.
2024-07-03 04:31:11.407 +07:00 [DBG] Declare exchange: name: image-upload-notification, type: fanout, durable
2024-07-03 04:31:11.407 +07:00 [DBG] Declare exchange: name: inotification, type: fanout, durable
2024-07-03 04:31:11.410 +07:00 [DBG] Bind exchange: source: image-upload-notification, destination: inotification
2024-07-03 04:31:11.511 +07:00 [DBG] SEND "rabbitmq://localhost/capygram/image-upload-notification" "4cb30000-1625-902e-d51a-08dc9ade4b23" capygram.Common.MessageBus.Events.ImageUploadNotification
2024-07-03 04:31:12.923 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-07-03 04:31:12.924 +07:00 [DBG] No information found on request to perform content negotiation.
2024-07-03 04:31:12.925 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-07-03 04:31:12.925 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-07-03 04:31:12.926 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-07-03 04:31:12.927 +07:00 [INF] Executing OkObjectResult, writing value of type 'capygram.Common.Shared.Result`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-07-03 04:31:16.438 +07:00 [INF] Executed action capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth) in 7943.4643ms
2024-07-03 04:31:16.439 +07:00 [INF] Executed endpoint 'capygram.Auth.Controllers.UsersController.UpdateAvatar (capygram.Auth)'
2024-07-03 04:31:18.828 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7284/api/Users/upload-avatar - 200 null application/json; charset=utf-8 10450.339ms
2024-07-03 04:31:57.710 +07:00 [DBG] Declare exchange: name: user-changed-notification, type: fanout, durable
2024-07-03 04:31:57.710 +07:00 [DBG] Declare exchange: name: inotification, type: fanout, durable
2024-07-03 04:31:57.713 +07:00 [DBG] Bind exchange: source: user-changed-notification, destination: inotification
2024-07-03 04:31:57.752 +07:00 [DBG] SEND "rabbitmq://localhost/capygram/user-changed-notification" "4cb30000-1625-902e-40d7-08dc9ade66c0" capygram.Common.MessageBus.Events.UserChangedNotification
2024-07-03 04:32:00.138 +07:00 [DBG] RECEIVE "rabbitmq://localhost/capygram/user-media-queue" "08be0000-1625-902e-2197-08dc9ade4efa" capygram.Common.MessageBus.Events.ImageUploadedNotification capygram.Auth.MessageBus.Event.UserMediaNotificationConsumer("00:00:41.2162039")
